(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();function Yv(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function Qv(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var l=c.default;if(typeof l=="function"){var r=function s(){var o=!1;try{o=this instanceof s}catch{}return o?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};r.prototype=l.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(c).forEach(function(s){var o=Object.getOwnPropertyDescriptor(c,s);Object.defineProperty(r,s,o.get?o:{enumerable:!0,get:function(){return c[s]}})}),r}var vo={exports:{}},Oi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh;function Xv(){if(Rh)return Oi;Rh=1;var c=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function r(s,o,f){var d=null;if(f!==void 0&&(d=""+f),o.key!==void 0&&(d=""+o.key),"key"in o){f={};for(var y in o)y!=="key"&&(f[y]=o[y])}else f=o;return o=f.ref,{$$typeof:c,type:s,key:d,ref:o!==void 0?o:null,props:f}}return Oi.Fragment=l,Oi.jsx=r,Oi.jsxs=r,Oi}var Dh;function Vv(){return Dh||(Dh=1,vo.exports=Xv()),vo.exports}var p=Vv(),yo={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function Kv(){if(Uh)return me;Uh=1;var c=Symbol.for("react.transitional.element"),l=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function x(w){return w===null||typeof w!="object"?null:(w=T&&w[T]||w["@@iterator"],typeof w=="function"?w:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function B(w,L,I){this.props=w,this.context=L,this.refs=q,this.updater=I||U}B.prototype.isReactComponent={},B.prototype.setState=function(w,L){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,L,"setState")},B.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function Q(){}Q.prototype=B.prototype;function N(w,L,I){this.props=w,this.context=L,this.refs=q,this.updater=I||U}var z=N.prototype=new Q;z.constructor=N,H(z,B.prototype),z.isPureReactComponent=!0;var V=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function Y(w,L,I,K,ie,Ee){return I=Ee.ref,{$$typeof:c,type:w,key:L,ref:I!==void 0?I:null,props:Ee}}function W(w,L){return Y(w.type,L,void 0,void 0,void 0,w.props)}function ke(w){return typeof w=="object"&&w!==null&&w.$$typeof===c}function Ve(w){var L={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(I){return L[I]})}var Rt=/\/+/g;function He(w,L){return typeof w=="object"&&w!==null&&w.key!=null?Ve(""+w.key):L.toString(36)}function nn(){}function St(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(nn,nn):(w.status="pending",w.then(function(L){w.status==="pending"&&(w.status="fulfilled",w.value=L)},function(L){w.status==="pending"&&(w.status="rejected",w.reason=L)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function ut(w,L,I,K,ie){var Ee=typeof w;(Ee==="undefined"||Ee==="boolean")&&(w=null);var ce=!1;if(w===null)ce=!0;else switch(Ee){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(w.$$typeof){case c:case l:ce=!0;break;case _:return ce=w._init,ut(ce(w._payload),L,I,K,ie)}}if(ce)return ie=ie(w),ce=K===""?"."+He(w,0):K,V(ie)?(I="",ce!=null&&(I=ce.replace(Rt,"$&/")+"/"),ut(ie,L,I,"",function(Zt){return Zt})):ie!=null&&(ke(ie)&&(ie=W(ie,I+(ie.key==null||w&&w.key===ie.key?"":(""+ie.key).replace(Rt,"$&/")+"/")+ce)),L.push(ie)),1;ce=0;var mt=K===""?".":K+":";if(V(w))for(var Be=0;Be<w.length;Be++)K=w[Be],Ee=mt+He(K,Be),ce+=ut(K,L,I,Ee,ie);else if(Be=x(w),typeof Be=="function")for(w=Be.call(w),Be=0;!(K=w.next()).done;)K=K.value,Ee=mt+He(K,Be++),ce+=ut(K,L,I,Ee,ie);else if(Ee==="object"){if(typeof w.then=="function")return ut(St(w),L,I,K,ie);throw L=String(w),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return ce}function R(w,L,I){if(w==null)return w;var K=[],ie=0;return ut(w,K,"","",function(Ee){return L.call(I,Ee,ie++)}),K}function J(w){if(w._status===-1){var L=w._result;L=L(),L.then(function(I){(w._status===0||w._status===-1)&&(w._status=1,w._result=I)},function(I){(w._status===0||w._status===-1)&&(w._status=2,w._result=I)}),w._status===-1&&(w._status=0,w._result=L)}if(w._status===1)return w._result.default;throw w._result}var se=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)};function Ae(){}return me.Children={map:R,forEach:function(w,L,I){R(w,function(){L.apply(this,arguments)},I)},count:function(w){var L=0;return R(w,function(){L++}),L},toArray:function(w){return R(w,function(L){return L})||[]},only:function(w){if(!ke(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},me.Component=B,me.Fragment=r,me.Profiler=o,me.PureComponent=N,me.StrictMode=s,me.Suspense=m,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,me.__COMPILER_RUNTIME={__proto__:null,c:function(w){return $.H.useMemoCache(w)}},me.cache=function(w){return function(){return w.apply(null,arguments)}},me.cloneElement=function(w,L,I){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var K=H({},w.props),ie=w.key,Ee=void 0;if(L!=null)for(ce in L.ref!==void 0&&(Ee=void 0),L.key!==void 0&&(ie=""+L.key),L)!F.call(L,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&L.ref===void 0||(K[ce]=L[ce]);var ce=arguments.length-2;if(ce===1)K.children=I;else if(1<ce){for(var mt=Array(ce),Be=0;Be<ce;Be++)mt[Be]=arguments[Be+2];K.children=mt}return Y(w.type,ie,void 0,void 0,Ee,K)},me.createContext=function(w){return w={$$typeof:d,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:f,_context:w},w},me.createElement=function(w,L,I){var K,ie={},Ee=null;if(L!=null)for(K in L.key!==void 0&&(Ee=""+L.key),L)F.call(L,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ie[K]=L[K]);var ce=arguments.length-2;if(ce===1)ie.children=I;else if(1<ce){for(var mt=Array(ce),Be=0;Be<ce;Be++)mt[Be]=arguments[Be+2];ie.children=mt}if(w&&w.defaultProps)for(K in ce=w.defaultProps,ce)ie[K]===void 0&&(ie[K]=ce[K]);return Y(w,Ee,void 0,void 0,null,ie)},me.createRef=function(){return{current:null}},me.forwardRef=function(w){return{$$typeof:y,render:w}},me.isValidElement=ke,me.lazy=function(w){return{$$typeof:_,_payload:{_status:-1,_result:w},_init:J}},me.memo=function(w,L){return{$$typeof:g,type:w,compare:L===void 0?null:L}},me.startTransition=function(w){var L=$.T,I={};$.T=I;try{var K=w(),ie=$.S;ie!==null&&ie(I,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(Ae,se)}catch(Ee){se(Ee)}finally{$.T=L}},me.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},me.use=function(w){return $.H.use(w)},me.useActionState=function(w,L,I){return $.H.useActionState(w,L,I)},me.useCallback=function(w,L){return $.H.useCallback(w,L)},me.useContext=function(w){return $.H.useContext(w)},me.useDebugValue=function(){},me.useDeferredValue=function(w,L){return $.H.useDeferredValue(w,L)},me.useEffect=function(w,L,I){var K=$.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(w,L)},me.useId=function(){return $.H.useId()},me.useImperativeHandle=function(w,L,I){return $.H.useImperativeHandle(w,L,I)},me.useInsertionEffect=function(w,L){return $.H.useInsertionEffect(w,L)},me.useLayoutEffect=function(w,L){return $.H.useLayoutEffect(w,L)},me.useMemo=function(w,L){return $.H.useMemo(w,L)},me.useOptimistic=function(w,L){return $.H.useOptimistic(w,L)},me.useReducer=function(w,L,I){return $.H.useReducer(w,L,I)},me.useRef=function(w){return $.H.useRef(w)},me.useState=function(w){return $.H.useState(w)},me.useSyncExternalStore=function(w,L,I){return $.H.useSyncExternalStore(w,L,I)},me.useTransition=function(){return $.H.useTransition()},me.version="19.1.0",me}var Mh;function Lo(){return Mh||(Mh=1,yo.exports=Kv()),yo.exports}var te=Lo(),po={exports:{}},Ci={},_o={exports:{}},bo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh;function Zv(){return Nh||(Nh=1,function(c){function l(R,J){var se=R.length;R.push(J);e:for(;0<se;){var Ae=se-1>>>1,w=R[Ae];if(0<o(w,J))R[Ae]=J,R[se]=w,se=Ae;else break e}}function r(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var J=R[0],se=R.pop();if(se!==J){R[0]=se;e:for(var Ae=0,w=R.length,L=w>>>1;Ae<L;){var I=2*(Ae+1)-1,K=R[I],ie=I+1,Ee=R[ie];if(0>o(K,se))ie<w&&0>o(Ee,K)?(R[Ae]=Ee,R[ie]=se,Ae=ie):(R[Ae]=K,R[I]=se,Ae=I);else if(ie<w&&0>o(Ee,se))R[Ae]=Ee,R[ie]=se,Ae=ie;else break e}}return J}function o(R,J){var se=R.sortIndex-J.sortIndex;return se!==0?se:R.id-J.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;c.unstable_now=function(){return f.now()}}else{var d=Date,y=d.now();c.unstable_now=function(){return d.now()-y}}var m=[],g=[],_=1,T=null,x=3,U=!1,H=!1,q=!1,B=!1,Q=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function V(R){for(var J=r(g);J!==null;){if(J.callback===null)s(g);else if(J.startTime<=R)s(g),J.sortIndex=J.expirationTime,l(m,J);else break;J=r(g)}}function $(R){if(q=!1,V(R),!H)if(r(m)!==null)H=!0,F||(F=!0,He());else{var J=r(g);J!==null&&ut($,J.startTime-R)}}var F=!1,Y=-1,W=5,ke=-1;function Ve(){return B?!0:!(c.unstable_now()-ke<W)}function Rt(){if(B=!1,F){var R=c.unstable_now();ke=R;var J=!0;try{e:{H=!1,q&&(q=!1,N(Y),Y=-1),U=!0;var se=x;try{t:{for(V(R),T=r(m);T!==null&&!(T.expirationTime>R&&Ve());){var Ae=T.callback;if(typeof Ae=="function"){T.callback=null,x=T.priorityLevel;var w=Ae(T.expirationTime<=R);if(R=c.unstable_now(),typeof w=="function"){T.callback=w,V(R),J=!0;break t}T===r(m)&&s(m),V(R)}else s(m);T=r(m)}if(T!==null)J=!0;else{var L=r(g);L!==null&&ut($,L.startTime-R),J=!1}}break e}finally{T=null,x=se,U=!1}J=void 0}}finally{J?He():F=!1}}}var He;if(typeof z=="function")He=function(){z(Rt)};else if(typeof MessageChannel<"u"){var nn=new MessageChannel,St=nn.port2;nn.port1.onmessage=Rt,He=function(){St.postMessage(null)}}else He=function(){Q(Rt,0)};function ut(R,J){Y=Q(function(){R(c.unstable_now())},J)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(R){R.callback=null},c.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<R?Math.floor(1e3/R):5},c.unstable_getCurrentPriorityLevel=function(){return x},c.unstable_next=function(R){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var se=x;x=J;try{return R()}finally{x=se}},c.unstable_requestPaint=function(){B=!0},c.unstable_runWithPriority=function(R,J){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var se=x;x=R;try{return J()}finally{x=se}},c.unstable_scheduleCallback=function(R,J,se){var Ae=c.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ae+se:Ae):se=Ae,R){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=se+w,R={id:_++,callback:J,priorityLevel:R,startTime:se,expirationTime:w,sortIndex:-1},se>Ae?(R.sortIndex=se,l(g,R),r(m)===null&&R===r(g)&&(q?(N(Y),Y=-1):q=!0,ut($,se-Ae))):(R.sortIndex=w,l(m,R),H||U||(H=!0,F||(F=!0,He()))),R},c.unstable_shouldYield=Ve,c.unstable_wrapCallback=function(R){var J=x;return function(){var se=x;x=J;try{return R.apply(this,arguments)}finally{x=se}}}}(bo)),bo}var zh;function Jv(){return zh||(zh=1,_o.exports=Zv()),_o.exports}var wo={exports:{}},ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh;function Pv(){if(kh)return ht;kh=1;var c=Lo();function l(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(l(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function f(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var d=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ht.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(l(299));return f(m,g,null,_)},ht.flushSync=function(m){var g=d.T,_=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=_,s.d.f()}},ht.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},ht.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},ht.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=y(_,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,U=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:U}):_==="script"&&s.d.X(m,{crossOrigin:T,integrity:x,fetchPriority:U,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ht.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=y(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},ht.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=y(_,g.crossOrigin);s.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ht.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=y(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},ht.requestFormReset=function(m){s.d.r(m)},ht.unstable_batchedUpdates=function(m,g){return m(g)},ht.useFormState=function(m,g,_){return d.H.useFormState(m,g,_)},ht.useFormStatus=function(){return d.H.useHostTransitionStatus()},ht.version="19.1.0",ht}var Bh;function Fv(){if(Bh)return wo.exports;Bh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(l){console.error(l)}}return c(),wo.exports=Pv(),wo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function Iv(){if(qh)return Ci;qh=1;var c=Jv(),l=Lo(),r=Fv();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(f(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var u=i.alternate;if(u===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===n)return y(i),e;if(u===a)return y(i),t;u=u.sibling}throw Error(s(188))}if(n.return!==a.return)n=i,a=u;else{for(var h=!1,v=i.child;v;){if(v===n){h=!0,n=i,a=u;break}if(v===a){h=!0,a=i,n=u;break}v=v.sibling}if(!h){for(v=u.child;v;){if(v===n){h=!0,n=u,a=i;break}if(v===a){h=!0,a=u,n=i;break}v=v.sibling}if(!h)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(n.tag!==3)throw Error(s(188));return n.stateNode.current===n?e:t}function g(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=g(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),z=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ke=Symbol.for("react.activity"),Ve=Symbol.for("react.memo_cache_sentinel"),Rt=Symbol.iterator;function He(e){return e===null||typeof e!="object"?null:(e=Rt&&e[Rt]||e["@@iterator"],typeof e=="function"?e:null)}var nn=Symbol.for("react.client.reference");function St(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nn?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case B:return"Profiler";case q:return"StrictMode";case $:return"Suspense";case F:return"SuspenseList";case ke:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case z:return(e.displayName||"Context")+".Provider";case N:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:St(e.type)||"Memo";case W:t=e._payload,e=e._init;try{return St(e(t))}catch{}}return null}var ut=Array.isArray,R=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Ae=[],w=-1;function L(e){return{current:e}}function I(e){0>w||(e.current=Ae[w],Ae[w]=null,w--)}function K(e,t){w++,Ae[w]=e.current,e.current=t}var ie=L(null),Ee=L(null),ce=L(null),mt=L(null);function Be(e,t){switch(K(ce,t),K(Ee,e),K(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=lh(t),e=ih(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ie),K(ie,e)}function Zt(){I(ie),I(Ee),I(ce)}function Dl(e){e.memoizedState!==null&&K(mt,e);var t=ie.current,n=ih(t,e.type);t!==n&&(K(Ee,e),K(ie,n))}function xa(e){Ee.current===e&&(I(ie),I(Ee)),mt.current===e&&(I(mt),Ei._currentValue=se)}var ea=Object.prototype.hasOwnProperty,Aa=c.unstable_scheduleCallback,Oa=c.unstable_cancelCallback,ar=c.unstable_shouldYield,lr=c.unstable_requestPaint,Dt=c.unstable_now,ir=c.unstable_getCurrentPriorityLevel,Bi=c.unstable_ImmediatePriority,qi=c.unstable_UserBlockingPriority,Ca=c.unstable_NormalPriority,sr=c.unstable_LowPriority,Ra=c.unstable_IdlePriority,Li=c.log,rr=c.unstable_setDisableYieldValue,G=null,P=null;function Z(e){if(typeof Li=="function"&&rr(e),P&&typeof P.setStrictMode=="function")try{P.setStrictMode(G,e)}catch{}}var ae=Math.clz32?Math.clz32:de,X=Math.log,ge=Math.LN2;function de(e){return e>>>=0,e===0?32:31-(X(e)/ge|0)|0}var ye=256,Se=4194304;function re(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oe(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var v=a&134217727;return v!==0?(a=v&~u,a!==0?i=re(a):(h&=v,h!==0?i=re(h):n||(n=v&~e,n!==0&&(i=re(n))))):(v=a&~u,v!==0?i=re(v):h!==0?i=re(h):n||(n=a&~e,n!==0&&(i=re(n)))),i===0?0:t!==0&&t!==i&&(t&u)===0&&(u=i&-i,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:i}function ne(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ge(){var e=ye;return ye<<=1,(ye&4194048)===0&&(ye=256),e}function Jt(){var e=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),e}function Pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $t(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Da(e,t,n,a,i,u){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var v=e.entanglements,b=e.expirationTimes,A=e.hiddenUpdates;for(n=h&~n;0<n;){var D=31-ae(n),k=1<<D;v[D]=0,b[D]=-1;var O=A[D];if(O!==null)for(A[D]=null,D=0;D<O.length;D++){var C=O[D];C!==null&&(C.lane&=-536870913)}n&=~k}a!==0&&wn(e,a,0),u!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function wn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-ae(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&4194090}function ta(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-ae(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Sn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function En(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function na(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:Th(e.type))}function Tn(e,t){var n=J.p;try{return J.p=e,t()}finally{J.p=n}}var Ut=Math.random().toString(36).slice(2),tt="__reactFiber$"+Ut,Ie="__reactProps$"+Ut,jn="__reactContainer$"+Ut,Ul="__reactEvents$"+Ut,Ml="__reactListeners$"+Ut,Ng="__reactHandles$"+Ut,Xo="__reactResources$"+Ut,Nl="__reactMarker$"+Ut;function ur(e){delete e[tt],delete e[Ie],delete e[Ul],delete e[Ml],delete e[Ng]}function Ua(e){var t=e[tt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jn]||n[tt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=oh(e);e!==null;){if(n=e[tt])return n;e=oh(e)}return t}e=n,n=e.parentNode}return null}function Ma(e){if(e=e[tt]||e[jn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function zl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Na(e){var t=e[Xo];return t||(t=e[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function nt(e){e[Nl]=!0}var Vo=new Set,Ko={};function aa(e,t){za(e,t),za(e+"Capture",t)}function za(e,t){for(Ko[e]=t,e=0;e<t.length;e++)Vo.add(t[e])}var zg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zo={},Jo={};function kg(e){return ea.call(Jo,e)?!0:ea.call(Zo,e)?!1:zg.test(e)?Jo[e]=!0:(Zo[e]=!0,!1)}function Hi(e,t,n){if(kg(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Gi(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function an(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}var or,Po;function ka(e){if(or===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);or=t&&t[1]||"",Po=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+or+e+Po}var cr=!1;function fr(e,t){if(!e||cr)return"";cr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(C){var O=C}Reflect.construct(e,[],k)}else{try{k.call()}catch(C){O=C}e.call(k.prototype)}}else{try{throw Error()}catch(C){O=C}(k=e())&&typeof k.catch=="function"&&k.catch(function(){})}}catch(C){if(C&&O&&typeof C.stack=="string")return[C.stack,O.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=a.DetermineComponentFrameRoot(),h=u[0],v=u[1];if(h&&v){var b=h.split(`
`),A=v.split(`
`);for(i=a=0;a<b.length&&!b[a].includes("DetermineComponentFrameRoot");)a++;for(;i<A.length&&!A[i].includes("DetermineComponentFrameRoot");)i++;if(a===b.length||i===A.length)for(a=b.length-1,i=A.length-1;1<=a&&0<=i&&b[a]!==A[i];)i--;for(;1<=a&&0<=i;a--,i--)if(b[a]!==A[i]){if(a!==1||i!==1)do if(a--,i--,0>i||b[a]!==A[i]){var D=`
`+b[a].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=a&&0<=i);break}}}finally{cr=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ka(n):""}function Bg(e){switch(e.tag){case 26:case 27:case 5:return ka(e.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 15:return fr(e.type,!1);case 11:return fr(e.type.render,!1);case 1:return fr(e.type,!0);case 31:return ka("Activity");default:return""}}function Fo(e){try{var t="";do t+=Bg(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Io(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qg(e){var t=Io(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){a=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $i(e){e._valueTracker||(e._valueTracker=qg(e))}function Wo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Io(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lg=/[\n"\\]/g;function Nt(e){return e.replace(Lg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function dr(e,t,n,a,i,u,h,v){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Mt(t)):e.value!==""+Mt(t)&&(e.value=""+Mt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?hr(e,h,Mt(t)):n!=null?hr(e,h,Mt(n)):a!=null&&e.removeAttribute("value"),i==null&&u!=null&&(e.defaultChecked=!!u),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Mt(v):e.removeAttribute("name")}function ec(e,t,n,a,i,u,h,v){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null))return;n=n!=null?""+Mt(n):"",t=t!=null?""+Mt(t):n,v||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=v?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function hr(e,t,n){t==="number"&&Yi(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ba(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Mt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function tc(e,t,n){if(t!=null&&(t=""+Mt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Mt(n):""}function nc(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(s(92));if(ut(a)){if(1<a.length)throw Error(s(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Mt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a)}function qa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ac(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Hg.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function lc(e,t,n){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&ac(e,i,a)}else for(var u in t)t.hasOwnProperty(u)&&ac(e,u,t[u])}function gr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$g=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qi(e){return $g.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var mr=null;function vr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,Ha=null;function ic(e){var t=Ma(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(dr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[Ie]||null;if(!i)throw Error(s(90));dr(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Wo(a)}break e;case"textarea":tc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ba(e,!!n.multiple,t,!1)}}}var yr=!1;function sc(e,t,n){if(yr)return e(t,n);yr=!0;try{var a=e(t);return a}finally{if(yr=!1,(La!==null||Ha!==null)&&(Cs(),La&&(t=La,e=Ha,Ha=La=null,ic(t),e)))for(t=0;t<e.length;t++)ic(e[t])}}function kl(e,t){var n=e.stateNode;if(n===null)return null;var a=n[Ie]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(s(231,t,typeof n));return n}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(ln)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){pr=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{pr=!1}var xn=null,_r=null,Xi=null;function rc(){if(Xi)return Xi;var e,t=_r,n=t.length,a,i="value"in xn?xn.value:xn.textContent,u=i.length;for(e=0;e<n&&t[e]===i[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===i[u-a];a++);return Xi=i.slice(e,1<a?1-a:void 0)}function Vi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ki(){return!0}function uc(){return!1}function yt(e){function t(n,a,i,u,h){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ki:uc,this.isPropagationStopped=uc,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),t}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=yt(la),ql=_({},la,{view:0,detail:0}),Yg=yt(ql),br,wr,Ll,Ji=_({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ll&&(Ll&&e.type==="mousemove"?(br=e.screenX-Ll.screenX,wr=e.screenY-Ll.screenY):wr=br=0,Ll=e),br)},movementY:function(e){return"movementY"in e?e.movementY:wr}}),oc=yt(Ji),Qg=_({},Ji,{dataTransfer:0}),Xg=yt(Qg),Vg=_({},ql,{relatedTarget:0}),Sr=yt(Vg),Kg=_({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),Zg=yt(Kg),Jg=_({},la,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pg=yt(Jg),Fg=_({},la,{data:0}),cc=yt(Fg),Ig={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},em={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=em[e])?!!t[e]:!1}function Er(){return tm}var nm=_({},ql,{key:function(e){if(e.key){var t=Ig[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return e.type==="keypress"?Vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),am=yt(nm),lm=_({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=yt(lm),im=_({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er}),sm=yt(im),rm=_({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),um=yt(rm),om=_({},Ji,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cm=yt(om),fm=_({},la,{newState:0,oldState:0}),dm=yt(fm),hm=[9,13,27,32],Tr=ln&&"CompositionEvent"in window,Hl=null;ln&&"documentMode"in document&&(Hl=document.documentMode);var gm=ln&&"TextEvent"in window&&!Hl,dc=ln&&(!Tr||Hl&&8<Hl&&11>=Hl),hc=" ",gc=!1;function mc(e,t){switch(e){case"keyup":return hm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ga=!1;function mm(e,t){switch(e){case"compositionend":return vc(t);case"keypress":return t.which!==32?null:(gc=!0,hc);case"textInput":return e=t.data,e===hc&&gc?null:e;default:return null}}function vm(e,t){if(Ga)return e==="compositionend"||!Tr&&mc(e,t)?(e=rc(),Xi=_r=xn=null,Ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dc&&t.locale!=="ko"?null:t.data;default:return null}}var ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ym[e.type]:t==="textarea"}function pc(e,t,n,a){La?Ha?Ha.push(a):Ha=[a]:La=a,t=zs(t,"onChange"),0<t.length&&(n=new Zi("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Gl=null,$l=null;function pm(e){Wd(e,0)}function Pi(e){var t=zl(e);if(Wo(t))return e}function _c(e,t){if(e==="change")return t}var bc=!1;if(ln){var jr;if(ln){var xr="oninput"in document;if(!xr){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),xr=typeof wc.oninput=="function"}jr=xr}else jr=!1;bc=jr&&(!document.documentMode||9<document.documentMode)}function Sc(){Gl&&(Gl.detachEvent("onpropertychange",Ec),$l=Gl=null)}function Ec(e){if(e.propertyName==="value"&&Pi($l)){var t=[];pc(t,$l,e,vr(e)),sc(pm,t)}}function _m(e,t,n){e==="focusin"?(Sc(),Gl=t,$l=n,Gl.attachEvent("onpropertychange",Ec)):e==="focusout"&&Sc()}function bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pi($l)}function wm(e,t){if(e==="click")return Pi(t)}function Sm(e,t){if(e==="input"||e==="change")return Pi(t)}function Em(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:Em;function Yl(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!ea.call(t,i)||!Et(e[i],t[i]))return!1}return!0}function Tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jc(e,t){var n=Tc(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tc(n)}}function xc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ac(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yi(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yi(e.document)}return t}function Ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Tm=ln&&"documentMode"in document&&11>=document.documentMode,$a=null,Or=null,Ql=null,Cr=!1;function Oc(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cr||$a==null||$a!==Yi(a)||(a=$a,"selectionStart"in a&&Ar(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ql&&Yl(Ql,a)||(Ql=a,a=zs(Or,"onSelect"),0<a.length&&(t=new Zi("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=$a)))}function ia(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ya={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},Rr={},Cc={};ln&&(Cc=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function sa(e){if(Rr[e])return Rr[e];if(!Ya[e])return e;var t=Ya[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Cc)return Rr[e]=t[n];return e}var Rc=sa("animationend"),Dc=sa("animationiteration"),Uc=sa("animationstart"),jm=sa("transitionrun"),xm=sa("transitionstart"),Am=sa("transitioncancel"),Mc=sa("transitionend"),Nc=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dr.push("scrollEnd");function Yt(e,t){Nc.set(e,t),aa(t,[e])}var zc=new WeakMap;function zt(e,t){if(typeof e=="object"&&e!==null){var n=zc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Fo(t)},zc.set(e,t),t)}return{value:e,source:t,stack:Fo(t)}}var kt=[],Qa=0,Ur=0;function Fi(){for(var e=Qa,t=Ur=Qa=0;t<e;){var n=kt[t];kt[t++]=null;var a=kt[t];kt[t++]=null;var i=kt[t];kt[t++]=null;var u=kt[t];if(kt[t++]=null,a!==null&&i!==null){var h=a.pending;h===null?i.next=i:(i.next=h.next,h.next=i),a.pending=i}u!==0&&kc(n,i,u)}}function Ii(e,t,n,a){kt[Qa++]=e,kt[Qa++]=t,kt[Qa++]=n,kt[Qa++]=a,Ur|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Mr(e,t,n,a){return Ii(e,t,n,a),Wi(e)}function Xa(e,t){return Ii(e,null,null,t),Wi(e)}function kc(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,u=e.return;u!==null;)u.childLanes|=n,a=u.alternate,a!==null&&(a.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(i=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,i&&t!==null&&(i=31-ae(n),e=u.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),u):null}function Wi(e){if(50<mi)throw mi=0,Lu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Va={};function Om(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,a){return new Om(e,t,n,a)}function Nr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bc(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function es(e,t,n,a,i,u){var h=0;if(a=e,typeof e=="function")Nr(e)&&(h=1);else if(typeof e=="string")h=Rv(e,n,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ke:return e=Tt(31,n,t,i),e.elementType=ke,e.lanes=u,e;case H:return ra(n.children,i,u,t);case q:h=8,i|=24;break;case B:return e=Tt(12,n,t,i|2),e.elementType=B,e.lanes=u,e;case $:return e=Tt(13,n,t,i),e.elementType=$,e.lanes=u,e;case F:return e=Tt(19,n,t,i),e.elementType=F,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:case z:h=10;break e;case N:h=9;break e;case V:h=11;break e;case Y:h=14;break e;case W:h=16,a=null;break e}h=29,n=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=Tt(h,n,t,i),t.elementType=e,t.type=a,t.lanes=u,t}function ra(e,t,n,a){return e=Tt(7,e,a,t),e.lanes=n,e}function zr(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function kr(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ka=[],Za=0,ts=null,ns=0,Bt=[],qt=0,ua=null,rn=1,un="";function oa(e,t){Ka[Za++]=ns,Ka[Za++]=ts,ts=e,ns=t}function qc(e,t,n){Bt[qt++]=rn,Bt[qt++]=un,Bt[qt++]=ua,ua=e;var a=rn;e=un;var i=32-ae(a)-1;a&=~(1<<i),n+=1;var u=32-ae(t)+i;if(30<u){var h=i-i%5;u=(a&(1<<h)-1).toString(32),a>>=h,i-=h,rn=1<<32-ae(t)+i|n<<i|a,un=u+e}else rn=1<<u|n<<i|a,un=e}function Br(e){e.return!==null&&(oa(e,1),qc(e,1,0))}function qr(e){for(;e===ts;)ts=Ka[--Za],Ka[Za]=null,ns=Ka[--Za],Ka[Za]=null;for(;e===ua;)ua=Bt[--qt],Bt[qt]=null,un=Bt[--qt],Bt[qt]=null,rn=Bt[--qt],Bt[qt]=null}var vt=null,Qe=null,xe=!1,ca=null,Ft=!1,Lr=Error(s(519));function fa(e){var t=Error(s(418,""));throw Kl(zt(t,e)),Lr}function Lc(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[tt]=e,t[Ie]=a,n){case"dialog":be("cancel",t),be("close",t);break;case"iframe":case"object":case"embed":be("load",t);break;case"video":case"audio":for(n=0;n<yi.length;n++)be(yi[n],t);break;case"source":be("error",t);break;case"img":case"image":case"link":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"input":be("invalid",t),ec(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),$i(t);break;case"select":be("invalid",t);break;case"textarea":be("invalid",t),nc(t,a.value,a.defaultValue,a.children),$i(t)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||ah(t.textContent,n)?(a.popover!=null&&(be("beforetoggle",t),be("toggle",t)),a.onScroll!=null&&be("scroll",t),a.onScrollEnd!=null&&be("scrollend",t),a.onClick!=null&&(t.onclick=ks),t=!0):t=!1,t||fa(e)}function Hc(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:vt=vt.return}}function Xl(e){if(e!==vt)return!1;if(!xe)return Hc(e),xe=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||to(e.type,e.memoizedProps)),n=!n),n&&Qe&&fa(e),Hc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Qe=Xt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Qe=null}}else t===27?(t=Qe,$n(e.type)?(e=io,io=null,Qe=e):Qe=t):Qe=vt?Xt(e.stateNode.nextSibling):null;return!0}function Vl(){Qe=vt=null,xe=!1}function Gc(){var e=ca;return e!==null&&(bt===null?bt=e:bt.push.apply(bt,e),ca=null),e}function Kl(e){ca===null?ca=[e]:ca.push(e)}var Hr=L(null),da=null,on=null;function An(e,t,n){K(Hr,t._currentValue),t._currentValue=n}function cn(e){e._currentValue=Hr.current,I(Hr)}function Gr(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function $r(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){var h=i.child;u=u.firstContext;e:for(;u!==null;){var v=u;u=i;for(var b=0;b<t.length;b++)if(v.context===t[b]){u.lanes|=n,v=u.alternate,v!==null&&(v.lanes|=n),Gr(u.return,n,e),a||(h=null);break e}u=v.next}}else if(i.tag===18){if(h=i.return,h===null)throw Error(s(341));h.lanes|=n,u=h.alternate,u!==null&&(u.lanes|=n),Gr(h,n,e),h=null}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===e){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}}function Zl(e,t,n,a){e=null;for(var i=t,u=!1;i!==null;){if(!u){if((i.flags&524288)!==0)u=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var h=i.alternate;if(h===null)throw Error(s(387));if(h=h.memoizedProps,h!==null){var v=i.type;Et(i.pendingProps.value,h.value)||(e!==null?e.push(v):e=[v])}}else if(i===mt.current){if(h=i.alternate,h===null)throw Error(s(387));h.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Ei):e=[Ei])}i=i.return}e!==null&&$r(t,e,n,a),t.flags|=262144}function as(e){for(e=e.firstContext;e!==null;){if(!Et(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ha(e){da=e,on=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dt(e){return $c(da,e)}function ls(e,t){return da===null&&ha(e),$c(e,t)}function $c(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},on===null){if(e===null)throw Error(s(308));on=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else on=on.next=t;return n}var Cm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rm=c.unstable_scheduleCallback,Dm=c.unstable_NormalPriority,We={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yr(){return{controller:new Cm,data:new Map,refCount:0}}function Jl(e){e.refCount--,e.refCount===0&&Rm(Dm,function(){e.controller.abort()})}var Pl=null,Qr=0,Ja=0,Pa=null;function Um(e,t){if(Pl===null){var n=Pl=[];Qr=0,Ja=Vu(),Pa={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Qr++,t.then(Yc,Yc),t}function Yc(){if(--Qr===0&&Pl!==null){Pa!==null&&(Pa.status="fulfilled");var e=Pl;Pl=null,Ja=0,Pa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Mm(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var Qc=R.S;R.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Um(e,t),Qc!==null&&Qc(e,t)};var ga=L(null);function Xr(){var e=ga.current;return e!==null?e:qe.pooledCache}function is(e,t){t===null?K(ga,ga.current):K(ga,t.pool)}function Xc(){var e=Xr();return e===null?null:{parent:We._currentValue,pool:e}}var Fl=Error(s(460)),Vc=Error(s(474)),ss=Error(s(542)),Vr={then:function(){}};function Kc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rs(){}function Zc(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(rs,rs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pc(e),e;default:if(typeof t.status=="string")t.then(rs,rs);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pc(e),e}throw Il=t,Fl}}var Il=null;function Jc(){if(Il===null)throw Error(s(459));var e=Il;return Il=null,e}function Pc(e){if(e===Fl||e===ss)throw Error(s(483))}var On=!1;function Kr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Cn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Re&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=Wi(e),kc(e,null,n),t}return Ii(e,a,t,n),Wi(e)}function Wl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,ta(e,n)}}function Jr(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?i=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?i=u=t:u=u.next=t}else i=u=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:u,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Pr=!1;function ei(){if(Pr){var e=Pa;if(e!==null)throw e}}function ti(e,t,n,a){Pr=!1;var i=e.updateQueue;On=!1;var u=i.firstBaseUpdate,h=i.lastBaseUpdate,v=i.shared.pending;if(v!==null){i.shared.pending=null;var b=v,A=b.next;b.next=null,h===null?u=A:h.next=A,h=b;var D=e.alternate;D!==null&&(D=D.updateQueue,v=D.lastBaseUpdate,v!==h&&(v===null?D.firstBaseUpdate=A:v.next=A,D.lastBaseUpdate=b))}if(u!==null){var k=i.baseState;h=0,D=A=b=null,v=u;do{var O=v.lane&-536870913,C=O!==v.lane;if(C?(Te&O)===O:(a&O)===O){O!==0&&O===Ja&&(Pr=!0),D!==null&&(D=D.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var fe=e,ue=v;O=t;var Ne=n;switch(ue.tag){case 1:if(fe=ue.payload,typeof fe=="function"){k=fe.call(Ne,k,O);break e}k=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ue.payload,O=typeof fe=="function"?fe.call(Ne,k,O):fe,O==null)break e;k=_({},k,O);break e;case 2:On=!0}}O=v.callback,O!==null&&(e.flags|=64,C&&(e.flags|=8192),C=i.callbacks,C===null?i.callbacks=[O]:C.push(O))}else C={lane:O,tag:v.tag,payload:v.payload,callback:v.callback,next:null},D===null?(A=D=C,b=k):D=D.next=C,h|=O;if(v=v.next,v===null){if(v=i.shared.pending,v===null)break;C=v,v=C.next,C.next=null,i.lastBaseUpdate=C,i.shared.pending=null}}while(!0);D===null&&(b=k),i.baseState=b,i.firstBaseUpdate=A,i.lastBaseUpdate=D,u===null&&(i.shared.lanes=0),qn|=h,e.lanes=h,e.memoizedState=k}}function Fc(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Ic(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Fc(n[e],t)}var Fa=L(null),us=L(0);function Wc(e,t){e=yn,K(us,e),K(Fa,t),yn=e|t.baseLanes}function Fr(){K(us,yn),K(Fa,Fa.current)}function Ir(){yn=us.current,I(Fa),I(us)}var Dn=0,ve=null,Ue=null,Pe=null,os=!1,Ia=!1,ma=!1,cs=0,ni=0,Wa=null,Nm=0;function Ke(){throw Error(s(321))}function Wr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function eu(e,t,n,a,i,u){return Dn=u,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=e===null||e.memoizedState===null?Bf:qf,ma=!1,u=n(a,i),ma=!1,Ia&&(u=tf(t,n,a,i)),ef(e),u}function ef(e){R.H=vs;var t=Ue!==null&&Ue.next!==null;if(Dn=0,Pe=Ue=ve=null,os=!1,ni=0,Wa=null,t)throw Error(s(300));e===null||at||(e=e.dependencies,e!==null&&as(e)&&(at=!0))}function tf(e,t,n,a){ve=e;var i=0;do{if(Ia&&(Wa=null),ni=0,Ia=!1,25<=i)throw Error(s(301));if(i+=1,Pe=Ue=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}R.H=Gm,u=t(n,a)}while(Ia);return u}function zm(){var e=R.H,t=e.useState()[0];return t=typeof t.then=="function"?ai(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(ve.flags|=1024),t}function tu(){var e=cs!==0;return cs=0,e}function nu(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function au(e){if(os){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}os=!1}Dn=0,Pe=Ue=ve=null,Ia=!1,ni=cs=0,Wa=null}function pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ve.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Fe(){if(Ue===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Pe===null?ve.memoizedState:Pe.next;if(t!==null)Pe=t,Ue=e;else{if(e===null)throw ve.alternate===null?Error(s(467)):Error(s(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Pe===null?ve.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ai(e){var t=ni;return ni+=1,Wa===null&&(Wa=[]),e=Zc(Wa,e,t),t=ve,(Pe===null?t.memoizedState:Pe.next)===null&&(t=t.alternate,R.H=t===null||t.memoizedState===null?Bf:qf),e}function fs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ai(e);if(e.$$typeof===z)return dt(e)}throw Error(s(438,String(e)))}function iu(e){var t=null,n=ve.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=ve.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=lu(),ve.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=Ve;return t.index++,n}function fn(e,t){return typeof t=="function"?t(e):t}function ds(e){var t=Fe();return su(t,Ue,e)}function su(e,t,n){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var i=e.baseQueue,u=a.pending;if(u!==null){if(i!==null){var h=i.next;i.next=u.next,u.next=h}t.baseQueue=i=u,a.pending=null}if(u=e.baseState,i===null)e.memoizedState=u;else{t=i.next;var v=h=null,b=null,A=t,D=!1;do{var k=A.lane&-536870913;if(k!==A.lane?(Te&k)===k:(Dn&k)===k){var O=A.revertLane;if(O===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),k===Ja&&(D=!0);else if((Dn&O)===O){A=A.next,O===Ja&&(D=!0);continue}else k={lane:0,revertLane:A.revertLane,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},b===null?(v=b=k,h=u):b=b.next=k,ve.lanes|=O,qn|=O;k=A.action,ma&&n(u,k),u=A.hasEagerState?A.eagerState:n(u,k)}else O={lane:k,revertLane:A.revertLane,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},b===null?(v=b=O,h=u):b=b.next=O,ve.lanes|=k,qn|=k;A=A.next}while(A!==null&&A!==t);if(b===null?h=u:b.next=v,!Et(u,e.memoizedState)&&(at=!0,D&&(n=Pa,n!==null)))throw n;e.memoizedState=u,e.baseState=h,e.baseQueue=b,a.lastRenderedState=u}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function ru(e){var t=Fe(),n=t.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,u=t.memoizedState;if(i!==null){n.pending=null;var h=i=i.next;do u=e(u,h.action),h=h.next;while(h!==i);Et(u,t.memoizedState)||(at=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,a]}function nf(e,t,n){var a=ve,i=Fe(),u=xe;if(u){if(n===void 0)throw Error(s(407));n=n()}else n=t();var h=!Et((Ue||i).memoizedState,n);h&&(i.memoizedState=n,at=!0),i=i.queue;var v=sf.bind(null,a,i,e);if(li(2048,8,v,[e]),i.getSnapshot!==t||h||Pe!==null&&Pe.memoizedState.tag&1){if(a.flags|=2048,el(9,hs(),lf.bind(null,a,i,n,t),null),qe===null)throw Error(s(349));u||(Dn&124)!==0||af(a,t,n)}return n}function af(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t=lu(),ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lf(e,t,n,a){t.value=n,t.getSnapshot=a,rf(t)&&uf(e)}function sf(e,t,n){return n(function(){rf(t)&&uf(e)})}function rf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function uf(e){var t=Xa(e,2);t!==null&&Ct(t,e,2)}function uu(e){var t=pt();if(typeof e=="function"){var n=e;if(e=n(),ma){Z(!0);try{n()}finally{Z(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:e},t}function of(e,t,n,a){return e.baseState=n,su(e,Ue,typeof a=="function"?a:fn)}function km(e,t,n,a,i){if(ms(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};R.T!==null?n(!0):u.isTransition=!1,a(u),n=t.pending,n===null?(u.next=t.pending=u,cf(t,u)):(u.next=n.next,t.pending=n.next=u)}}function cf(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var u=R.T,h={};R.T=h;try{var v=n(i,a),b=R.S;b!==null&&b(h,v),ff(e,t,v)}catch(A){ou(e,t,A)}finally{R.T=u}}else try{u=n(i,a),ff(e,t,u)}catch(A){ou(e,t,A)}}function ff(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){df(e,t,a)},function(a){return ou(e,t,a)}):df(e,t,n)}function df(e,t,n){t.status="fulfilled",t.value=n,hf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,cf(e,n)))}function ou(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,hf(t),t=t.next;while(t!==a)}e.action=null}function hf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gf(e,t){return t}function mf(e,t){if(xe){var n=qe.formState;if(n!==null){e:{var a=ve;if(xe){if(Qe){t:{for(var i=Qe,u=Ft;i.nodeType!==8;){if(!u){i=null;break t}if(i=Xt(i.nextSibling),i===null){i=null;break t}}u=i.data,i=u==="F!"||u==="F"?i:null}if(i){Qe=Xt(i.nextSibling),a=i.data==="F!";break e}}fa(a)}a=!1}a&&(t=n[0])}}return n=pt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:t},n.queue=a,n=Nf.bind(null,ve,a),a.dispatch=n,a=uu(!1),u=gu.bind(null,ve,!1,a.queue),a=pt(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=km.bind(null,ve,i,u,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function vf(e){var t=Fe();return yf(t,Ue,e)}function yf(e,t,n){if(t=su(e,t,gf)[0],e=ds(fn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=ai(t)}catch(h){throw h===Fl?ss:h}else a=t;t=Fe();var i=t.queue,u=i.dispatch;return n!==t.memoizedState&&(ve.flags|=2048,el(9,hs(),Bm.bind(null,i,n),null)),[a,u,e]}function Bm(e,t){e.action=t}function pf(e){var t=Fe(),n=Ue;if(n!==null)return yf(t,n,e);Fe(),t=t.memoizedState,n=Fe();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function el(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=ve.updateQueue,t===null&&(t=lu(),ve.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function hs(){return{destroy:void 0,resource:void 0}}function _f(){return Fe().memoizedState}function gs(e,t,n,a){var i=pt();a=a===void 0?null:a,ve.flags|=e,i.memoizedState=el(1|t,hs(),n,a)}function li(e,t,n,a){var i=Fe();a=a===void 0?null:a;var u=i.memoizedState.inst;Ue!==null&&a!==null&&Wr(a,Ue.memoizedState.deps)?i.memoizedState=el(t,u,n,a):(ve.flags|=e,i.memoizedState=el(1|t,u,n,a))}function bf(e,t){gs(8390656,8,e,t)}function wf(e,t){li(2048,8,e,t)}function Sf(e,t){return li(4,2,e,t)}function Ef(e,t){return li(4,4,e,t)}function Tf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jf(e,t,n){n=n!=null?n.concat([e]):null,li(4,4,Tf.bind(null,t,e),n)}function cu(){}function xf(e,t){var n=Fe();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Wr(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Af(e,t){var n=Fe();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Wr(t,a[1]))return a[0];if(a=e(),ma){Z(!0);try{e()}finally{Z(!1)}}return n.memoizedState=[a,t],a}function fu(e,t,n){return n===void 0||(Dn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Rd(),ve.lanes|=e,qn|=e,n)}function Of(e,t,n,a){return Et(n,t)?n:Fa.current!==null?(e=fu(e,n,a),Et(e,t)||(at=!0),e):(Dn&42)===0?(at=!0,e.memoizedState=n):(e=Rd(),ve.lanes|=e,qn|=e,t)}function Cf(e,t,n,a,i){var u=J.p;J.p=u!==0&&8>u?u:8;var h=R.T,v={};R.T=v,gu(e,!1,t,n);try{var b=i(),A=R.S;if(A!==null&&A(v,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var D=Mm(b,a);ii(e,t,D,Ot(e))}else ii(e,t,a,Ot(e))}catch(k){ii(e,t,{then:function(){},status:"rejected",reason:k},Ot())}finally{J.p=u,R.T=h}}function qm(){}function du(e,t,n,a){if(e.tag!==5)throw Error(s(476));var i=Rf(e).queue;Cf(e,i,t,se,n===null?qm:function(){return Df(e),n(a)})}function Rf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:se},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Df(e){var t=Rf(e).next.queue;ii(e,t,{},Ot())}function hu(){return dt(Ei)}function Uf(){return Fe().memoizedState}function Mf(){return Fe().memoizedState}function Lm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ot();e=Cn(n);var a=Rn(t,e,n);a!==null&&(Ct(a,t,n),Wl(a,t,n)),t={cache:Yr()},e.payload=t;return}t=t.return}}function Hm(e,t,n){var a=Ot();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ms(e)?zf(t,n):(n=Mr(e,t,n,a),n!==null&&(Ct(n,e,a),kf(n,t,a)))}function Nf(e,t,n){var a=Ot();ii(e,t,n,a)}function ii(e,t,n,a){var i={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ms(e))zf(t,i);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,v=u(h,n);if(i.hasEagerState=!0,i.eagerState=v,Et(v,h))return Ii(e,t,i,0),qe===null&&Fi(),!1}catch{}finally{}if(n=Mr(e,t,i,a),n!==null)return Ct(n,e,a),kf(n,t,a),!0}return!1}function gu(e,t,n,a){if(a={lane:2,revertLane:Vu(),action:a,hasEagerState:!1,eagerState:null,next:null},ms(e)){if(t)throw Error(s(479))}else t=Mr(e,n,a,2),t!==null&&Ct(t,e,2)}function ms(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function zf(e,t){Ia=os=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kf(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,ta(e,n)}}var vs={readContext:dt,use:fs,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke},Bf={readContext:dt,use:fs,useCallback:function(e,t){return pt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:bf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,gs(4194308,4,Tf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){gs(4,2,e,t)},useMemo:function(e,t){var n=pt();t=t===void 0?null:t;var a=e();if(ma){Z(!0);try{e()}finally{Z(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=pt();if(n!==void 0){var i=n(t);if(ma){Z(!0);try{n(t)}finally{Z(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=Hm.bind(null,ve,e),[a.memoizedState,e]},useRef:function(e){var t=pt();return e={current:e},t.memoizedState=e},useState:function(e){e=uu(e);var t=e.queue,n=Nf.bind(null,ve,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:cu,useDeferredValue:function(e,t){var n=pt();return fu(n,e,t)},useTransition:function(){var e=uu(!1);return e=Cf.bind(null,ve,e.queue,!0,!1),pt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=ve,i=pt();if(xe){if(n===void 0)throw Error(s(407));n=n()}else{if(n=t(),qe===null)throw Error(s(349));(Te&124)!==0||af(a,t,n)}i.memoizedState=n;var u={value:n,getSnapshot:t};return i.queue=u,bf(sf.bind(null,a,u,e),[e]),a.flags|=2048,el(9,hs(),lf.bind(null,a,u,n,t),null),n},useId:function(){var e=pt(),t=qe.identifierPrefix;if(xe){var n=un,a=rn;n=(a&~(1<<32-ae(a)-1)).toString(32)+n,t="«"+t+"R"+n,n=cs++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Nm++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:hu,useFormState:mf,useActionState:mf,useOptimistic:function(e){var t=pt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=gu.bind(null,ve,!0,n),n.dispatch=t,[e,t]},useMemoCache:iu,useCacheRefresh:function(){return pt().memoizedState=Lm.bind(null,ve)}},qf={readContext:dt,use:fs,useCallback:xf,useContext:dt,useEffect:wf,useImperativeHandle:jf,useInsertionEffect:Sf,useLayoutEffect:Ef,useMemo:Af,useReducer:ds,useRef:_f,useState:function(){return ds(fn)},useDebugValue:cu,useDeferredValue:function(e,t){var n=Fe();return Of(n,Ue.memoizedState,e,t)},useTransition:function(){var e=ds(fn)[0],t=Fe().memoizedState;return[typeof e=="boolean"?e:ai(e),t]},useSyncExternalStore:nf,useId:Uf,useHostTransitionStatus:hu,useFormState:vf,useActionState:vf,useOptimistic:function(e,t){var n=Fe();return of(n,Ue,e,t)},useMemoCache:iu,useCacheRefresh:Mf},Gm={readContext:dt,use:fs,useCallback:xf,useContext:dt,useEffect:wf,useImperativeHandle:jf,useInsertionEffect:Sf,useLayoutEffect:Ef,useMemo:Af,useReducer:ru,useRef:_f,useState:function(){return ru(fn)},useDebugValue:cu,useDeferredValue:function(e,t){var n=Fe();return Ue===null?fu(n,e,t):Of(n,Ue.memoizedState,e,t)},useTransition:function(){var e=ru(fn)[0],t=Fe().memoizedState;return[typeof e=="boolean"?e:ai(e),t]},useSyncExternalStore:nf,useId:Uf,useHostTransitionStatus:hu,useFormState:pf,useActionState:pf,useOptimistic:function(e,t){var n=Fe();return Ue!==null?of(n,Ue,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:iu,useCacheRefresh:Mf},tl=null,si=0;function ys(e){var t=si;return si+=1,tl===null&&(tl=[]),Zc(tl,e,t)}function ri(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ps(e,t){throw t.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Lf(e){var t=e._init;return t(e._payload)}function Hf(e){function t(E,S){if(e){var j=E.deletions;j===null?(E.deletions=[S],E.flags|=16):j.push(S)}}function n(E,S){if(!e)return null;for(;S!==null;)t(E,S),S=S.sibling;return null}function a(E){for(var S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(E,S){return E=sn(E,S),E.index=0,E.sibling=null,E}function u(E,S,j){return E.index=j,e?(j=E.alternate,j!==null?(j=j.index,j<S?(E.flags|=67108866,S):j):(E.flags|=67108866,S)):(E.flags|=1048576,S)}function h(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function v(E,S,j,M){return S===null||S.tag!==6?(S=zr(j,E.mode,M),S.return=E,S):(S=i(S,j),S.return=E,S)}function b(E,S,j,M){var ee=j.type;return ee===H?D(E,S,j.props.children,M,j.key):S!==null&&(S.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===W&&Lf(ee)===S.type)?(S=i(S,j.props),ri(S,j),S.return=E,S):(S=es(j.type,j.key,j.props,null,E.mode,M),ri(S,j),S.return=E,S)}function A(E,S,j,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==j.containerInfo||S.stateNode.implementation!==j.implementation?(S=kr(j,E.mode,M),S.return=E,S):(S=i(S,j.children||[]),S.return=E,S)}function D(E,S,j,M,ee){return S===null||S.tag!==7?(S=ra(j,E.mode,M,ee),S.return=E,S):(S=i(S,j),S.return=E,S)}function k(E,S,j){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=zr(""+S,E.mode,j),S.return=E,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case x:return j=es(S.type,S.key,S.props,null,E.mode,j),ri(j,S),j.return=E,j;case U:return S=kr(S,E.mode,j),S.return=E,S;case W:var M=S._init;return S=M(S._payload),k(E,S,j)}if(ut(S)||He(S))return S=ra(S,E.mode,j,null),S.return=E,S;if(typeof S.then=="function")return k(E,ys(S),j);if(S.$$typeof===z)return k(E,ls(E,S),j);ps(E,S)}return null}function O(E,S,j,M){var ee=S!==null?S.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ee!==null?null:v(E,S,""+j,M);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return j.key===ee?b(E,S,j,M):null;case U:return j.key===ee?A(E,S,j,M):null;case W:return ee=j._init,j=ee(j._payload),O(E,S,j,M)}if(ut(j)||He(j))return ee!==null?null:D(E,S,j,M,null);if(typeof j.then=="function")return O(E,S,ys(j),M);if(j.$$typeof===z)return O(E,S,ls(E,j),M);ps(E,j)}return null}function C(E,S,j,M,ee){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return E=E.get(j)||null,v(S,E,""+M,ee);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case x:return E=E.get(M.key===null?j:M.key)||null,b(S,E,M,ee);case U:return E=E.get(M.key===null?j:M.key)||null,A(S,E,M,ee);case W:var pe=M._init;return M=pe(M._payload),C(E,S,j,M,ee)}if(ut(M)||He(M))return E=E.get(j)||null,D(S,E,M,ee,null);if(typeof M.then=="function")return C(E,S,j,ys(M),ee);if(M.$$typeof===z)return C(E,S,j,ls(S,M),ee);ps(S,M)}return null}function fe(E,S,j,M){for(var ee=null,pe=null,le=S,oe=S=0,it=null;le!==null&&oe<j.length;oe++){le.index>oe?(it=le,le=null):it=le.sibling;var je=O(E,le,j[oe],M);if(je===null){le===null&&(le=it);break}e&&le&&je.alternate===null&&t(E,le),S=u(je,S,oe),pe===null?ee=je:pe.sibling=je,pe=je,le=it}if(oe===j.length)return n(E,le),xe&&oa(E,oe),ee;if(le===null){for(;oe<j.length;oe++)le=k(E,j[oe],M),le!==null&&(S=u(le,S,oe),pe===null?ee=le:pe.sibling=le,pe=le);return xe&&oa(E,oe),ee}for(le=a(le);oe<j.length;oe++)it=C(le,E,oe,j[oe],M),it!==null&&(e&&it.alternate!==null&&le.delete(it.key===null?oe:it.key),S=u(it,S,oe),pe===null?ee=it:pe.sibling=it,pe=it);return e&&le.forEach(function(Kn){return t(E,Kn)}),xe&&oa(E,oe),ee}function ue(E,S,j,M){if(j==null)throw Error(s(151));for(var ee=null,pe=null,le=S,oe=S=0,it=null,je=j.next();le!==null&&!je.done;oe++,je=j.next()){le.index>oe?(it=le,le=null):it=le.sibling;var Kn=O(E,le,je.value,M);if(Kn===null){le===null&&(le=it);break}e&&le&&Kn.alternate===null&&t(E,le),S=u(Kn,S,oe),pe===null?ee=Kn:pe.sibling=Kn,pe=Kn,le=it}if(je.done)return n(E,le),xe&&oa(E,oe),ee;if(le===null){for(;!je.done;oe++,je=j.next())je=k(E,je.value,M),je!==null&&(S=u(je,S,oe),pe===null?ee=je:pe.sibling=je,pe=je);return xe&&oa(E,oe),ee}for(le=a(le);!je.done;oe++,je=j.next())je=C(le,E,oe,je.value,M),je!==null&&(e&&je.alternate!==null&&le.delete(je.key===null?oe:je.key),S=u(je,S,oe),pe===null?ee=je:pe.sibling=je,pe=je);return e&&le.forEach(function($v){return t(E,$v)}),xe&&oa(E,oe),ee}function Ne(E,S,j,M){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case x:e:{for(var ee=j.key;S!==null;){if(S.key===ee){if(ee=j.type,ee===H){if(S.tag===7){n(E,S.sibling),M=i(S,j.props.children),M.return=E,E=M;break e}}else if(S.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===W&&Lf(ee)===S.type){n(E,S.sibling),M=i(S,j.props),ri(M,j),M.return=E,E=M;break e}n(E,S);break}else t(E,S);S=S.sibling}j.type===H?(M=ra(j.props.children,E.mode,M,j.key),M.return=E,E=M):(M=es(j.type,j.key,j.props,null,E.mode,M),ri(M,j),M.return=E,E=M)}return h(E);case U:e:{for(ee=j.key;S!==null;){if(S.key===ee)if(S.tag===4&&S.stateNode.containerInfo===j.containerInfo&&S.stateNode.implementation===j.implementation){n(E,S.sibling),M=i(S,j.children||[]),M.return=E,E=M;break e}else{n(E,S);break}else t(E,S);S=S.sibling}M=kr(j,E.mode,M),M.return=E,E=M}return h(E);case W:return ee=j._init,j=ee(j._payload),Ne(E,S,j,M)}if(ut(j))return fe(E,S,j,M);if(He(j)){if(ee=He(j),typeof ee!="function")throw Error(s(150));return j=ee.call(j),ue(E,S,j,M)}if(typeof j.then=="function")return Ne(E,S,ys(j),M);if(j.$$typeof===z)return Ne(E,S,ls(E,j),M);ps(E,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,S!==null&&S.tag===6?(n(E,S.sibling),M=i(S,j),M.return=E,E=M):(n(E,S),M=zr(j,E.mode,M),M.return=E,E=M),h(E)):n(E,S)}return function(E,S,j,M){try{si=0;var ee=Ne(E,S,j,M);return tl=null,ee}catch(le){if(le===Fl||le===ss)throw le;var pe=Tt(29,le,null,E.mode);return pe.lanes=M,pe.return=E,pe}finally{}}}var nl=Hf(!0),Gf=Hf(!1),Lt=L(null),It=null;function Un(e){var t=e.alternate;K(et,et.current&1),K(Lt,e),It===null&&(t===null||Fa.current!==null||t.memoizedState!==null)&&(It=e)}function $f(e){if(e.tag===22){if(K(et,et.current),K(Lt,e),It===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(It=e)}}else Mn()}function Mn(){K(et,et.current),K(Lt,Lt.current)}function dn(e){I(Lt),It===e&&(It=null),I(et)}var et=L(0);function _s(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||lo(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function mu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:_({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vu={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Ot(),i=Cn(a);i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,a),t!==null&&(Ct(t,e,a),Wl(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Ot(),i=Cn(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,a),t!==null&&(Ct(t,e,a),Wl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ot(),a=Cn(n);a.tag=2,t!=null&&(a.callback=t),t=Rn(e,a,n),t!==null&&(Ct(t,e,n),Wl(t,e,n))}};function Yf(e,t,n,a,i,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,u,h):t.prototype&&t.prototype.isPureReactComponent?!Yl(n,a)||!Yl(i,u):!0}function Qf(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&vu.enqueueReplaceState(t,t.state,null)}function va(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=_({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}var bs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Xf(e){bs(e)}function Vf(e){console.error(e)}function Kf(e){bs(e)}function ws(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Zf(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function yu(e,t,n){return n=Cn(n),n.tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function Jf(e){return e=Cn(e),e.tag=3,e}function Pf(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var u=a.value;e.payload=function(){return i(u)},e.callback=function(){Zf(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Zf(t,n,a),typeof i!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var v=a.stack;this.componentDidCatch(a.value,{componentStack:v!==null?v:""})})}function $m(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Zl(t,n,i,!0),n=Lt.current,n!==null){switch(n.tag){case 13:return It===null?Gu():n.alternate===null&&Xe===0&&(Xe=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Vr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Yu(e,a,i)),!1;case 22:return n.flags|=65536,a===Vr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Yu(e,a,i)),!1}throw Error(s(435,n.tag))}return Yu(e,a,i),Gu(),!1}if(xe)return t=Lt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Lr&&(e=Error(s(422),{cause:a}),Kl(zt(e,n)))):(a!==Lr&&(t=Error(s(423),{cause:a}),Kl(zt(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=zt(a,n),i=yu(e.stateNode,a,i),Jr(e,i),Xe!==4&&(Xe=2)),!1;var u=Error(s(520),{cause:a});if(u=zt(u,n),gi===null?gi=[u]:gi.push(u),Xe!==4&&(Xe=2),t===null)return!0;a=zt(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=yu(n.stateNode,a,e),Jr(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ln===null||!Ln.has(u))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Jf(i),Pf(i,e,n,a),Jr(n,i),!1}n=n.return}while(n!==null);return!1}var Ff=Error(s(461)),at=!1;function ot(e,t,n,a){t.child=e===null?Gf(t,null,n,a):nl(t,e.child,n,a)}function If(e,t,n,a,i){n=n.render;var u=t.ref;if("ref"in a){var h={};for(var v in a)v!=="ref"&&(h[v]=a[v])}else h=a;return ha(t),a=eu(e,t,n,h,u,i),v=tu(),e!==null&&!at?(nu(e,t,i),hn(e,t,i)):(xe&&v&&Br(t),t.flags|=1,ot(e,t,a,i),t.child)}function Wf(e,t,n,a,i){if(e===null){var u=n.type;return typeof u=="function"&&!Nr(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,ed(e,t,u,a,i)):(e=es(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!ju(e,i)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:Yl,n(h,a)&&e.ref===t.ref)return hn(e,t,i)}return t.flags|=1,e=sn(u,a),e.ref=t.ref,e.return=t,t.child=e}function ed(e,t,n,a,i){if(e!==null){var u=e.memoizedProps;if(Yl(u,a)&&e.ref===t.ref)if(at=!1,t.pendingProps=a=u,ju(e,i))(e.flags&131072)!==0&&(at=!0);else return t.lanes=e.lanes,hn(e,t,i)}return pu(e,t,n,a,i)}function td(e,t,n){var a=t.pendingProps,i=a.children,u=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=u!==null?u.baseLanes|n:n,e!==null){for(i=t.child=e.child,u=0;i!==null;)u=u|i.lanes|i.childLanes,i=i.sibling;t.childLanes=u&~a}else t.childLanes=0,t.child=null;return nd(e,t,a,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&is(t,u!==null?u.cachePool:null),u!==null?Wc(t,u):Fr(),$f(t);else return t.lanes=t.childLanes=536870912,nd(e,t,u!==null?u.baseLanes|n:n,n)}else u!==null?(is(t,u.cachePool),Wc(t,u),Mn(),t.memoizedState=null):(e!==null&&is(t,null),Fr(),Mn());return ot(e,t,i,n),t.child}function nd(e,t,n,a){var i=Xr();return i=i===null?null:{parent:We._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&is(t,null),Fr(),$f(t),e!==null&&Zl(e,t,a,!0),null}function Ss(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(s(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function pu(e,t,n,a,i){return ha(t),n=eu(e,t,n,a,void 0,i),a=tu(),e!==null&&!at?(nu(e,t,i),hn(e,t,i)):(xe&&a&&Br(t),t.flags|=1,ot(e,t,n,i),t.child)}function ad(e,t,n,a,i,u){return ha(t),t.updateQueue=null,n=tf(t,a,n,i),ef(e),a=tu(),e!==null&&!at?(nu(e,t,u),hn(e,t,u)):(xe&&a&&Br(t),t.flags|=1,ot(e,t,n,u),t.child)}function ld(e,t,n,a,i){if(ha(t),t.stateNode===null){var u=Va,h=n.contextType;typeof h=="object"&&h!==null&&(u=dt(h)),u=new n(a,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=vu,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=a,u.state=t.memoizedState,u.refs={},Kr(t),h=n.contextType,u.context=typeof h=="object"&&h!==null?dt(h):Va,u.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(mu(t,n,h,a),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&vu.enqueueReplaceState(u,u.state,null),ti(t,a,u,i),ei(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){u=t.stateNode;var v=t.memoizedProps,b=va(n,v);u.props=b;var A=u.context,D=n.contextType;h=Va,typeof D=="object"&&D!==null&&(h=dt(D));var k=n.getDerivedStateFromProps;D=typeof k=="function"||typeof u.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,D||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(v||A!==h)&&Qf(t,u,a,h),On=!1;var O=t.memoizedState;u.state=O,ti(t,a,u,i),ei(),A=t.memoizedState,v||O!==A||On?(typeof k=="function"&&(mu(t,n,k,a),A=t.memoizedState),(b=On||Yf(t,n,b,a,O,A,h))?(D||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=A),u.props=a,u.state=A,u.context=h,a=b):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{u=t.stateNode,Zr(e,t),h=t.memoizedProps,D=va(n,h),u.props=D,k=t.pendingProps,O=u.context,A=n.contextType,b=Va,typeof A=="object"&&A!==null&&(b=dt(A)),v=n.getDerivedStateFromProps,(A=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==k||O!==b)&&Qf(t,u,a,b),On=!1,O=t.memoizedState,u.state=O,ti(t,a,u,i),ei();var C=t.memoizedState;h!==k||O!==C||On||e!==null&&e.dependencies!==null&&as(e.dependencies)?(typeof v=="function"&&(mu(t,n,v,a),C=t.memoizedState),(D=On||Yf(t,n,D,a,O,C,b)||e!==null&&e.dependencies!==null&&as(e.dependencies))?(A||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(a,C,b),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(a,C,b)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=C),u.props=a,u.state=C,u.context=b,a=D):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),a=!1)}return u=a,Ss(e,t),a=(t.flags&128)!==0,u||a?(u=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&a?(t.child=nl(t,e.child,null,i),t.child=nl(t,null,n,i)):ot(e,t,n,i),t.memoizedState=u.state,e=t.child):e=hn(e,t,i),e}function id(e,t,n,a){return Vl(),t.flags|=256,ot(e,t,n,a),t.child}var _u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bu(e){return{baseLanes:e,cachePool:Xc()}}function wu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ht),e}function sd(e,t,n){var a=t.pendingProps,i=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(et.current&2)!==0),h&&(i=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(xe){if(i?Un(t):Mn(),xe){var v=Qe,b;if(b=v){e:{for(b=v,v=Ft;b.nodeType!==8;){if(!v){v=null;break e}if(b=Xt(b.nextSibling),b===null){v=null;break e}}v=b}v!==null?(t.memoizedState={dehydrated:v,treeContext:ua!==null?{id:rn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},b=Tt(18,null,null,0),b.stateNode=v,b.return=t,t.child=b,vt=t,Qe=null,b=!0):b=!1}b||fa(t)}if(v=t.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return lo(v)?t.lanes=32:t.lanes=536870912,null;dn(t)}return v=a.children,a=a.fallback,i?(Mn(),i=t.mode,v=Es({mode:"hidden",children:v},i),a=ra(a,i,n,null),v.return=t,a.return=t,v.sibling=a,t.child=v,i=t.child,i.memoizedState=bu(n),i.childLanes=wu(e,h,n),t.memoizedState=_u,a):(Un(t),Su(t,v))}if(b=e.memoizedState,b!==null&&(v=b.dehydrated,v!==null)){if(u)t.flags&256?(Un(t),t.flags&=-257,t=Eu(e,t,n)):t.memoizedState!==null?(Mn(),t.child=e.child,t.flags|=128,t=null):(Mn(),i=a.fallback,v=t.mode,a=Es({mode:"visible",children:a.children},v),i=ra(i,v,n,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,nl(t,e.child,null,n),a=t.child,a.memoizedState=bu(n),a.childLanes=wu(e,h,n),t.memoizedState=_u,t=i);else if(Un(t),lo(v)){if(h=v.nextSibling&&v.nextSibling.dataset,h)var A=h.dgst;h=A,a=Error(s(419)),a.stack="",a.digest=h,Kl({value:a,source:null,stack:null}),t=Eu(e,t,n)}else if(at||Zl(e,t,n,!1),h=(n&e.childLanes)!==0,at||h){if(h=qe,h!==null&&(a=n&-n,a=(a&42)!==0?1:Sn(a),a=(a&(h.suspendedLanes|n))!==0?0:a,a!==0&&a!==b.retryLane))throw b.retryLane=a,Xa(e,a),Ct(h,e,a),Ff;v.data==="$?"||Gu(),t=Eu(e,t,n)}else v.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,Qe=Xt(v.nextSibling),vt=t,xe=!0,ca=null,Ft=!1,e!==null&&(Bt[qt++]=rn,Bt[qt++]=un,Bt[qt++]=ua,rn=e.id,un=e.overflow,ua=t),t=Su(t,a.children),t.flags|=4096);return t}return i?(Mn(),i=a.fallback,v=t.mode,b=e.child,A=b.sibling,a=sn(b,{mode:"hidden",children:a.children}),a.subtreeFlags=b.subtreeFlags&65011712,A!==null?i=sn(A,i):(i=ra(i,v,n,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,v=e.child.memoizedState,v===null?v=bu(n):(b=v.cachePool,b!==null?(A=We._currentValue,b=b.parent!==A?{parent:A,pool:A}:b):b=Xc(),v={baseLanes:v.baseLanes|n,cachePool:b}),i.memoizedState=v,i.childLanes=wu(e,h,n),t.memoizedState=_u,a):(Un(t),n=e.child,e=n.sibling,n=sn(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Su(e,t){return t=Es({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Es(e,t){return e=Tt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Eu(e,t,n){return nl(t,e.child,null,n),e=Su(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rd(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Gr(e.return,t,n)}function Tu(e,t,n,a,i){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=a,u.tail=n,u.tailMode=i)}function ud(e,t,n){var a=t.pendingProps,i=a.revealOrder,u=a.tail;if(ot(e,t,a.children,n),a=et.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rd(e,n,t);else if(e.tag===19)rd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(K(et,a),i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&_s(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tu(t,!1,i,n,u);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&_s(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tu(t,!0,n,null,u);break;case"together":Tu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Zl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,n=sn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ju(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&as(e)))}function Ym(e,t,n){switch(t.tag){case 3:Be(t,t.stateNode.containerInfo),An(t,We,e.memoizedState.cache),Vl();break;case 27:case 5:Dl(t);break;case 4:Be(t,t.stateNode.containerInfo);break;case 10:An(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Un(t),t.flags|=128,null):(n&t.child.childLanes)!==0?sd(e,t,n):(Un(t),e=hn(e,t,n),e!==null?e.sibling:null);Un(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Zl(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return ud(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(et,et.current),a)break;return null;case 22:case 23:return t.lanes=0,td(e,t,n);case 24:An(t,We,e.memoizedState.cache)}return hn(e,t,n)}function od(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)at=!0;else{if(!ju(e,n)&&(t.flags&128)===0)return at=!1,Ym(e,t,n);at=(e.flags&131072)!==0}else at=!1,xe&&(t.flags&1048576)!==0&&qc(t,ns,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,i=a._init;if(a=i(a._payload),t.type=a,typeof a=="function")Nr(a)?(e=va(a,e),t.tag=1,t=ld(null,t,a,e,n)):(t.tag=0,t=pu(null,t,a,e,n));else{if(a!=null){if(i=a.$$typeof,i===V){t.tag=11,t=If(null,t,a,e,n);break e}else if(i===Y){t.tag=14,t=Wf(null,t,a,e,n);break e}}throw t=St(a)||a,Error(s(306,t,""))}}return t;case 0:return pu(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=va(a,t.pendingProps),ld(e,t,a,i,n);case 3:e:{if(Be(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var u=t.memoizedState;i=u.element,Zr(e,t),ti(t,a,null,n);var h=t.memoizedState;if(a=h.cache,An(t,We,a),a!==u.cache&&$r(t,[We],n,!0),ei(),a=h.element,u.isDehydrated)if(u={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=id(e,t,a,n);break e}else if(a!==i){i=zt(Error(s(424)),t),Kl(i),t=id(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qe=Xt(e.firstChild),vt=t,xe=!0,ca=null,Ft=!0,n=Gf(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Vl(),a===i){t=hn(e,t,n);break e}ot(e,t,a,n)}t=t.child}return t;case 26:return Ss(e,t),e===null?(n=hh(t.type,null,t.pendingProps,null))?t.memoizedState=n:xe||(n=t.type,e=t.pendingProps,a=Bs(ce.current).createElement(n),a[tt]=t,a[Ie]=e,ft(a,n,e),nt(a),t.stateNode=a):t.memoizedState=hh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Dl(t),e===null&&xe&&(a=t.stateNode=ch(t.type,t.pendingProps,ce.current),vt=t,Ft=!0,i=Qe,$n(t.type)?(io=i,Qe=Xt(a.firstChild)):Qe=i),ot(e,t,t.pendingProps.children,n),Ss(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xe&&((i=a=Qe)&&(a=yv(a,t.type,t.pendingProps,Ft),a!==null?(t.stateNode=a,vt=t,Qe=Xt(a.firstChild),Ft=!1,i=!0):i=!1),i||fa(t)),Dl(t),i=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,a=u.children,to(i,u)?a=null:h!==null&&to(i,h)&&(t.flags|=32),t.memoizedState!==null&&(i=eu(e,t,zm,null,null,n),Ei._currentValue=i),Ss(e,t),ot(e,t,a,n),t.child;case 6:return e===null&&xe&&((e=n=Qe)&&(n=pv(n,t.pendingProps,Ft),n!==null?(t.stateNode=n,vt=t,Qe=null,e=!0):e=!1),e||fa(t)),null;case 13:return sd(e,t,n);case 4:return Be(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=nl(t,null,a,n):ot(e,t,a,n),t.child;case 11:return If(e,t,t.type,t.pendingProps,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,An(t,t.type,a.value),ot(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,ha(t),i=dt(i),a=a(i),t.flags|=1,ot(e,t,a,n),t.child;case 14:return Wf(e,t,t.type,t.pendingProps,n);case 15:return ed(e,t,t.type,t.pendingProps,n);case 19:return ud(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},e===null?(n=Es(a,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=sn(e.child,a),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return td(e,t,n);case 24:return ha(t),a=dt(We),e===null?(i=Xr(),i===null&&(i=qe,u=Yr(),i.pooledCache=u,u.refCount++,u!==null&&(i.pooledCacheLanes|=n),i=u),t.memoizedState={parent:a,cache:i},Kr(t),An(t,We,i)):((e.lanes&n)!==0&&(Zr(e,t),ti(t,null,null,n),ei()),i=e.memoizedState,u=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),An(t,We,a)):(a=u.cache,An(t,We,a),a!==i.cache&&$r(t,[We],n,!0))),ot(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function gn(e){e.flags|=4}function cd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ph(t)){if(t=Lt.current,t!==null&&((Te&4194048)===Te?It!==null:(Te&62914560)!==Te&&(Te&536870912)===0||t!==It))throw Il=Vr,Vc;e.flags|=8192}}function Ts(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Jt():536870912,e.lanes|=t,sl|=t)}function ui(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Qm(e,t,n){var a=t.pendingProps;switch(qr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),cn(We),Zt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xl(t)?gn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gc())),Ye(t),null;case 26:return n=t.memoizedState,e===null?(gn(t),n!==null?(Ye(t),cd(t,n)):(Ye(t),t.flags&=-16777217)):n?n!==e.memoizedState?(gn(t),Ye(t),cd(t,n)):(Ye(t),t.flags&=-16777217):(e.memoizedProps!==a&&gn(t),Ye(t),t.flags&=-16777217),null;case 27:xa(t),n=ce.current;var i=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&gn(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}e=ie.current,Xl(t)?Lc(t):(e=ch(i,a,n),t.stateNode=e,gn(t))}return Ye(t),null;case 5:if(xa(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&gn(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return Ye(t),null}if(e=ie.current,Xl(t))Lc(t);else{switch(i=Bs(ce.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?i.createElement(n,{is:a.is}):i.createElement(n)}}e[tt]=t,e[Ie]=a;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ft(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&gn(t)}}return Ye(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&gn(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=ce.current,Xl(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=vt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[tt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||ah(e.nodeValue,n)),e||fa(t)}else e=Bs(e).createTextNode(a),e[tt]=t,t.stateNode=e}return Ye(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Xl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(s(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));i[tt]=t}else Vl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else i=Gc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(dn(t),t):(dn(t),null)}if(dn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=a!==null,e=e!==null&&e.memoizedState!==null,n){a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool);var u=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==i&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ts(t,t.updateQueue),Ye(t),null;case 4:return Zt(),e===null&&Pu(t.stateNode.containerInfo),Ye(t),null;case 10:return cn(t.type),Ye(t),null;case 19:if(I(et),i=t.memoizedState,i===null)return Ye(t),null;if(a=(t.flags&128)!==0,u=i.rendering,u===null)if(a)ui(i,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=_s(e),u!==null){for(t.flags|=128,ui(i,!1),e=u.updateQueue,t.updateQueue=e,Ts(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Bc(n,e),n=n.sibling;return K(et,et.current&1|2),t.child}e=e.sibling}i.tail!==null&&Dt()>As&&(t.flags|=128,a=!0,ui(i,!1),t.lanes=4194304)}else{if(!a)if(e=_s(u),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Ts(t,e),ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!xe)return Ye(t),null}else 2*Dt()-i.renderingStartTime>As&&n!==536870912&&(t.flags|=128,a=!0,ui(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Dt(),t.sibling=null,e=et.current,K(et,a?e&1|2:e&1),t):(Ye(t),null);case 22:case 23:return dn(t),Ir(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),n=t.updateQueue,n!==null&&Ts(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&I(ga),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),cn(We),Ye(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function Xm(e,t){switch(qr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return cn(We),Zt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xa(t),null;case 13:if(dn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Vl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(et),null;case 4:return Zt(),null;case 10:return cn(t.type),null;case 22:case 23:return dn(t),Ir(),e!==null&&I(ga),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return cn(We),null;case 25:return null;default:return null}}function fd(e,t){switch(qr(t),t.tag){case 3:cn(We),Zt();break;case 26:case 27:case 5:xa(t);break;case 4:Zt();break;case 13:dn(t);break;case 19:I(et);break;case 10:cn(t.type);break;case 22:case 23:dn(t),Ir(),e!==null&&I(ga);break;case 24:cn(We)}}function oi(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var u=n.create,h=n.inst;a=u(),h.destroy=a}n=n.next}while(n!==i)}}catch(v){ze(t,t.return,v)}}function Nn(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var u=i.next;a=u;do{if((a.tag&e)===e){var h=a.inst,v=h.destroy;if(v!==void 0){h.destroy=void 0,i=t;var b=n,A=v;try{A()}catch(D){ze(i,b,D)}}}a=a.next}while(a!==u)}}catch(D){ze(t,t.return,D)}}function dd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ic(t,n)}catch(a){ze(e,e.return,a)}}}function hd(e,t,n){n.props=va(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){ze(e,t,a)}}function ci(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){ze(e,t,i)}}function Wt(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){ze(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){ze(e,t,i)}else n.current=null}function gd(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){ze(e,e.return,i)}}function xu(e,t,n){try{var a=e.stateNode;dv(a,e.type,n,t),a[Ie]=t}catch(i){ze(e,e.return,i)}}function md(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$n(e.type)||e.tag===4}function Au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||md(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$n(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ou(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ks));else if(a!==4&&(a===27&&$n(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ou(e,t,n),e=e.sibling;e!==null;)Ou(e,t,n),e=e.sibling}function js(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&$n(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(js(e,t,n),e=e.sibling;e!==null;)js(e,t,n),e=e.sibling}function vd(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ft(t,a,n),t[tt]=e,t[Ie]=n}catch(u){ze(e,e.return,u)}}var mn=!1,Ze=!1,Cu=!1,yd=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Vm(e,t){if(e=e.containerInfo,Wu=Ys,e=Ac(e),Ar(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,v=-1,b=-1,A=0,D=0,k=e,O=null;t:for(;;){for(var C;k!==n||i!==0&&k.nodeType!==3||(v=h+i),k!==u||a!==0&&k.nodeType!==3||(b=h+a),k.nodeType===3&&(h+=k.nodeValue.length),(C=k.firstChild)!==null;)O=k,k=C;for(;;){if(k===e)break t;if(O===n&&++A===i&&(v=h),O===u&&++D===a&&(b=h),(C=k.nextSibling)!==null)break;k=O,O=k.parentNode}k=C}n=v===-1||b===-1?null:{start:v,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(eo={focusedElem:e,selectionRange:n},Ys=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){switch(t=lt,u=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,i=u.memoizedProps,u=u.memoizedState,a=n.stateNode;try{var fe=va(n.type,i,n.elementType===n.type);e=a.getSnapshotBeforeUpdate(fe,u),a.__reactInternalSnapshotBeforeUpdate=e}catch(ue){ze(n,n.return,ue)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ao(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ao(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}}function pd(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:zn(e,n),a&4&&oi(5,n);break;case 1:if(zn(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){ze(n,n.return,h)}else{var i=va(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){ze(n,n.return,h)}}a&64&&dd(n),a&512&&ci(n,n.return);break;case 3:if(zn(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ic(e,t)}catch(h){ze(n,n.return,h)}}break;case 27:t===null&&a&4&&vd(n);case 26:case 5:zn(e,n),t===null&&a&4&&gd(n),a&512&&ci(n,n.return);break;case 12:zn(e,n);break;case 13:zn(e,n),a&4&&wd(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=tv.bind(null,n),_v(e,n))));break;case 22:if(a=n.memoizedState!==null||mn,!a){t=t!==null&&t.memoizedState!==null||Ze,i=mn;var u=Ze;mn=a,(Ze=t)&&!u?kn(e,n,(n.subtreeFlags&8772)!==0):zn(e,n),mn=i,Ze=u}break;case 30:break;default:zn(e,n)}}function _d(e){var t=e.alternate;t!==null&&(e.alternate=null,_d(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ur(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var $e=null,_t=!1;function vn(e,t,n){for(n=n.child;n!==null;)bd(e,t,n),n=n.sibling}function bd(e,t,n){if(P&&typeof P.onCommitFiberUnmount=="function")try{P.onCommitFiberUnmount(G,n)}catch{}switch(n.tag){case 26:Ze||Wt(n,t),vn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ze||Wt(n,t);var a=$e,i=_t;$n(n.type)&&($e=n.stateNode,_t=!1),vn(e,t,n),_i(n.stateNode),$e=a,_t=i;break;case 5:Ze||Wt(n,t);case 6:if(a=$e,i=_t,$e=null,vn(e,t,n),$e=a,_t=i,$e!==null)if(_t)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(n.stateNode)}catch(u){ze(n,t,u)}else try{$e.removeChild(n.stateNode)}catch(u){ze(n,t,u)}break;case 18:$e!==null&&(_t?(e=$e,uh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ai(e)):uh($e,n.stateNode));break;case 4:a=$e,i=_t,$e=n.stateNode.containerInfo,_t=!0,vn(e,t,n),$e=a,_t=i;break;case 0:case 11:case 14:case 15:Ze||Nn(2,n,t),Ze||Nn(4,n,t),vn(e,t,n);break;case 1:Ze||(Wt(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&hd(n,t,a)),vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:Ze=(a=Ze)||n.memoizedState!==null,vn(e,t,n),Ze=a;break;default:vn(e,t,n)}}function wd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ai(e)}catch(n){ze(t,t.return,n)}}function Km(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new yd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new yd),t;default:throw Error(s(435,e.tag))}}function Ru(e,t){var n=Km(e);t.forEach(function(a){var i=nv.bind(null,e,a);n.has(a)||(n.add(a),a.then(i,i))})}function jt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],u=e,h=t,v=h;e:for(;v!==null;){switch(v.tag){case 27:if($n(v.type)){$e=v.stateNode,_t=!1;break e}break;case 5:$e=v.stateNode,_t=!1;break e;case 3:case 4:$e=v.stateNode.containerInfo,_t=!0;break e}v=v.return}if($e===null)throw Error(s(160));bd(u,h,i),$e=null,_t=!1,u=i.alternate,u!==null&&(u.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Sd(t,e),t=t.sibling}var Qt=null;function Sd(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jt(t,e),xt(e),a&4&&(Nn(3,e,e.return),oi(3,e),Nn(5,e,e.return));break;case 1:jt(t,e),xt(e),a&512&&(Ze||n===null||Wt(n,n.return)),a&64&&mn&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Qt;if(jt(t,e),xt(e),a&512&&(Ze||n===null||Wt(n,n.return)),a&4){var u=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":u=i.getElementsByTagName("title")[0],(!u||u[Nl]||u[tt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=i.createElement(a),i.head.insertBefore(u,i.querySelector("head > title"))),ft(u,a,n),u[tt]=e,nt(u),a=u;break e;case"link":var h=vh("link","href",i).get(a+(n.href||""));if(h){for(var v=0;v<h.length;v++)if(u=h[v],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(v,1);break t}}u=i.createElement(a),ft(u,a,n),i.head.appendChild(u);break;case"meta":if(h=vh("meta","content",i).get(a+(n.content||""))){for(v=0;v<h.length;v++)if(u=h[v],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(v,1);break t}}u=i.createElement(a),ft(u,a,n),i.head.appendChild(u);break;default:throw Error(s(468,a))}u[tt]=e,nt(u),a=u}e.stateNode=a}else yh(i,e.type,e.stateNode);else e.stateNode=mh(i,a,e.memoizedProps);else u!==a?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,a===null?yh(i,e.type,e.stateNode):mh(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&xu(e,e.memoizedProps,n.memoizedProps)}break;case 27:jt(t,e),xt(e),a&512&&(Ze||n===null||Wt(n,n.return)),n!==null&&a&4&&xu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jt(t,e),xt(e),a&512&&(Ze||n===null||Wt(n,n.return)),e.flags&32){i=e.stateNode;try{qa(i,"")}catch(C){ze(e,e.return,C)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,xu(e,i,n!==null?n.memoizedProps:i)),a&1024&&(Cu=!0);break;case 6:if(jt(t,e),xt(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(C){ze(e,e.return,C)}}break;case 3:if(Hs=null,i=Qt,Qt=qs(t.containerInfo),jt(t,e),Qt=i,xt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Ai(t.containerInfo)}catch(C){ze(e,e.return,C)}Cu&&(Cu=!1,Ed(e));break;case 4:a=Qt,Qt=qs(e.stateNode.containerInfo),jt(t,e),xt(e),Qt=a;break;case 12:jt(t,e),xt(e);break;case 13:jt(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ku=Dt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ru(e,a)));break;case 22:i=e.memoizedState!==null;var b=n!==null&&n.memoizedState!==null,A=mn,D=Ze;if(mn=A||i,Ze=D||b,jt(t,e),Ze=D,mn=A,xt(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||b||mn||Ze||ya(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){b=n=t;try{if(u=b.stateNode,i)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{v=b.stateNode;var k=b.memoizedProps.style,O=k!=null&&k.hasOwnProperty("display")?k.display:null;v.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(C){ze(b,b.return,C)}}}else if(t.tag===6){if(n===null){b=t;try{b.stateNode.nodeValue=i?"":b.memoizedProps}catch(C){ze(b,b.return,C)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Ru(e,n))));break;case 19:jt(t,e),xt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Ru(e,a)));break;case 30:break;case 21:break;default:jt(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(md(a)){n=a;break}a=a.return}if(n==null)throw Error(s(160));switch(n.tag){case 27:var i=n.stateNode,u=Au(e);js(e,u,i);break;case 5:var h=n.stateNode;n.flags&32&&(qa(h,""),n.flags&=-33);var v=Au(e);js(e,v,h);break;case 3:case 4:var b=n.stateNode.containerInfo,A=Au(e);Ou(e,A,b);break;default:throw Error(s(161))}}catch(D){ze(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ed(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ed(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)pd(e,t.alternate,t),t=t.sibling}function ya(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Nn(4,t,t.return),ya(t);break;case 1:Wt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&hd(t,t.return,n),ya(t);break;case 27:_i(t.stateNode);case 26:case 5:Wt(t,t.return),ya(t);break;case 22:t.memoizedState===null&&ya(t);break;case 30:ya(t);break;default:ya(t)}e=e.sibling}}function kn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:kn(i,u,n),oi(4,u);break;case 1:if(kn(i,u,n),a=u,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(A){ze(a,a.return,A)}if(a=u,i=a.updateQueue,i!==null){var v=a.stateNode;try{var b=i.shared.hiddenCallbacks;if(b!==null)for(i.shared.hiddenCallbacks=null,i=0;i<b.length;i++)Fc(b[i],v)}catch(A){ze(a,a.return,A)}}n&&h&64&&dd(u),ci(u,u.return);break;case 27:vd(u);case 26:case 5:kn(i,u,n),n&&a===null&&h&4&&gd(u),ci(u,u.return);break;case 12:kn(i,u,n);break;case 13:kn(i,u,n),n&&h&4&&wd(i,u);break;case 22:u.memoizedState===null&&kn(i,u,n),ci(u,u.return);break;case 30:break;default:kn(i,u,n)}t=t.sibling}}function Du(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Jl(n))}function Uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Jl(e))}function en(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Td(e,t,n,a),t=t.sibling}function Td(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:en(e,t,n,a),i&2048&&oi(9,t);break;case 1:en(e,t,n,a);break;case 3:en(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Jl(e)));break;case 12:if(i&2048){en(e,t,n,a),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,v=u.onPostCommit;typeof v=="function"&&v(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){ze(t,t.return,b)}}else en(e,t,n,a);break;case 13:en(e,t,n,a);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?en(e,t,n,a):fi(e,t):u._visibility&2?en(e,t,n,a):(u._visibility|=2,al(e,t,n,a,(t.subtreeFlags&10256)!==0)),i&2048&&Du(h,t);break;case 24:en(e,t,n,a),i&2048&&Uu(t.alternate,t);break;default:en(e,t,n,a)}}function al(e,t,n,a,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var u=e,h=t,v=n,b=a,A=h.flags;switch(h.tag){case 0:case 11:case 15:al(u,h,v,b,i),oi(8,h);break;case 23:break;case 22:var D=h.stateNode;h.memoizedState!==null?D._visibility&2?al(u,h,v,b,i):fi(u,h):(D._visibility|=2,al(u,h,v,b,i)),i&&A&2048&&Du(h.alternate,h);break;case 24:al(u,h,v,b,i),i&&A&2048&&Uu(h.alternate,h);break;default:al(u,h,v,b,i)}t=t.sibling}}function fi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:fi(n,a),i&2048&&Du(a.alternate,a);break;case 24:fi(n,a),i&2048&&Uu(a.alternate,a);break;default:fi(n,a)}t=t.sibling}}var di=8192;function ll(e){if(e.subtreeFlags&di)for(e=e.child;e!==null;)jd(e),e=e.sibling}function jd(e){switch(e.tag){case 26:ll(e),e.flags&di&&e.memoizedState!==null&&Uv(Qt,e.memoizedState,e.memoizedProps);break;case 5:ll(e);break;case 3:case 4:var t=Qt;Qt=qs(e.stateNode.containerInfo),ll(e),Qt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=di,di=16777216,ll(e),di=t):ll(e));break;default:ll(e)}}function xd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function hi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];lt=a,Od(a,e)}xd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ad(e),e=e.sibling}function Ad(e){switch(e.tag){case 0:case 11:case 15:hi(e),e.flags&2048&&Nn(9,e,e.return);break;case 3:hi(e);break;case 12:hi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xs(e)):hi(e);break;default:hi(e)}}function xs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];lt=a,Od(a,e)}xd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Nn(8,t,t.return),xs(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,xs(t));break;default:xs(t)}e=e.sibling}}function Od(e,t){for(;lt!==null;){var n=lt;switch(n.tag){case 0:case 11:case 15:Nn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Jl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,lt=a;else e:for(n=e;lt!==null;){a=lt;var i=a.sibling,u=a.return;if(_d(a),a===n){lt=null;break e}if(i!==null){i.return=u,lt=i;break e}lt=u}}}var Zm={getCacheForType:function(e){var t=dt(We),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Jm=typeof WeakMap=="function"?WeakMap:Map,Re=0,qe=null,_e=null,Te=0,De=0,At=null,Bn=!1,il=!1,Mu=!1,yn=0,Xe=0,qn=0,pa=0,Nu=0,Ht=0,sl=0,gi=null,bt=null,zu=!1,ku=0,As=1/0,Os=null,Ln=null,ct=0,Hn=null,rl=null,ul=0,Bu=0,qu=null,Cd=null,mi=0,Lu=null;function Ot(){if((Re&2)!==0&&Te!==0)return Te&-Te;if(R.T!==null){var e=Ja;return e!==0?e:Vu()}return na()}function Rd(){Ht===0&&(Ht=(Te&536870912)===0||xe?Ge():536870912);var e=Lt.current;return e!==null&&(e.flags|=32),Ht}function Ct(e,t,n){(e===qe&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(ol(e,0),Gn(e,Te,Ht,!1)),$t(e,n),((Re&2)===0||e!==qe)&&(e===qe&&((Re&2)===0&&(pa|=n),Xe===4&&Gn(e,Te,Ht,!1)),tn(e))}function Dd(e,t,n){if((Re&6)!==0)throw Error(s(327));var a=!n&&(t&124)===0&&(t&e.expiredLanes)===0||ne(e,t),i=a?Im(e,t):$u(e,t,!0),u=a;do{if(i===0){il&&!a&&Gn(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!Pm(n)){i=$u(e,t,!1),u=!1;continue}if(i===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var v=e;i=gi;var b=v.current.memoizedState.isDehydrated;if(b&&(ol(v,h).flags|=256),h=$u(v,h,!1),h!==2){if(Mu&&!b){v.errorRecoveryDisabledLanes|=u,pa|=u,i=4;break e}u=bt,bt=i,u!==null&&(bt===null?bt=u:bt.push.apply(bt,u))}i=h}if(u=!1,i!==2)continue}}if(i===1){ol(e,0),Gn(e,t,0,!0);break}e:{switch(a=e,u=i,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Gn(a,t,Ht,!Bn);break e;case 2:bt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(i=ku+300-Dt(),10<i)){if(Gn(a,t,Ht,!Bn),Oe(a,0,!0)!==0)break e;a.timeoutHandle=sh(Ud.bind(null,a,n,bt,Os,zu,t,Ht,pa,sl,Bn,u,2,-0,0),i);break e}Ud(a,n,bt,Os,zu,t,Ht,pa,sl,Bn,u,0,-0,0)}}break}while(!0);tn(e)}function Ud(e,t,n,a,i,u,h,v,b,A,D,k,O,C){if(e.timeoutHandle=-1,k=t.subtreeFlags,(k&8192||(k&16785408)===16785408)&&(Si={stylesheets:null,count:0,unsuspend:Dv},jd(t),k=Mv(),k!==null)){e.cancelPendingCommit=k(Ld.bind(null,e,t,u,n,a,i,h,v,b,D,1,O,C)),Gn(e,u,h,!A);return}Ld(e,t,u,n,a,i,h,v,b)}function Pm(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],u=i.getSnapshot;i=i.value;try{if(!Et(u(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gn(e,t,n,a){t&=~Nu,t&=~pa,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var u=31-ae(i),h=1<<u;a[u]=-1,i&=~h}n!==0&&wn(e,n,t)}function Cs(){return(Re&6)===0?(vi(0),!1):!0}function Hu(){if(_e!==null){if(De===0)var e=_e.return;else e=_e,on=da=null,au(e),tl=null,si=0,e=_e;for(;e!==null;)fd(e.alternate,e),e=e.return;_e=null}}function ol(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,gv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Hu(),qe=e,_e=n=sn(e.current,null),Te=t,De=0,At=null,Bn=!1,il=ne(e,t),Mu=!1,sl=Ht=Nu=pa=qn=Xe=0,bt=gi=null,zu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-ae(a),u=1<<i;t|=e[i],a&=~u}return yn=t,Fi(),n}function Md(e,t){ve=null,R.H=vs,t===Fl||t===ss?(t=Jc(),De=3):t===Vc?(t=Jc(),De=4):De=t===Ff?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,At=t,_e===null&&(Xe=1,ws(e,zt(t,e.current)))}function Nd(){var e=R.H;return R.H=vs,e===null?vs:e}function zd(){var e=R.A;return R.A=Zm,e}function Gu(){Xe=4,Bn||(Te&4194048)!==Te&&Lt.current!==null||(il=!0),(qn&134217727)===0&&(pa&134217727)===0||qe===null||Gn(qe,Te,Ht,!1)}function $u(e,t,n){var a=Re;Re|=2;var i=Nd(),u=zd();(qe!==e||Te!==t)&&(Os=null,ol(e,t)),t=!1;var h=Xe;e:do try{if(De!==0&&_e!==null){var v=_e,b=At;switch(De){case 8:Hu(),h=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(t=!0);var A=De;if(De=0,At=null,cl(e,v,b,A),n&&il){h=0;break e}break;default:A=De,De=0,At=null,cl(e,v,b,A)}}Fm(),h=Xe;break}catch(D){Md(e,D)}while(!0);return t&&e.shellSuspendCounter++,on=da=null,Re=a,R.H=i,R.A=u,_e===null&&(qe=null,Te=0,Fi()),h}function Fm(){for(;_e!==null;)kd(_e)}function Im(e,t){var n=Re;Re|=2;var a=Nd(),i=zd();qe!==e||Te!==t?(Os=null,As=Dt()+500,ol(e,t)):il=ne(e,t);e:do try{if(De!==0&&_e!==null){t=_e;var u=At;t:switch(De){case 1:De=0,At=null,cl(e,t,u,1);break;case 2:case 9:if(Kc(u)){De=0,At=null,Bd(t);break}t=function(){De!==2&&De!==9||qe!==e||(De=7),tn(e)},u.then(t,t);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:Kc(u)?(De=0,At=null,Bd(t)):(De=0,At=null,cl(e,t,u,7));break;case 5:var h=null;switch(_e.tag){case 26:h=_e.memoizedState;case 5:case 27:var v=_e;if(!h||ph(h)){De=0,At=null;var b=v.sibling;if(b!==null)_e=b;else{var A=v.return;A!==null?(_e=A,Rs(A)):_e=null}break t}}De=0,At=null,cl(e,t,u,5);break;case 6:De=0,At=null,cl(e,t,u,6);break;case 8:Hu(),Xe=6;break e;default:throw Error(s(462))}}Wm();break}catch(D){Md(e,D)}while(!0);return on=da=null,R.H=a,R.A=i,Re=n,_e!==null?0:(qe=null,Te=0,Fi(),Xe)}function Wm(){for(;_e!==null&&!ar();)kd(_e)}function kd(e){var t=od(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?Rs(e):_e=t}function Bd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=ad(n,t,t.pendingProps,t.type,void 0,Te);break;case 11:t=ad(n,t,t.pendingProps,t.type.render,t.ref,Te);break;case 5:au(t);default:fd(n,t),t=_e=Bc(t,yn),t=od(n,t,yn)}e.memoizedProps=e.pendingProps,t===null?Rs(e):_e=t}function cl(e,t,n,a){on=da=null,au(t),tl=null,si=0;var i=t.return;try{if($m(e,i,t,n,Te)){Xe=1,ws(e,zt(n,e.current)),_e=null;return}}catch(u){if(i!==null)throw _e=i,u;Xe=1,ws(e,zt(n,e.current)),_e=null;return}t.flags&32768?(xe||a===1?e=!0:il||(Te&536870912)!==0?e=!1:(Bn=e=!0,(a===2||a===9||a===3||a===6)&&(a=Lt.current,a!==null&&a.tag===13&&(a.flags|=16384))),qd(t,e)):Rs(t)}function Rs(e){var t=e;do{if((t.flags&32768)!==0){qd(t,Bn);return}e=t.return;var n=Qm(t.alternate,t,yn);if(n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Xe===0&&(Xe=5)}function qd(e,t){do{var n=Xm(e.alternate,e);if(n!==null){n.flags&=32767,_e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=n}while(e!==null);Xe=6,_e=null}function Ld(e,t,n,a,i,u,h,v,b){e.cancelPendingCommit=null;do Ds();while(ct!==0);if((Re&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=Ur,Da(e,n,u,h,v,b),e===qe&&(_e=qe=null,Te=0),rl=t,Hn=e,ul=n,Bu=u,qu=i,Cd=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,av(Ca,function(){return Qd(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=R.T,R.T=null,i=J.p,J.p=2,h=Re,Re|=4;try{Vm(e,t,n)}finally{Re=h,J.p=i,R.T=a}}ct=1,Hd(),Gd(),$d()}}function Hd(){if(ct===1){ct=0;var e=Hn,t=rl,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=R.T,R.T=null;var a=J.p;J.p=2;var i=Re;Re|=4;try{Sd(t,e);var u=eo,h=Ac(e.containerInfo),v=u.focusedElem,b=u.selectionRange;if(h!==v&&v&&v.ownerDocument&&xc(v.ownerDocument.documentElement,v)){if(b!==null&&Ar(v)){var A=b.start,D=b.end;if(D===void 0&&(D=A),"selectionStart"in v)v.selectionStart=A,v.selectionEnd=Math.min(D,v.value.length);else{var k=v.ownerDocument||document,O=k&&k.defaultView||window;if(O.getSelection){var C=O.getSelection(),fe=v.textContent.length,ue=Math.min(b.start,fe),Ne=b.end===void 0?ue:Math.min(b.end,fe);!C.extend&&ue>Ne&&(h=Ne,Ne=ue,ue=h);var E=jc(v,ue),S=jc(v,Ne);if(E&&S&&(C.rangeCount!==1||C.anchorNode!==E.node||C.anchorOffset!==E.offset||C.focusNode!==S.node||C.focusOffset!==S.offset)){var j=k.createRange();j.setStart(E.node,E.offset),C.removeAllRanges(),ue>Ne?(C.addRange(j),C.extend(S.node,S.offset)):(j.setEnd(S.node,S.offset),C.addRange(j))}}}}for(k=[],C=v;C=C.parentNode;)C.nodeType===1&&k.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<k.length;v++){var M=k[v];M.element.scrollLeft=M.left,M.element.scrollTop=M.top}}Ys=!!Wu,eo=Wu=null}finally{Re=i,J.p=a,R.T=n}}e.current=t,ct=2}}function Gd(){if(ct===2){ct=0;var e=Hn,t=rl,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=R.T,R.T=null;var a=J.p;J.p=2;var i=Re;Re|=4;try{pd(e,t.alternate,t)}finally{Re=i,J.p=a,R.T=n}}ct=3}}function $d(){if(ct===4||ct===3){ct=0,lr();var e=Hn,t=rl,n=ul,a=Cd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ct=5:(ct=0,rl=Hn=null,Yd(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ln=null),En(n),t=t.stateNode,P&&typeof P.onCommitFiberRoot=="function")try{P.onCommitFiberRoot(G,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=R.T,i=J.p,J.p=2,R.T=null;try{for(var u=e.onRecoverableError,h=0;h<a.length;h++){var v=a[h];u(v.value,{componentStack:v.stack})}}finally{R.T=t,J.p=i}}(ul&3)!==0&&Ds(),tn(e),i=e.pendingLanes,(n&4194090)!==0&&(i&42)!==0?e===Lu?mi++:(mi=0,Lu=e):mi=0,vi(0)}}function Yd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Jl(t)))}function Ds(e){return Hd(),Gd(),$d(),Qd()}function Qd(){if(ct!==5)return!1;var e=Hn,t=Bu;Bu=0;var n=En(ul),a=R.T,i=J.p;try{J.p=32>n?32:n,R.T=null,n=qu,qu=null;var u=Hn,h=ul;if(ct=0,rl=Hn=null,ul=0,(Re&6)!==0)throw Error(s(331));var v=Re;if(Re|=4,Ad(u.current),Td(u,u.current,h,n),Re=v,vi(0,!1),P&&typeof P.onPostCommitFiberRoot=="function")try{P.onPostCommitFiberRoot(G,u)}catch{}return!0}finally{J.p=i,R.T=a,Yd(e,t)}}function Xd(e,t,n){t=zt(n,t),t=yu(e.stateNode,t,2),e=Rn(e,t,2),e!==null&&($t(e,2),tn(e))}function ze(e,t,n){if(e.tag===3)Xd(e,e,n);else for(;t!==null;){if(t.tag===3){Xd(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ln===null||!Ln.has(a))){e=zt(n,e),n=Jf(2),a=Rn(t,n,2),a!==null&&(Pf(n,a,t,e),$t(a,2),tn(a));break}}t=t.return}}function Yu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new Jm;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Mu=!0,i.add(n),e=ev.bind(null,e,t,n),t.then(e,e))}function ev(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,qe===e&&(Te&n)===n&&(Xe===4||Xe===3&&(Te&62914560)===Te&&300>Dt()-ku?(Re&2)===0&&ol(e,0):Nu|=n,sl===Te&&(sl=0)),tn(e)}function Vd(e,t){t===0&&(t=Jt()),e=Xa(e,t),e!==null&&($t(e,t),tn(e))}function tv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Vd(e,n)}function nv(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),Vd(e,n)}function av(e,t){return Aa(e,t)}var Us=null,fl=null,Qu=!1,Ms=!1,Xu=!1,_a=0;function tn(e){e!==fl&&e.next===null&&(fl===null?Us=fl=e:fl=fl.next=e),Ms=!0,Qu||(Qu=!0,iv())}function vi(e,t){if(!Xu&&Ms){Xu=!0;do for(var n=!1,a=Us;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var u=0;else{var h=a.suspendedLanes,v=a.pingedLanes;u=(1<<31-ae(42|e)+1)-1,u&=i&~(h&~v),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,Pd(a,u))}else u=Te,u=Oe(a,a===qe?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(u&3)===0||ne(a,u)||(n=!0,Pd(a,u));a=a.next}while(n);Xu=!1}}function lv(){Kd()}function Kd(){Ms=Qu=!1;var e=0;_a!==0&&(hv()&&(e=_a),_a=0);for(var t=Dt(),n=null,a=Us;a!==null;){var i=a.next,u=Zd(a,t);u===0?(a.next=null,n===null?Us=i:n.next=i,i===null&&(fl=n)):(n=a,(e!==0||(u&3)!==0)&&(Ms=!0)),a=i}vi(e)}function Zd(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-ae(u),v=1<<h,b=i[h];b===-1?((v&n)===0||(v&a)!==0)&&(i[h]=Ce(v,t)):b<=t&&(e.expiredLanes|=v),u&=~v}if(t=qe,n=Te,n=Oe(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(De===2||De===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Oa(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ne(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Oa(a),En(n)){case 2:case 8:n=qi;break;case 32:n=Ca;break;case 268435456:n=Ra;break;default:n=Ca}return a=Jd.bind(null,e),n=Aa(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Oa(a),e.callbackPriority=2,e.callbackNode=null,2}function Jd(e,t){if(ct!==0&&ct!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ds()&&e.callbackNode!==n)return null;var a=Te;return a=Oe(e,e===qe?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Dd(e,a,t),Zd(e,Dt()),e.callbackNode!=null&&e.callbackNode===n?Jd.bind(null,e):null)}function Pd(e,t){if(Ds())return null;Dd(e,t,!0)}function iv(){mv(function(){(Re&6)!==0?Aa(Bi,lv):Kd()})}function Vu(){return _a===0&&(_a=Ge()),_a}function Fd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qi(""+e)}function Id(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function sv(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var u=Fd((i[Ie]||null).action),h=a.submitter;h&&(t=(t=h[Ie]||null)?Fd(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var v=new Zi("action","action",null,a,i);e.push({event:v,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(_a!==0){var b=h?Id(i,h):new FormData(i);du(n,{pending:!0,data:b,method:i.method,action:u},null,b)}}else typeof u=="function"&&(v.preventDefault(),b=h?Id(i,h):new FormData(i),du(n,{pending:!0,data:b,method:i.method,action:u},u,b))},currentTarget:i}]})}}for(var Ku=0;Ku<Dr.length;Ku++){var Zu=Dr[Ku],rv=Zu.toLowerCase(),uv=Zu[0].toUpperCase()+Zu.slice(1);Yt(rv,"on"+uv)}Yt(Rc,"onAnimationEnd"),Yt(Dc,"onAnimationIteration"),Yt(Uc,"onAnimationStart"),Yt("dblclick","onDoubleClick"),Yt("focusin","onFocus"),Yt("focusout","onBlur"),Yt(jm,"onTransitionRun"),Yt(xm,"onTransitionStart"),Yt(Am,"onTransitionCancel"),Yt(Mc,"onTransitionEnd"),za("onMouseEnter",["mouseout","mouseover"]),za("onMouseLeave",["mouseout","mouseover"]),za("onPointerEnter",["pointerout","pointerover"]),za("onPointerLeave",["pointerout","pointerover"]),aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),aa("onBeforeInput",["compositionend","keypress","textInput","paste"]),aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ov=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yi));function Wd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var u=void 0;if(t)for(var h=a.length-1;0<=h;h--){var v=a[h],b=v.instance,A=v.currentTarget;if(v=v.listener,b!==u&&i.isPropagationStopped())break e;u=v,i.currentTarget=A;try{u(i)}catch(D){bs(D)}i.currentTarget=null,u=b}else for(h=0;h<a.length;h++){if(v=a[h],b=v.instance,A=v.currentTarget,v=v.listener,b!==u&&i.isPropagationStopped())break e;u=v,i.currentTarget=A;try{u(i)}catch(D){bs(D)}i.currentTarget=null,u=b}}}}function be(e,t){var n=t[Ul];n===void 0&&(n=t[Ul]=new Set);var a=e+"__bubble";n.has(a)||(eh(t,e,2,!1),n.add(a))}function Ju(e,t,n){var a=0;t&&(a|=4),eh(n,e,a,t)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Pu(e){if(!e[Ns]){e[Ns]=!0,Vo.forEach(function(n){n!=="selectionchange"&&(ov.has(n)||Ju(n,!1,e),Ju(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ns]||(t[Ns]=!0,Ju("selectionchange",!1,t))}}function eh(e,t,n,a){switch(Th(t)){case 2:var i=kv;break;case 8:i=Bv;break;default:i=co}n=i.bind(null,t,n,e),i=void 0,!pr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Fu(e,t,n,a,i){var u=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var v=a.stateNode.containerInfo;if(v===i)break;if(h===4)for(h=a.return;h!==null;){var b=h.tag;if((b===3||b===4)&&h.stateNode.containerInfo===i)return;h=h.return}for(;v!==null;){if(h=Ua(v),h===null)return;if(b=h.tag,b===5||b===6||b===26||b===27){a=u=h;continue e}v=v.parentNode}}a=a.return}sc(function(){var A=u,D=vr(n),k=[];e:{var O=Nc.get(e);if(O!==void 0){var C=Zi,fe=e;switch(e){case"keypress":if(Vi(n)===0)break e;case"keydown":case"keyup":C=am;break;case"focusin":fe="focus",C=Sr;break;case"focusout":fe="blur",C=Sr;break;case"beforeblur":case"afterblur":C=Sr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=sm;break;case Rc:case Dc:case Uc:C=Zg;break;case Mc:C=um;break;case"scroll":case"scrollend":C=Yg;break;case"wheel":C=cm;break;case"copy":case"cut":case"paste":C=Pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=fc;break;case"toggle":case"beforetoggle":C=dm}var ue=(t&4)!==0,Ne=!ue&&(e==="scroll"||e==="scrollend"),E=ue?O!==null?O+"Capture":null:O;ue=[];for(var S=A,j;S!==null;){var M=S;if(j=M.stateNode,M=M.tag,M!==5&&M!==26&&M!==27||j===null||E===null||(M=kl(S,E),M!=null&&ue.push(pi(S,M,j))),Ne)break;S=S.return}0<ue.length&&(O=new C(O,fe,null,n,D),k.push({event:O,listeners:ue}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",O&&n!==mr&&(fe=n.relatedTarget||n.fromElement)&&(Ua(fe)||fe[jn]))break e;if((C||O)&&(O=D.window===D?D:(O=D.ownerDocument)?O.defaultView||O.parentWindow:window,C?(fe=n.relatedTarget||n.toElement,C=A,fe=fe?Ua(fe):null,fe!==null&&(Ne=f(fe),ue=fe.tag,fe!==Ne||ue!==5&&ue!==27&&ue!==6)&&(fe=null)):(C=null,fe=A),C!==fe)){if(ue=oc,M="onMouseLeave",E="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ue=fc,M="onPointerLeave",E="onPointerEnter",S="pointer"),Ne=C==null?O:zl(C),j=fe==null?O:zl(fe),O=new ue(M,S+"leave",C,n,D),O.target=Ne,O.relatedTarget=j,M=null,Ua(D)===A&&(ue=new ue(E,S+"enter",fe,n,D),ue.target=j,ue.relatedTarget=Ne,M=ue),Ne=M,C&&fe)t:{for(ue=C,E=fe,S=0,j=ue;j;j=dl(j))S++;for(j=0,M=E;M;M=dl(M))j++;for(;0<S-j;)ue=dl(ue),S--;for(;0<j-S;)E=dl(E),j--;for(;S--;){if(ue===E||E!==null&&ue===E.alternate)break t;ue=dl(ue),E=dl(E)}ue=null}else ue=null;C!==null&&th(k,O,C,ue,!1),fe!==null&&Ne!==null&&th(k,Ne,fe,ue,!0)}}e:{if(O=A?zl(A):window,C=O.nodeName&&O.nodeName.toLowerCase(),C==="select"||C==="input"&&O.type==="file")var ee=_c;else if(yc(O))if(bc)ee=Sm;else{ee=bm;var pe=_m}else C=O.nodeName,!C||C.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?A&&gr(A.elementType)&&(ee=_c):ee=wm;if(ee&&(ee=ee(e,A))){pc(k,ee,n,D);break e}pe&&pe(e,O,A),e==="focusout"&&A&&O.type==="number"&&A.memoizedProps.value!=null&&hr(O,"number",O.value)}switch(pe=A?zl(A):window,e){case"focusin":(yc(pe)||pe.contentEditable==="true")&&($a=pe,Or=A,Ql=null);break;case"focusout":Ql=Or=$a=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,Oc(k,n,D);break;case"selectionchange":if(Tm)break;case"keydown":case"keyup":Oc(k,n,D)}var le;if(Tr)e:{switch(e){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else Ga?mc(e,n)&&(oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(oe="onCompositionStart");oe&&(dc&&n.locale!=="ko"&&(Ga||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&Ga&&(le=rc()):(xn=D,_r="value"in xn?xn.value:xn.textContent,Ga=!0)),pe=zs(A,oe),0<pe.length&&(oe=new cc(oe,e,null,n,D),k.push({event:oe,listeners:pe}),le?oe.data=le:(le=vc(n),le!==null&&(oe.data=le)))),(le=gm?mm(e,n):vm(e,n))&&(oe=zs(A,"onBeforeInput"),0<oe.length&&(pe=new cc("onBeforeInput","beforeinput",null,n,D),k.push({event:pe,listeners:oe}),pe.data=le)),sv(k,e,A,n,D)}Wd(k,t)})}function pi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zs(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,u=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||u===null||(i=kl(e,n),i!=null&&a.unshift(pi(e,i,u)),i=kl(e,t),i!=null&&a.push(pi(e,i,u))),e.tag===3)return a;e=e.return}return[]}function dl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function th(e,t,n,a,i){for(var u=t._reactName,h=[];n!==null&&n!==a;){var v=n,b=v.alternate,A=v.stateNode;if(v=v.tag,b!==null&&b===a)break;v!==5&&v!==26&&v!==27||A===null||(b=A,i?(A=kl(n,u),A!=null&&h.unshift(pi(n,A,b))):i||(A=kl(n,u),A!=null&&h.push(pi(n,A,b)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var cv=/\r\n?/g,fv=/\u0000|\uFFFD/g;function nh(e){return(typeof e=="string"?e:""+e).replace(cv,`
`).replace(fv,"")}function ah(e,t){return t=nh(t),nh(e)===t}function ks(){}function Me(e,t,n,a,i,u){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||qa(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&qa(e,""+a);break;case"className":Gi(e,"class",a);break;case"tabIndex":Gi(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Gi(e,n,a);break;case"style":lc(e,a,u);break;case"data":if(t!=="object"){Gi(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Qi(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&Me(e,t,"name",i.name,i,null),Me(e,t,"formEncType",i.formEncType,i,null),Me(e,t,"formMethod",i.formMethod,i,null),Me(e,t,"formTarget",i.formTarget,i,null)):(Me(e,t,"encType",i.encType,i,null),Me(e,t,"method",i.method,i,null),Me(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Qi(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=ks);break;case"onScroll":a!=null&&be("scroll",e);break;case"onScrollEnd":a!=null&&be("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Qi(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":be("beforetoggle",e),be("toggle",e),Hi(e,"popover",a);break;case"xlinkActuate":an(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":an(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":an(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":an(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":an(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":an(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":an(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":an(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":an(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Hi(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Gg.get(n)||n,Hi(e,n,a))}}function Iu(e,t,n,a,i,u){switch(n){case"style":lc(e,a,u);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(s(60));e.innerHTML=n}}break;case"children":typeof a=="string"?qa(e,a):(typeof a=="number"||typeof a=="bigint")&&qa(e,""+a);break;case"onScroll":a!=null&&be("scroll",e);break;case"onScrollEnd":a!=null&&be("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ks);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),u=e[Ie]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,i),typeof a=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Hi(e,n,a)}}}function ft(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",e),be("load",e);var a=!1,i=!1,u;for(u in n)if(n.hasOwnProperty(u)){var h=n[u];if(h!=null)switch(u){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Me(e,t,u,h,n,null)}}i&&Me(e,t,"srcSet",n.srcSet,n,null),a&&Me(e,t,"src",n.src,n,null);return;case"input":be("invalid",e);var v=u=h=i=null,b=null,A=null;for(a in n)if(n.hasOwnProperty(a)){var D=n[a];if(D!=null)switch(a){case"name":i=D;break;case"type":h=D;break;case"checked":b=D;break;case"defaultChecked":A=D;break;case"value":u=D;break;case"defaultValue":v=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:Me(e,t,a,D,n,null)}}ec(e,u,v,b,A,h,i,!1),$i(e);return;case"select":be("invalid",e),a=h=u=null;for(i in n)if(n.hasOwnProperty(i)&&(v=n[i],v!=null))switch(i){case"value":u=v;break;case"defaultValue":h=v;break;case"multiple":a=v;default:Me(e,t,i,v,n,null)}t=u,n=h,e.multiple=!!a,t!=null?Ba(e,!!a,t,!1):n!=null&&Ba(e,!!a,n,!0);return;case"textarea":be("invalid",e),u=i=a=null;for(h in n)if(n.hasOwnProperty(h)&&(v=n[h],v!=null))switch(h){case"value":a=v;break;case"defaultValue":i=v;break;case"children":u=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:Me(e,t,h,v,n,null)}nc(e,a,i,u),$i(e);return;case"option":for(b in n)if(n.hasOwnProperty(b)&&(a=n[b],a!=null))switch(b){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Me(e,t,b,a,n,null)}return;case"dialog":be("beforetoggle",e),be("toggle",e),be("cancel",e),be("close",e);break;case"iframe":case"object":be("load",e);break;case"video":case"audio":for(a=0;a<yi.length;a++)be(yi[a],e);break;case"image":be("error",e),be("load",e);break;case"details":be("toggle",e);break;case"embed":case"source":case"link":be("error",e),be("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in n)if(n.hasOwnProperty(A)&&(a=n[A],a!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Me(e,t,A,a,n,null)}return;default:if(gr(t)){for(D in n)n.hasOwnProperty(D)&&(a=n[D],a!==void 0&&Iu(e,t,D,a,n,void 0));return}}for(v in n)n.hasOwnProperty(v)&&(a=n[v],a!=null&&Me(e,t,v,a,n,null))}function dv(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,u=null,h=null,v=null,b=null,A=null,D=null;for(C in n){var k=n[C];if(n.hasOwnProperty(C)&&k!=null)switch(C){case"checked":break;case"value":break;case"defaultValue":b=k;default:a.hasOwnProperty(C)||Me(e,t,C,null,a,k)}}for(var O in a){var C=a[O];if(k=n[O],a.hasOwnProperty(O)&&(C!=null||k!=null))switch(O){case"type":u=C;break;case"name":i=C;break;case"checked":A=C;break;case"defaultChecked":D=C;break;case"value":h=C;break;case"defaultValue":v=C;break;case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(137,t));break;default:C!==k&&Me(e,t,O,C,a,k)}}dr(e,h,v,b,A,D,u,i);return;case"select":C=h=v=O=null;for(u in n)if(b=n[u],n.hasOwnProperty(u)&&b!=null)switch(u){case"value":break;case"multiple":C=b;default:a.hasOwnProperty(u)||Me(e,t,u,null,a,b)}for(i in a)if(u=a[i],b=n[i],a.hasOwnProperty(i)&&(u!=null||b!=null))switch(i){case"value":O=u;break;case"defaultValue":v=u;break;case"multiple":h=u;default:u!==b&&Me(e,t,i,u,a,b)}t=v,n=h,a=C,O!=null?Ba(e,!!n,O,!1):!!a!=!!n&&(t!=null?Ba(e,!!n,t,!0):Ba(e,!!n,n?[]:"",!1));return;case"textarea":C=O=null;for(v in n)if(i=n[v],n.hasOwnProperty(v)&&i!=null&&!a.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Me(e,t,v,null,a,i)}for(h in a)if(i=a[h],u=n[h],a.hasOwnProperty(h)&&(i!=null||u!=null))switch(h){case"value":O=i;break;case"defaultValue":C=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(s(91));break;default:i!==u&&Me(e,t,h,i,a,u)}tc(e,O,C);return;case"option":for(var fe in n)if(O=n[fe],n.hasOwnProperty(fe)&&O!=null&&!a.hasOwnProperty(fe))switch(fe){case"selected":e.selected=!1;break;default:Me(e,t,fe,null,a,O)}for(b in a)if(O=a[b],C=n[b],a.hasOwnProperty(b)&&O!==C&&(O!=null||C!=null))switch(b){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Me(e,t,b,O,a,C)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in n)O=n[ue],n.hasOwnProperty(ue)&&O!=null&&!a.hasOwnProperty(ue)&&Me(e,t,ue,null,a,O);for(A in a)if(O=a[A],C=n[A],a.hasOwnProperty(A)&&O!==C&&(O!=null||C!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,t));break;default:Me(e,t,A,O,a,C)}return;default:if(gr(t)){for(var Ne in n)O=n[Ne],n.hasOwnProperty(Ne)&&O!==void 0&&!a.hasOwnProperty(Ne)&&Iu(e,t,Ne,void 0,a,O);for(D in a)O=a[D],C=n[D],!a.hasOwnProperty(D)||O===C||O===void 0&&C===void 0||Iu(e,t,D,O,a,C);return}}for(var E in n)O=n[E],n.hasOwnProperty(E)&&O!=null&&!a.hasOwnProperty(E)&&Me(e,t,E,null,a,O);for(k in a)O=a[k],C=n[k],!a.hasOwnProperty(k)||O===C||O==null&&C==null||Me(e,t,k,O,a,C)}var Wu=null,eo=null;function Bs(e){return e.nodeType===9?e:e.ownerDocument}function lh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ih(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function to(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var no=null;function hv(){var e=window.event;return e&&e.type==="popstate"?e===no?!1:(no=e,!0):(no=null,!1)}var sh=typeof setTimeout=="function"?setTimeout:void 0,gv=typeof clearTimeout=="function"?clearTimeout:void 0,rh=typeof Promise=="function"?Promise:void 0,mv=typeof queueMicrotask=="function"?queueMicrotask:typeof rh<"u"?function(e){return rh.resolve(null).then(e).catch(vv)}:sh;function vv(e){setTimeout(function(){throw e})}function $n(e){return e==="head"}function uh(e,t){var n=t,a=0,i=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(0<a&&8>a){n=a;var h=e.ownerDocument;if(n&1&&_i(h.documentElement),n&2&&_i(h.body),n&4)for(n=h.head,_i(n),h=n.firstChild;h;){var v=h.nextSibling,b=h.nodeName;h[Nl]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=v}}if(i===0){e.removeChild(u),Ai(t);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:a=n.charCodeAt(0)-48;else a=0;n=u}while(n);Ai(t)}function ao(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ao(n),ur(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function yv(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Nl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Xt(e.nextSibling),e===null)break}return null}function pv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Xt(e.nextSibling),e===null))return null;return e}function lo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function _v(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var io=null;function oh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function ch(e,t,n){switch(t=Bs(n),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function _i(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ur(e)}var Gt=new Map,fh=new Set;function qs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=J.d;J.d={f:bv,r:wv,D:Sv,C:Ev,L:Tv,m:jv,X:Av,S:xv,M:Ov};function bv(){var e=pn.f(),t=Cs();return e||t}function wv(e){var t=Ma(e);t!==null&&t.tag===5&&t.type==="form"?Df(t):pn.r(e)}var hl=typeof document>"u"?null:document;function dh(e,t,n){var a=hl;if(a&&typeof t=="string"&&t){var i=Nt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),fh.has(i)||(fh.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),ft(t,"link",e),nt(t),a.head.appendChild(t)))}}function Sv(e){pn.D(e),dh("dns-prefetch",e,null)}function Ev(e,t){pn.C(e,t),dh("preconnect",e,t)}function Tv(e,t,n){pn.L(e,t,n);var a=hl;if(a&&e&&t){var i='link[rel="preload"][as="'+Nt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Nt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Nt(n.imageSizes)+'"]')):i+='[href="'+Nt(e)+'"]';var u=i;switch(t){case"style":u=gl(e);break;case"script":u=ml(e)}Gt.has(u)||(e=_({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Gt.set(u,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(bi(u))||t==="script"&&a.querySelector(wi(u))||(t=a.createElement("link"),ft(t,"link",e),nt(t),a.head.appendChild(t)))}}function jv(e,t){pn.m(e,t);var n=hl;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Nt(a)+'"][href="'+Nt(e)+'"]',u=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ml(e)}if(!Gt.has(u)&&(e=_({rel:"modulepreload",href:e},t),Gt.set(u,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(wi(u)))return}a=n.createElement("link"),ft(a,"link",e),nt(a),n.head.appendChild(a)}}}function xv(e,t,n){pn.S(e,t,n);var a=hl;if(a&&e){var i=Na(a).hoistableStyles,u=gl(e);t=t||"default";var h=i.get(u);if(!h){var v={loading:0,preload:null};if(h=a.querySelector(bi(u)))v.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Gt.get(u))&&so(e,n);var b=h=a.createElement("link");nt(b),ft(b,"link",e),b._p=new Promise(function(A,D){b.onload=A,b.onerror=D}),b.addEventListener("load",function(){v.loading|=1}),b.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Ls(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:v},i.set(u,h)}}}function Av(e,t){pn.X(e,t);var n=hl;if(n&&e){var a=Na(n).hoistableScripts,i=ml(e),u=a.get(i);u||(u=n.querySelector(wi(i)),u||(e=_({src:e,async:!0},t),(t=Gt.get(i))&&ro(e,t),u=n.createElement("script"),nt(u),ft(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(i,u))}}function Ov(e,t){pn.M(e,t);var n=hl;if(n&&e){var a=Na(n).hoistableScripts,i=ml(e),u=a.get(i);u||(u=n.querySelector(wi(i)),u||(e=_({src:e,async:!0,type:"module"},t),(t=Gt.get(i))&&ro(e,t),u=n.createElement("script"),nt(u),ft(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},a.set(i,u))}}function hh(e,t,n,a){var i=(i=ce.current)?qs(i):null;if(!i)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=gl(n.href),n=Na(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=gl(n.href);var u=Na(i).hoistableStyles,h=u.get(e);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=i.querySelector(bi(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Gt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Gt.set(e,n),u||Cv(i,e,n,h.state))),t&&a===null)throw Error(s(528,""));return h}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ml(n),n=Na(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function gl(e){return'href="'+Nt(e)+'"'}function bi(e){return'link[rel="stylesheet"]['+e+"]"}function gh(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function Cv(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),ft(t,"link",n),nt(t),e.head.appendChild(t))}function ml(e){return'[src="'+Nt(e)+'"]'}function wi(e){return"script[async]"+e}function mh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Nt(n.href)+'"]');if(a)return t.instance=a,nt(a),a;var i=_({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),nt(a),ft(a,"style",i),Ls(a,n.precedence,e),t.instance=a;case"stylesheet":i=gl(n.href);var u=e.querySelector(bi(i));if(u)return t.state.loading|=4,t.instance=u,nt(u),u;a=gh(n),(i=Gt.get(i))&&so(a,i),u=(e.ownerDocument||e).createElement("link"),nt(u);var h=u;return h._p=new Promise(function(v,b){h.onload=v,h.onerror=b}),ft(u,"link",a),t.state.loading|=4,Ls(u,n.precedence,e),t.instance=u;case"script":return u=ml(n.src),(i=e.querySelector(wi(u)))?(t.instance=i,nt(i),i):(a=n,(i=Gt.get(u))&&(a=_({},n),ro(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),nt(i),ft(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ls(a,n.precedence,e));return t.instance}function Ls(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,u=i,h=0;h<a.length;h++){var v=a[h];if(v.dataset.precedence===t)u=v;else if(u!==i)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function so(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ro(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Hs=null;function vh(e,t,n){if(Hs===null){var a=new Map,i=Hs=new Map;i.set(n,a)}else i=Hs,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var u=n[i];if(!(u[Nl]||u[tt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var v=a.get(h);v?v.push(u):a.set(h,[u])}}return a}function yh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Rv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ph(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Si=null;function Dv(){}function Uv(e,t,n){if(Si===null)throw Error(s(475));var a=Si;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var i=gl(n.href),u=e.querySelector(bi(i));if(u){e=u._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=Gs.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=u,nt(u);return}u=e.ownerDocument||e,n=gh(n),(i=Gt.get(i))&&so(n,i),u=u.createElement("link"),nt(u);var h=u;h._p=new Promise(function(v,b){h.onload=v,h.onerror=b}),ft(u,"link",n),t.instance=u}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=Gs.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function Mv(){if(Si===null)throw Error(s(475));var e=Si;return e.stylesheets&&e.count===0&&uo(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Gs(){if(this.count--,this.count===0){if(this.stylesheets)uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var $s=null;function uo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,$s=new Map,t.forEach(Nv,e),$s=null,Gs.call(e))}function Nv(e,t){if(!(t.state.loading&4)){var n=$s.get(e);if(n)var a=n.get(null);else{n=new Map,$s.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<i.length;u++){var h=i[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}i=t.instance,h=i.getAttribute("data-precedence"),u=n.get(h)||a,u===a&&n.set(null,i),n.set(h,i),this.count++,a=Gs.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),u?u.parentNode.insertBefore(i,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ei={$$typeof:z,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function zv(e,t,n,a,i,u,h,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function _h(e,t,n,a,i,u,h,v,b,A,D,k){return e=new zv(e,t,n,h,v,b,A,k),t=1,u===!0&&(t|=24),u=Tt(3,null,null,t),e.current=u,u.stateNode=e,t=Yr(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:a,isDehydrated:n,cache:t},Kr(u),e}function bh(e){return e?(e=Va,e):Va}function wh(e,t,n,a,i,u){i=bh(i),a.context===null?a.context=i:a.pendingContext=i,a=Cn(t),a.payload={element:n},u=u===void 0?null:u,u!==null&&(a.callback=u),n=Rn(e,a,t),n!==null&&(Ct(n,e,t),Wl(n,e,t))}function Sh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oo(e,t){Sh(e,t),(e=e.alternate)&&Sh(e,t)}function Eh(e){if(e.tag===13){var t=Xa(e,67108864);t!==null&&Ct(t,e,67108864),oo(e,67108864)}}var Ys=!0;function kv(e,t,n,a){var i=R.T;R.T=null;var u=J.p;try{J.p=2,co(e,t,n,a)}finally{J.p=u,R.T=i}}function Bv(e,t,n,a){var i=R.T;R.T=null;var u=J.p;try{J.p=8,co(e,t,n,a)}finally{J.p=u,R.T=i}}function co(e,t,n,a){if(Ys){var i=fo(a);if(i===null)Fu(e,t,a,Qs,n),jh(e,a);else if(Lv(i,e,t,n,a))a.stopPropagation();else if(jh(e,a),t&4&&-1<qv.indexOf(e)){for(;i!==null;){var u=Ma(i);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=re(u.pendingLanes);if(h!==0){var v=u;for(v.pendingLanes|=2,v.entangledLanes|=2;h;){var b=1<<31-ae(h);v.entanglements[1]|=b,h&=~b}tn(u),(Re&6)===0&&(As=Dt()+500,vi(0))}}break;case 13:v=Xa(u,2),v!==null&&Ct(v,u,2),Cs(),oo(u,2)}if(u=fo(a),u===null&&Fu(e,t,a,Qs,n),u===i)break;i=u}i!==null&&a.stopPropagation()}else Fu(e,t,a,null,n)}}function fo(e){return e=vr(e),ho(e)}var Qs=null;function ho(e){if(Qs=null,e=Ua(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qs=e,null}function Th(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ir()){case Bi:return 2;case qi:return 8;case Ca:case sr:return 32;case Ra:return 268435456;default:return 32}default:return 32}}var go=!1,Yn=null,Qn=null,Xn=null,Ti=new Map,ji=new Map,Vn=[],qv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jh(e,t){switch(e){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ji.delete(t.pointerId)}}function xi(e,t,n,a,i,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:u,targetContainers:[i]},t!==null&&(t=Ma(t),t!==null&&Eh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Lv(e,t,n,a,i){switch(t){case"focusin":return Yn=xi(Yn,e,t,n,a,i),!0;case"dragenter":return Qn=xi(Qn,e,t,n,a,i),!0;case"mouseover":return Xn=xi(Xn,e,t,n,a,i),!0;case"pointerover":var u=i.pointerId;return Ti.set(u,xi(Ti.get(u)||null,e,t,n,a,i)),!0;case"gotpointercapture":return u=i.pointerId,ji.set(u,xi(ji.get(u)||null,e,t,n,a,i)),!0}return!1}function xh(e){var t=Ua(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,Tn(e.priority,function(){if(n.tag===13){var a=Ot();a=Sn(a);var i=Xa(n,a);i!==null&&Ct(i,n,a),oo(n,a)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fo(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);mr=a,n.target.dispatchEvent(a),mr=null}else return t=Ma(n),t!==null&&Eh(t),e.blockedOn=n,!1;t.shift()}return!0}function Ah(e,t,n){Xs(e)&&n.delete(t)}function Hv(){go=!1,Yn!==null&&Xs(Yn)&&(Yn=null),Qn!==null&&Xs(Qn)&&(Qn=null),Xn!==null&&Xs(Xn)&&(Xn=null),Ti.forEach(Ah),ji.forEach(Ah)}function Vs(e,t){e.blockedOn===t&&(e.blockedOn=null,go||(go=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Hv)))}var Ks=null;function Oh(e){Ks!==e&&(Ks=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ks===e&&(Ks=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(ho(a||n)===null)continue;break}var u=Ma(n);u!==null&&(e.splice(t,3),t-=3,du(u,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Ai(e){function t(b){return Vs(b,e)}Yn!==null&&Vs(Yn,e),Qn!==null&&Vs(Qn,e),Xn!==null&&Vs(Xn,e),Ti.forEach(t),ji.forEach(t);for(var n=0;n<Vn.length;n++){var a=Vn[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)xh(n),n.blockedOn===null&&Vn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],u=n[a+1],h=i[Ie]||null;if(typeof u=="function")h||Oh(n);else if(h){var v=null;if(u&&u.hasAttribute("formAction")){if(i=u,h=u[Ie]||null)v=h.formAction;else if(ho(i)!==null)continue}else v=h.action;typeof v=="function"?n[a+1]=v:(n.splice(a,3),a-=3),Oh(n)}}}function mo(e){this._internalRoot=e}Zs.prototype.render=mo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var n=t.current,a=Ot();wh(n,a,e,t,null,null)},Zs.prototype.unmount=mo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wh(e.current,2,null,e,null,null),Cs(),t[jn]=null}};function Zs(e){this._internalRoot=e}Zs.prototype.unstable_scheduleHydration=function(e){if(e){var t=na();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vn.length&&t!==0&&t<Vn[n].priority;n++);Vn.splice(n,0,e),n===0&&xh(e)}};var Ch=l.version;if(Ch!=="19.1.0")throw Error(s(527,Ch,"19.1.0"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Gv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Js.isDisabled&&Js.supportsFiber)try{G=Js.inject(Gv),P=Js}catch{}}return Ci.createRoot=function(e,t){if(!o(e))throw Error(s(299));var n=!1,a="",i=Xf,u=Vf,h=Kf,v=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(v=t.unstable_transitionCallbacks)),t=_h(e,1,!1,null,null,n,a,i,u,h,v,null),e[jn]=t.current,Pu(e),new mo(t)},Ci.hydrateRoot=function(e,t,n){if(!o(e))throw Error(s(299));var a=!1,i="",u=Xf,h=Vf,v=Kf,b=null,A=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(b=n.unstable_transitionCallbacks),n.formState!==void 0&&(A=n.formState)),t=_h(e,1,!0,t,n??null,a,i,u,h,v,b,A),t.context=bh(null),n=t.current,a=Ot(),a=Sn(a),i=Cn(a),i.callback=null,Rn(n,i,a),n=a,t.current.lanes=n,$t(t,n),tn(t),e[jn]=t.current,Pu(e),new Zs(t)},Ci.version="19.1.0",Ci}var Lh;function Wv(){if(Lh)return po.exports;Lh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(l){console.error(l)}}return c(),po.exports=Iv(),po.exports}var ey=Wv();const ty="modulepreload",ny=function(c){return"/"+c},Hh={},In=function(l,r,s){let o=Promise.resolve();if(r&&r.length>0){let g=function(_){return Promise.all(_.map(T=>Promise.resolve(T).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var d=g;document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),m=y?.nonce||y?.getAttribute("nonce");o=g(r.map(_=>{if(_=ny(_),_ in Hh)return;Hh[_]=!0;const T=_.endsWith(".css"),x=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${x}`))return;const U=document.createElement("link");if(U.rel=T?"stylesheet":ty,T||(U.as="script"),U.crossOrigin="",U.href=_,m&&U.setAttribute("nonce",m),document.head.appendChild(U),T)return new Promise((H,q)=>{U.addEventListener("load",H),U.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${_}`)))})}))}function f(y){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=y,window.dispatchEvent(m),!m.defaultPrevented)throw y}return o.then(y=>{for(const m of y||[])m.status==="rejected"&&f(m.reason);return l().catch(f)})},gg=te.forwardRef(({isDrawing:c,activeShapePoints:l,currentLayer:r,isPlacingObject:s,onDrawingStateChange:o,onBuildingClick:f,onObjectPositionSelect:d},y)=>{const m=te.useRef(null),g=te.useRef(null),_=te.useRef(null),T=te.useRef([]),x=te.useRef([]),U=te.useRef(!1),H=te.useRef(null),q=te.useRef(null);te.useImperativeHandle(y,()=>({viewer:g.current,getActivePoints:()=>x.current,displayBuildings:N=>{g.current&&!g.current.isDestroyed()&&console.log("מוכן להציג בניינים שמורים")},startDrawing:()=>{console.log("=== STARTING DRAWING ==="),U.current=!0,x.current=[],T.current=[],g.current&&g.current.entities.removeAll(),o(!0,[],null,null,"Click to add points. Right-click to finish."),o(!0,[],null,null,"לחץ להוספת נקודות. לחיצה ימנית לסיום.")},finishDrawing:()=>{console.log("Finishing drawing with points:",x.current.length),x.current.length>=3&&B()},cancelDrawing:()=>{console.log("Canceling drawing..."),U.current=!1,g.current&&g.current.entities.removeAll(),T.current=[],x.current=[],H.current=null,q.current=null,o(!1,[],null,null,"Drawing cancelled. Click 'Start Drawing' to begin."),o(!1,[],null,null,"הציור בוטל. לחץ על 'התחל ציור' כדי להתחיל.")},clearAll:()=>{console.log("Clearing all..."),g.current&&g.current.entities.removeAll(),T.current=[],x.current=[],H.current=null,q.current=null,U.current=!1},hasCompletedPolygon:()=>x.current.length>=3&&!U.current,add3DModel:N=>{if(g.current&&!g.current.isDestroyed()&&N.file_url){const z=window.Cesium.Cartesian3.fromDegrees(N.longitude,N.latitude,N.height||0),V=window.Cesium.Math.toRadians(N.rotation.y),$=window.Cesium.Math.toRadians(N.rotation.x),F=window.Cesium.Math.toRadians(N.rotation.z),Y=window.Cesium.Transforms.headingPitchRollQuaternion(z,new window.Cesium.HeadingPitchRoll(V,$,F)),W=g.current.entities.add({position:z,orientation:Y,model:{uri:N.file_url,scale:new window.Cesium.Cartesian3(N.scale.x,N.scale.y,N.scale.z)}});console.log("Added 3D model to the scene:",W)}}}));const B=()=>{if(console.log("=== TERMINATING SHAPE (RIGHT-CLICK) ==="),console.log("Points before termination:",x.current.length),x.current.length<3){console.log("Not enough points to create shape");return}const N=[...x.current];if(console.log("✅ Completed points stored:",N.length),U.current=!1,q.current&&g.current&&(g.current.entities.remove(q.current),q.current=null),H.current&&g.current&&(g.current.entities.remove(H.current),H.current=null),g.current){const V=g.current.entities.add({id:"completed-polygon",polygon:{hierarchy:new window.Cesium.PolygonHierarchy(N),material:window.Cesium.Color.BLUE.withAlpha(.3),outline:!0,outlineColor:window.Cesium.Color.BLUE,extrudedHeight:0}});console.log("Final polygon created:",V)}console.log("✅ Points preserved in activePointsRef:",x.current.length);const z=`מתאר הושלם עם ${N.length} נקודות. הכנס פקודת AI ולחץ על "צור בניין".`;console.log("✅ Calling onDrawingStateChange with:",N.length,"points"),o(!1,N,null,null,z),console.log("=== SHAPE TERMINATED SUCCESSFULLY ===")},Q=N=>{if(!g.current)return;const z=g.current;N.length<2||H.current||(H.current=z.entities.add({polygon:{hierarchy:new window.Cesium.CallbackProperty(()=>new window.Cesium.PolygonHierarchy(N),!1),material:window.Cesium.Color.YELLOW.withAlpha(.3),outline:!0,outlineColor:window.Cesium.Color.YELLOW}}))};return te.useEffect(()=>{if(!m.current)return;console.log("Initializing Cesium viewer..."),window.Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI4MWJmN2FlOC0wZjQ2LTRlMTUtYTExYS04YzMyYWVjNmUyNzMiLCJpZCI6MjI1NDgxLCJpYXQiOjE3NDA4MzE1Mzd9.o7sSlzZ3eyDevQejh5Q3zxlVpHfM4vX-49UTlwoCJkw";const N=new window.Cesium.Viewer(m.current,{imageryProvider:new window.Cesium.UrlTemplateImageryProvider({url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],credit:new window.Cesium.Credit('<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>',!1)}),infoBox:!1,selectionIndicator:!1,shouldAnimate:!0,terrainProvider:new window.Cesium.EllipsoidTerrainProvider});g.current=N,console.log("Cesium viewer created"),(async()=>{try{if(!N||N.isDestroyed())return;const $=await window.Cesium.createOsmBuildingsAsync();if(!N||N.isDestroyed()||(N.scene.primitives.add($),$.style=new window.Cesium.Cesium3DTileStyle({color:{conditions:[["Number(${height}) >= 100",'color("#FFC107")'],["Number(${height}) >= 50",'color("#FF9800")'],["Number(${height}) >= 25",'color("#FF5722")'],["Number(${height}) >= 10",'color("#F44336")'],["true",'color("#BDBDBD")']]}}),!N||N.isDestroyed()))return;await N.camera.flyTo({destination:window.Cesium.Cartesian3.fromDegrees(34.7818,32.0853,2500),orientation:{heading:window.Cesium.Math.toRadians(0),pitch:window.Cesium.Math.toRadians(-45)}}),console.log("Scene initialized successfully")}catch($){console.error("Failed to load scene assets: ",$)}})();const V=new window.Cesium.ScreenSpaceEventHandler(N.canvas);return _.current=V,V.setInputAction($=>{if(console.log("🖱️ Left click detected"),console.log("- isDrawing:",U.current),console.log("- isPlacingObject:",s),s){console.log("🎯 Processing object placement click");const F=N.camera.pickEllipsoid($.position,N.scene.globe.ellipsoid);if(window.Cesium.defined(F)){const Y=window.Cesium.Cartographic.fromCartesian(F),W=window.Cesium.Math.toDegrees(Y.longitude),ke=window.Cesium.Math.toDegrees(Y.latitude),Ve=Y.height;console.log("✅ Position calculated:",{longitude:W,latitude:ke,height:Ve}),d?(console.log("📞 Calling onObjectPositionSelect"),d({longitude:W,latitude:ke,height:Ve})):console.error("❌ onObjectPositionSelect is not defined")}else console.log("❌ Could not calculate earth position");return}if(U.current){const F=N.camera.pickEllipsoid($.position,N.scene.globe.ellipsoid);if(window.Cesium.defined(F)){console.log("Adding point at:",F),x.current.push(F),console.log("Total points now:",x.current.length);const Y=N.entities.add({position:F,point:{color:window.Cesium.Color.YELLOW,pixelSize:12,outlineColor:window.Cesium.Color.BLACK,outlineWidth:2,heightReference:window.Cesium.HeightReference.CLAMP_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY}});T.current.push(Y),Q(x.current);const W=`נוספה נקודה ${x.current.length}. ${x.current.length>=3?"לחיצה ימנית לסיום.":"המשך להוסיף נקודות."}`;o(!0,[...x.current],null,null,W)}}if(!s&&!U.current){const F=N.scene.pick($.position);if(console.log("Picked object:",F),window.Cesium.defined(F)&&window.Cesium.defined(F.id)){const Y=F.id;console.log("Clicked entity:",Y.id,"isBuilding:",Y.isBuilding);const W={x:$.position.x,y:$.position.y};Y.isBuilding?(console.log("Clicked on building:",Y.id),f(Y,W)):Y.parent&&Y.parent.isBuilding?(console.log("Clicked on floor, parent building:",Y.parent.id),f(Y.parent,W)):Y.id&&Y.id.includes("building-")&&(console.log("Clicked on building entity:",Y.id),f(Y,W))}}},window.Cesium.ScreenSpaceEventType.LEFT_CLICK),V.setInputAction($=>{console.log("Right click - isDrawing:",U.current,"points:",x.current.length),U.current&&x.current.length>=3&&(console.log("Terminating shape via right click"),B())},window.Cesium.ScreenSpaceEventType.RIGHT_CLICK),V.setInputAction($=>{if(U.current&&x.current.length>0){const F=N.camera.pickEllipsoid($.endPosition,N.scene.globe.ellipsoid);window.Cesium.defined(F)&&(q.current?q.current.position=F:q.current=N.entities.add({position:F,point:{color:window.Cesium.Color.YELLOW.withAlpha(.7),pixelSize:8,heightReference:window.Cesium.HeightReference.CLAMP_TO_GROUND}}))}},window.Cesium.ScreenSpaceEventType.MOUSE_MOVE),()=>{console.log("Cleaning up Cesium viewer..."),_.current&&(_.current.destroy(),_.current=null),g.current&&(g.current.destroy(),g.current=null)}},[]),te.useEffect(()=>{if(g.current&&!g.current.isDestroyed()){const N=V=>{switch(V){case"aerial":return new window.Cesium.IonImageryProvider({assetId:2});case"f4":return new window.Cesium.UrlTemplateImageryProvider({url:"https://tile.f4map.com/tiles/f4_2d/{z}/{x}/{y}.png",credit:new window.Cesium.Credit("F4 Map",!1)});default:return new window.Cesium.UrlTemplateImageryProvider({url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],credit:new window.Cesium.Credit('<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>',!1)})}},z=g.current;z.imageryLayers.removeAll(),z.imageryLayers.addImageryProvider(N(r))}},[r]),p.jsx("div",{ref:m,id:"cesiumContainer"})});gg.displayName="CesiumViewer";const ay=({isDrawing:c,statusMessage:l,aiCommand:r,onAiCommandChange:s,onStartDrawing:o,onCreateBuilding:f,canCreate:d,onToggle:y})=>{const[m,g]=te.useState(!1);return p.jsxs("div",{id:"ai-controls",className:m?"minimized":"",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h3",{children:"🏗️ יוצר בניינים חכם"}),p.jsxs("div",{className:"panel-controls",children:[p.jsx("button",{className:"panel-btn minimize-btn",onClick:()=>g(!m),title:m?"הרחב":"הקטן",children:"▼"}),p.jsx("button",{className:"panel-btn",onClick:()=>y&&y(!1),title:"הסתר",children:"✕"})]})]}),p.jsxs("div",{className:"panel-content",children:[p.jsx("button",{id:"draw-button",className:c?"drawing":"",onClick:o,children:c?"סיים ציור":"התחל ציור"}),p.jsx("p",{id:"status-message",children:l}),p.jsx("input",{type:"text",id:"ai-command",placeholder:"לדוגמה: 'תעשה אותו בגובה 15 קומות'",value:r,onChange:_=>s(_.target.value)}),p.jsx("button",{id:"create-button",disabled:!d,onClick:f,children:"צור בניין"})]})]})},ly=c=>{let l;return c?l=c:typeof fetch>"u"?l=(...r)=>In(async()=>{const{default:s}=await Promise.resolve().then(()=>Rl);return{default:s}},void 0).then(({default:s})=>s(...r)):l=fetch,(...r)=>l(...r)};class Ho extends Error{constructor(l,r="FunctionsError",s){super(l),this.name=r,this.context=s}}class iy extends Ho{constructor(l){super("Failed to send a request to the Edge Function","FunctionsFetchError",l)}}class Gh extends Ho{constructor(l){super("Relay Error invoking the Edge Function","FunctionsRelayError",l)}}class $h extends Ho{constructor(l){super("Edge Function returned a non-2xx status code","FunctionsHttpError",l)}}var Ro;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(Ro||(Ro={}));var sy=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};class ry{constructor(l,{headers:r={},customFetch:s,region:o=Ro.Any}={}){this.url=l,this.headers=r,this.region=o,this.fetch=ly(s)}setAuth(l){this.headers.Authorization=`Bearer ${l}`}invoke(l,r={}){var s;return sy(this,void 0,void 0,function*(){try{const{headers:o,method:f,body:d}=r;let y={},{region:m}=r;m||(m=this.region);const g=new URL(`${this.url}/${l}`);m&&m!=="any"&&(y["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let _;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=d):typeof d=="string"?(y["Content-Type"]="text/plain",_=d):typeof FormData<"u"&&d instanceof FormData?_=d:(y["Content-Type"]="application/json",_=JSON.stringify(d)));const T=yield this.fetch(g.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),o),body:_}).catch(q=>{throw new iy(q)}),x=T.headers.get("x-relay-error");if(x&&x==="true")throw new Gh(T);if(!T.ok)throw new $h(T);let U=((s=T.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),H;return U==="application/json"?H=yield T.json():U==="application/octet-stream"?H=yield T.blob():U==="text/event-stream"?H=T:U==="multipart/form-data"?H=yield T.formData():H=yield T.text(),{data:H,error:null,response:T}}catch(o){return{data:null,error:o,response:o instanceof $h||o instanceof Gh?o.context:void 0}}})}}var st={},vl={},yl={},pl={},_l={},bl={},uy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cl=uy();const oy=Cl.fetch,mg=Cl.fetch.bind(Cl),vg=Cl.Headers,cy=Cl.Request,fy=Cl.Response,Rl=Object.freeze(Object.defineProperty({__proto__:null,Headers:vg,Request:cy,Response:fy,default:mg,fetch:oy},Symbol.toStringTag,{value:"Module"})),dy=Qv(Rl);var Ps={},Yh;function yg(){if(Yh)return Ps;Yh=1,Object.defineProperty(Ps,"__esModule",{value:!0});class c extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Ps.default=c,Ps}var Qh;function pg(){if(Qh)return bl;Qh=1;var c=bl&&bl.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(bl,"__esModule",{value:!0});const l=c(dy),r=c(yg());class s{constructor(f){this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=f.headers,this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=f.shouldThrowOnError,this.signal=f.signal,this.isMaybeSingle=f.isMaybeSingle,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=l.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,d){return this.headers=Object.assign({},this.headers),this.headers[f]=d,this}then(f,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const y=this.fetch;let m=y(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var _,T,x;let U=null,H=null,q=null,B=g.status,Q=g.statusText;if(g.ok){if(this.method!=="HEAD"){const $=await g.text();$===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?H=$:H=JSON.parse($))}const z=(_=this.headers.Prefer)===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),V=(T=g.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");z&&V&&V.length>1&&(q=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(H)&&(H.length>1?(U={code:"PGRST116",details:`Results contain ${H.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},H=null,q=null,B=406,Q="Not Acceptable"):H.length===1?H=H[0]:H=null)}else{const z=await g.text();try{U=JSON.parse(z),Array.isArray(U)&&g.status===404&&(H=[],U=null,B=200,Q="OK")}catch{g.status===404&&z===""?(B=204,Q="No Content"):U={message:z}}if(U&&this.isMaybeSingle&&(!((x=U?.details)===null||x===void 0)&&x.includes("0 rows"))&&(U=null,B=200,Q="OK"),U&&this.shouldThrowOnError)throw new r.default(U)}return{error:U,data:H,count:q,status:B,statusText:Q}});return this.shouldThrowOnError||(m=m.catch(g=>{var _,T,x;return{error:{message:`${(_=g?.name)!==null&&_!==void 0?_:"FetchError"}: ${g?.message}`,details:`${(T=g?.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(x=g?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),m.then(f,d)}returns(){return this}overrideTypes(){return this}}return bl.default=s,bl}var Xh;function _g(){if(Xh)return _l;Xh=1;var c=_l&&_l.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_l,"__esModule",{value:!0});const l=c(pg());class r extends l.default{select(o){let f=!1;const d=(o??"*").split("").map(y=>/\s/.test(y)&&!f?"":(y==='"'&&(f=!f),y)).join("");return this.url.searchParams.set("select",d),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:f=!0,nullsFirst:d,foreignTable:y,referencedTable:m=y}={}){const g=m?`${m}.order`:"order",_=this.url.searchParams.get(g);return this.url.searchParams.set(g,`${_?`${_},`:""}${o}.${f?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:f,referencedTable:d=f}={}){const y=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(y,`${o}`),this}range(o,f,{foreignTable:d,referencedTable:y=d}={}){const m=typeof y>"u"?"offset":`${y}.offset`,g=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(m,`${o}`),this.url.searchParams.set(g,`${f-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:f=!1,settings:d=!1,buffers:y=!1,wal:m=!1,format:g="text"}={}){var _;const T=[o?"analyze":null,f?"verbose":null,d?"settings":null,y?"buffers":null,m?"wal":null].filter(Boolean).join("|"),x=(_=this.headers.Accept)!==null&&_!==void 0?_:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${g}; for="${x}"; options=${T};`,g==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return _l.default=r,_l}var Vh;function Go(){if(Vh)return pl;Vh=1;var c=pl&&pl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pl,"__esModule",{value:!0});const l=c(_g());class r extends l.default{eq(o,f){return this.url.searchParams.append(o,`eq.${f}`),this}neq(o,f){return this.url.searchParams.append(o,`neq.${f}`),this}gt(o,f){return this.url.searchParams.append(o,`gt.${f}`),this}gte(o,f){return this.url.searchParams.append(o,`gte.${f}`),this}lt(o,f){return this.url.searchParams.append(o,`lt.${f}`),this}lte(o,f){return this.url.searchParams.append(o,`lte.${f}`),this}like(o,f){return this.url.searchParams.append(o,`like.${f}`),this}likeAllOf(o,f){return this.url.searchParams.append(o,`like(all).{${f.join(",")}}`),this}likeAnyOf(o,f){return this.url.searchParams.append(o,`like(any).{${f.join(",")}}`),this}ilike(o,f){return this.url.searchParams.append(o,`ilike.${f}`),this}ilikeAllOf(o,f){return this.url.searchParams.append(o,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(o,f){return this.url.searchParams.append(o,`ilike(any).{${f.join(",")}}`),this}is(o,f){return this.url.searchParams.append(o,`is.${f}`),this}in(o,f){const d=Array.from(new Set(f)).map(y=>typeof y=="string"&&new RegExp("[,()]").test(y)?`"${y}"`:`${y}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,f){return typeof f=="string"?this.url.searchParams.append(o,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(o,`cs.{${f.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(f)}`),this}containedBy(o,f){return typeof f=="string"?this.url.searchParams.append(o,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(o,`cd.{${f.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(f)}`),this}rangeGt(o,f){return this.url.searchParams.append(o,`sr.${f}`),this}rangeGte(o,f){return this.url.searchParams.append(o,`nxl.${f}`),this}rangeLt(o,f){return this.url.searchParams.append(o,`sl.${f}`),this}rangeLte(o,f){return this.url.searchParams.append(o,`nxr.${f}`),this}rangeAdjacent(o,f){return this.url.searchParams.append(o,`adj.${f}`),this}overlaps(o,f){return typeof f=="string"?this.url.searchParams.append(o,`ov.${f}`):this.url.searchParams.append(o,`ov.{${f.join(",")}}`),this}textSearch(o,f,{config:d,type:y}={}){let m="";y==="plain"?m="pl":y==="phrase"?m="ph":y==="websearch"&&(m="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${m}fts${g}.${f}`),this}match(o){return Object.entries(o).forEach(([f,d])=>{this.url.searchParams.append(f,`eq.${d}`)}),this}not(o,f,d){return this.url.searchParams.append(o,`not.${f}.${d}`),this}or(o,{foreignTable:f,referencedTable:d=f}={}){const y=d?`${d}.or`:"or";return this.url.searchParams.append(y,`(${o})`),this}filter(o,f,d){return this.url.searchParams.append(o,`${f}.${d}`),this}}return pl.default=r,pl}var Kh;function bg(){if(Kh)return yl;Kh=1;var c=yl&&yl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yl,"__esModule",{value:!0});const l=c(Go());class r{constructor(o,{headers:f={},schema:d,fetch:y}){this.url=o,this.headers=f,this.schema=d,this.fetch=y}select(o,{head:f=!1,count:d}={}){const y=f?"HEAD":"GET";let m=!1;const g=(o??"*").split("").map(_=>/\s/.test(_)&&!m?"":(_==='"'&&(m=!m),_)).join("");return this.url.searchParams.set("select",g),d&&(this.headers.Prefer=`count=${d}`),new l.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:f,defaultToNull:d=!0}={}){const y="POST",m=[];if(this.headers.Prefer&&m.push(this.headers.Prefer),f&&m.push(`count=${f}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(o)){const g=o.reduce((_,T)=>_.concat(Object.keys(T)),[]);if(g.length>0){const _=[...new Set(g)].map(T=>`"${T}"`);this.url.searchParams.set("columns",_.join(","))}}return new l.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:f,ignoreDuplicates:d=!1,count:y,defaultToNull:m=!0}={}){const g="POST",_=[`resolution=${d?"ignore":"merge"}-duplicates`];if(f!==void 0&&this.url.searchParams.set("on_conflict",f),this.headers.Prefer&&_.push(this.headers.Prefer),y&&_.push(`count=${y}`),m||_.push("missing=default"),this.headers.Prefer=_.join(","),Array.isArray(o)){const T=o.reduce((x,U)=>x.concat(Object.keys(U)),[]);if(T.length>0){const x=[...new Set(T)].map(U=>`"${U}"`);this.url.searchParams.set("columns",x.join(","))}}return new l.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:f}={}){const d="PATCH",y=[];return this.headers.Prefer&&y.push(this.headers.Prefer),f&&y.push(`count=${f}`),this.headers.Prefer=y.join(","),new l.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const f="DELETE",d=[];return o&&d.push(`count=${o}`),this.headers.Prefer&&d.unshift(this.headers.Prefer),this.headers.Prefer=d.join(","),new l.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return yl.default=r,yl}var Ri={},Di={},Zh;function hy(){return Zh||(Zh=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.version=void 0,Di.version="0.0.0-automated"),Di}var Jh;function gy(){if(Jh)return Ri;Jh=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.DEFAULT_HEADERS=void 0;const c=hy();return Ri.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c.version}`},Ri}var Ph;function my(){if(Ph)return vl;Ph=1;var c=vl&&vl.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(vl,"__esModule",{value:!0});const l=c(bg()),r=c(Go()),s=gy();class o{constructor(d,{headers:y={},schema:m,fetch:g}={}){this.url=d,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),y),this.schemaName=m,this.fetch=g}from(d){const y=new URL(`${this.url}/${d}`);return new l.default(y,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new o(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,y={},{head:m=!1,get:g=!1,count:_}={}){let T;const x=new URL(`${this.url}/rpc/${d}`);let U;m||g?(T=m?"HEAD":"GET",Object.entries(y).filter(([q,B])=>B!==void 0).map(([q,B])=>[q,Array.isArray(B)?`{${B.join(",")}}`:`${B}`]).forEach(([q,B])=>{x.searchParams.append(q,B)})):(T="POST",U=y);const H=Object.assign({},this.headers);return _&&(H.Prefer=`count=${_}`),new r.default({method:T,url:x,headers:H,schema:this.schemaName,body:U,fetch:this.fetch,allowEmpty:!1})}}return vl.default=o,vl}var Fh;function vy(){if(Fh)return st;Fh=1;var c=st&&st.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(st,"__esModule",{value:!0}),st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const l=c(my());st.PostgrestClient=l.default;const r=c(bg());st.PostgrestQueryBuilder=r.default;const s=c(Go());st.PostgrestFilterBuilder=s.default;const o=c(_g());st.PostgrestTransformBuilder=o.default;const f=c(pg());st.PostgrestBuilder=f.default;const d=c(yg());return st.PostgrestError=d.default,st.default={PostgrestClient:l.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:f.default,PostgrestError:d.default},st}var yy=vy();const py=Yv(yy),{PostgrestClient:_y,PostgrestQueryBuilder:hp,PostgrestFilterBuilder:gp,PostgrestTransformBuilder:mp,PostgrestBuilder:vp,PostgrestError:yp}=py;function by(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const wy=by(),Sy="2.11.15",Ey=`realtime-js/${Sy}`,Ty="1.0.0",wg=1e4,jy=1e3;var Mi;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(Mi||(Mi={}));var gt;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(gt||(gt={}));var Kt;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(Kt||(Kt={}));var Do;(function(c){c.websocket="websocket"})(Do||(Do={}));var Ea;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(Ea||(Ea={}));class xy{constructor(){this.HEADER_LENGTH=1}decode(l,r){return l.constructor===ArrayBuffer?r(this._binaryDecode(l)):r(typeof l=="string"?JSON.parse(l):{})}_binaryDecode(l){const r=new DataView(l),s=new TextDecoder;return this._decodeBroadcast(l,r,s)}_decodeBroadcast(l,r,s){const o=r.getUint8(1),f=r.getUint8(2);let d=this.HEADER_LENGTH+2;const y=s.decode(l.slice(d,d+o));d=d+o;const m=s.decode(l.slice(d,d+f));d=d+f;const g=JSON.parse(s.decode(l.slice(d,l.byteLength)));return{ref:null,topic:y,event:m,payload:g}}}class Sg{constructor(l,r){this.callback=l,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=l,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(Le||(Le={}));const Ih=(c,l,r={})=>{var s;const o=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(l).reduce((f,d)=>(f[d]=Ay(d,c,l,o),f),{})},Ay=(c,l,r,s)=>{const o=l.find(y=>y.name===c),f=o?.type,d=r[c];return f&&!s.includes(f)?Eg(f,d):Uo(d)},Eg=(c,l)=>{if(c.charAt(0)==="_"){const r=c.slice(1,c.length);return Dy(l,r)}switch(c){case Le.bool:return Oy(l);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return Cy(l);case Le.json:case Le.jsonb:return Ry(l);case Le.timestamp:return Uy(l);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Uo(l);default:return Uo(l)}},Uo=c=>c,Oy=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},Cy=c=>{if(typeof c=="string"){const l=parseFloat(c);if(!Number.isNaN(l))return l}return c},Ry=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch(l){return console.log(`JSON parse error: ${l}`),c}return c},Dy=(c,l)=>{if(typeof c!="string")return c;const r=c.length-1,s=c[r];if(c[0]==="{"&&s==="}"){let f;const d=c.slice(1,r);try{f=JSON.parse("["+d+"]")}catch{f=d?d.split(","):[]}return f.map(y=>Eg(l,y))}return c},Uy=c=>typeof c=="string"?c.replace(" ","T"):c,Tg=c=>{let l=c;return l=l.replace(/^ws/i,"http"),l=l.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),l.replace(/\/+$/,"")};class So{constructor(l,r,s={},o=wg){this.channel=l,this.event=r,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(l){this.timeout=l,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(l){this.payload=Object.assign(Object.assign({},this.payload),l)}receive(l,r){var s;return this._hasReceived(l)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:l,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const l=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},l),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(l,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:l,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:l,response:r}){this.recHooks.filter(s=>s.status===l).forEach(s=>s.callback(r))}_hasReceived(l){return this.receivedResp&&this.receivedResp.status===l}}var Wh;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(Wh||(Wh={}));class Ni{constructor(l,r){this.channel=l,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:f,onLeave:d,onSync:y}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ni.syncState(this.state,o,f,d),this.pendingDiffs.forEach(m=>{this.state=Ni.syncDiff(this.state,m,f,d)}),this.pendingDiffs=[],y()}),this.channel._on(s.diff,{},o=>{const{onJoin:f,onLeave:d,onSync:y}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ni.syncDiff(this.state,o,f,d),y())}),this.onJoin((o,f,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:f,newPresences:d})}),this.onLeave((o,f,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:f,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(l,r,s,o){const f=this.cloneDeep(l),d=this.transformState(r),y={},m={};return this.map(f,(g,_)=>{d[g]||(m[g]=_)}),this.map(d,(g,_)=>{const T=f[g];if(T){const x=_.map(B=>B.presence_ref),U=T.map(B=>B.presence_ref),H=_.filter(B=>U.indexOf(B.presence_ref)<0),q=T.filter(B=>x.indexOf(B.presence_ref)<0);H.length>0&&(y[g]=H),q.length>0&&(m[g]=q)}else y[g]=_}),this.syncDiff(f,{joins:y,leaves:m},s,o)}static syncDiff(l,r,s,o){const{joins:f,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(f,(y,m)=>{var g;const _=(g=l[y])!==null&&g!==void 0?g:[];if(l[y]=this.cloneDeep(m),_.length>0){const T=l[y].map(U=>U.presence_ref),x=_.filter(U=>T.indexOf(U.presence_ref)<0);l[y].unshift(...x)}s(y,_,m)}),this.map(d,(y,m)=>{let g=l[y];if(!g)return;const _=m.map(T=>T.presence_ref);g=g.filter(T=>_.indexOf(T.presence_ref)<0),l[y]=g,o(y,g,m),g.length===0&&delete l[y]}),l}static map(l,r){return Object.getOwnPropertyNames(l).map(s=>r(s,l[s]))}static transformState(l){return l=this.cloneDeep(l),Object.getOwnPropertyNames(l).reduce((r,s)=>{const o=l[s];return"metas"in o?r[s]=o.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):r[s]=o,r},{})}static cloneDeep(l){return JSON.parse(JSON.stringify(l))}onJoin(l){this.caller.onJoin=l}onLeave(l){this.caller.onLeave=l}onSync(l){this.caller.onSync=l}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var eg;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(eg||(eg={}));var tg;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(tg||(tg={}));var bn;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})(bn||(bn={}));class $o{constructor(l,r={config:{}},s){this.topic=l,this.params=r,this.socket=s,this.bindings={},this.state=gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=l.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new So(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new Sg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(o,f)=>{this._trigger(this._replyEventName(f),o)}),this.presence=new Ni(this),this.broadcastEndpointURL=Tg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(l,r=this.timeout){var s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==gt.closed){const{config:{broadcast:f,presence:d,private:y}}=this.params;this._onError(_=>l?.(bn.CHANNEL_ERROR,_)),this._onClose(()=>l?.(bn.CLOSED));const m={},g={broadcast:f,presence:d,postgres_changes:(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&o!==void 0?o:[],private:y};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:_})=>{var T;if(this.socket.setAuth(),_===void 0){l?.(bn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,U=(T=x?.length)!==null&&T!==void 0?T:0,H=[];for(let q=0;q<U;q++){const B=x[q],{filter:{event:Q,schema:N,table:z,filter:V}}=B,$=_&&_[q];if($&&$.event===Q&&$.schema===N&&$.table===z&&$.filter===V)H.push(Object.assign(Object.assign({},B),{id:$.id}));else{this.unsubscribe(),this.state=gt.errored,l?.(bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,l&&l(bn.SUBSCRIBED);return}}).receive("error",_=>{this.state=gt.errored,l?.(bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{l?.(bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(l,r={}){return await this.send({type:"presence",event:"track",payload:l},r.timeout||this.timeout)}async untrack(l={}){return await this.send({type:"presence",event:"untrack"},l)}on(l,r,s){return this._on(l,r,s)}async send(l,r={}){var s,o;if(!this._canPush()&&l.type==="broadcast"){const{event:f,payload:d}=l,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var d,y,m;const g=this._push(l.type,l,r.timeout||this.timeout);l.type==="broadcast"&&!(!((m=(y=(d=this.params)===null||d===void 0?void 0:d.config)===null||y===void 0?void 0:y.broadcast)===null||m===void 0)&&m.ack)&&f("ok"),g.receive("ok",()=>f("ok")),g.receive("error",()=>f("error")),g.receive("timeout",()=>f("timed out"))})}updateJoinPayload(l){this.joinPush.updatePayload(l)}unsubscribe(l=this.timeout){this.state=gt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new So(this,Kt.leave,{},l),s.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(l=>l.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(l,r,s){const o=new AbortController,f=setTimeout(()=>o.abort(),s),d=await this.socket.fetch(l,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(f),d}_push(l,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${l}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new So(this,l,r,s);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(l,r,s){return r}_isMember(l){return this.topic===l}_joinRef(){return this.joinPush.ref}_trigger(l,r,s){var o,f;const d=l.toLocaleLowerCase(),{close:y,error:m,leave:g,join:_}=Kt;if(s&&[y,m,g,_].indexOf(d)>=0&&s!==this._joinRef())return;let x=this._onMessage(d,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(U=>{var H,q,B;return((H=U.filter)===null||H===void 0?void 0:H.event)==="*"||((B=(q=U.filter)===null||q===void 0?void 0:q.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===d}).map(U=>U.callback(x,s)):(f=this.bindings[d])===null||f===void 0||f.filter(U=>{var H,q,B,Q,N,z;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in U){const V=U.id,$=(H=U.filter)===null||H===void 0?void 0:H.event;return V&&((q=r.ids)===null||q===void 0?void 0:q.includes(V))&&($==="*"||$?.toLocaleLowerCase()===((B=r.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const V=(N=(Q=U?.filter)===null||Q===void 0?void 0:Q.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return V==="*"||V===((z=r?.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return U.type.toLocaleLowerCase()===d}).map(U=>{if(typeof x=="object"&&"ids"in x){const H=x.data,{schema:q,table:B,commit_timestamp:Q,type:N,errors:z}=H;x=Object.assign(Object.assign({},{schema:q,table:B,commit_timestamp:Q,eventType:N,new:{},old:{},errors:z}),this._getPayloadRecords(H))}U.callback(x,s)})}_isClosed(){return this.state===gt.closed}_isJoined(){return this.state===gt.joined}_isJoining(){return this.state===gt.joining}_isLeaving(){return this.state===gt.leaving}_replyEventName(l){return`chan_reply_${l}`}_on(l,r,s){const o=l.toLocaleLowerCase(),f={type:o,filter:r,callback:s};return this.bindings[o]?this.bindings[o].push(f):this.bindings[o]=[f],this}_off(l,r){const s=l.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(o=>{var f;return!(((f=o.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===s&&$o.isEqual(o.filter,r))}),this}static isEqual(l,r){if(Object.keys(l).length!==Object.keys(r).length)return!1;for(const s in l)if(l[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(l){this._on(Kt.close,{},l)}_onError(l){this._on(Kt.error,{},r=>l(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(l=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gt.joining,this.joinPush.resend(l))}_getPayloadRecords(l){const r={new:{},old:{}};return(l.type==="INSERT"||l.type==="UPDATE")&&(r.new=Ih(l.columns,l.record)),(l.type==="UPDATE"||l.type==="DELETE")&&(r.old=Ih(l.columns,l.old_record)),r}}const ng=()=>{},My=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ny{constructor(l,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ng,this.ref=0,this.logger=ng,this.conn=null,this.sendBuffer=[],this.serializer=new xy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=f=>{let d;return f?d=f:typeof fetch>"u"?d=(...y)=>In(async()=>{const{default:m}=await Promise.resolve().then(()=>Rl);return{default:m}},void 0).then(({default:m})=>m(...y)):d=fetch,(...y)=>d(...y)},this.endPoint=`${l}/${Do.websocket}`,this.httpEndpoint=Tg(l),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const o=(s=r?.params)===null||s===void 0?void 0:s.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:f=>[1e3,2e3,5e3,1e4][f-1]||1e4,this.encode=r?.encode?r.encode:(f,d)=>d(JSON.stringify(f)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Sg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=wy),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ty}))}disconnect(l,r){this.conn&&(this.conn.onclose=function(){},l?this.conn.close(l,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(l){const r=await l.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const l=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),l}log(l,r,s){this.logger(l,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Mi.connecting:return Ea.Connecting;case Mi.open:return Ea.Open;case Mi.closing:return Ea.Closing;default:return Ea.Closed}}isConnected(){return this.connectionState()===Ea.Open}channel(l,r={config:{}}){const s=`realtime:${l}`,o=this.getChannels().find(f=>f.topic===s);if(o)return o;{const f=new $o(`realtime:${l}`,r,this);return this.channels.push(f),f}}push(l){const{topic:r,event:s,payload:o,ref:f}=l,d=()=>{this.encode(l,y=>{var m;(m=this.conn)===null||m===void 0||m.send(y)})};this.log("push",`${r} ${s} (${f})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(l=null){let r=l||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const o={access_token:r,version:Ey};r&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(Kt.access_token,{access_token:r})}))}async sendHeartbeat(){var l;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(l=this.conn)===null||l===void 0||l.close(jy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(l){this.heartbeatCallback=l}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(l=>l()),this.sendBuffer=[])}_makeRef(){let l=this.ref+1;return l===this.ref?this.ref=0:this.ref=l,this.ref.toString()}_leaveOpenTopic(l){let r=this.channels.find(s=>s.topic===l&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${l}"`),r.unsubscribe())}_remove(l){this.channels=this.channels.filter(r=>r.topic!==l.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=l=>this._onConnError(l),this.conn.onmessage=l=>this._onConnMessage(l),this.conn.onclose=l=>this._onConnClose(l))}_onConnMessage(l){this.decode(l.data,r=>{let{topic:s,event:o,payload:f,ref:d}=r;s==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${f.status||""} ${s} ${o} ${d&&"("+d+")"||""}`,f),Array.from(this.channels).filter(y=>y._isMember(s)).forEach(y=>y._trigger(o,f,d)),this.stateChangeCallbacks.message.forEach(y=>y(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(l=>l())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const l=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(l),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(l){this.log("transport","close",l),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(l))}_onConnError(l){this.log("transport",`${l}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(l))}_triggerChanError(){this.channels.forEach(l=>l._trigger(Kt.error))}_appendParams(l,r){if(Object.keys(r).length===0)return l;const s=l.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${l}${s}${o}`}_workerObjectUrl(l){let r;if(l)r=l;else{const s=new Blob([My],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Yo extends Error{constructor(l){super(l),this.__isStorageError=!0,this.name="StorageError"}}function rt(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}class zy extends Yo{constructor(l,r){super(l),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Mo extends Yo{constructor(l,r){super(l),this.name="StorageUnknownError",this.originalError=r}}var ky=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};const jg=c=>{let l;return c?l=c:typeof fetch>"u"?l=(...r)=>In(async()=>{const{default:s}=await Promise.resolve().then(()=>Rl);return{default:s}},void 0).then(({default:s})=>s(...r)):l=fetch,(...r)=>l(...r)},By=()=>ky(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield In(()=>Promise.resolve().then(()=>Rl),void 0)).Response:Response}),No=c=>{if(Array.isArray(c))return c.map(r=>No(r));if(typeof c=="function"||c!==Object(c))return c;const l={};return Object.entries(c).forEach(([r,s])=>{const o=r.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));l[o]=No(s)}),l};var ja=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};const Eo=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),qy=(c,l,r)=>ja(void 0,void 0,void 0,function*(){const s=yield By();c instanceof s&&!r?.noResolveJson?c.json().then(o=>{l(new zy(Eo(o),c.status||500))}).catch(o=>{l(new Mo(Eo(o),o))}):l(new Mo(Eo(c),c))}),Ly=(c,l,r,s)=>{const o={method:c,headers:l?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},l?.headers),s&&(o.body=JSON.stringify(s)),Object.assign(Object.assign({},o),r))};function ki(c,l,r,s,o,f){return ja(this,void 0,void 0,function*(){return new Promise((d,y)=>{c(r,Ly(l,s,o,f)).then(m=>{if(!m.ok)throw m;return s?.noResolveJson?m:m.json()}).then(m=>d(m)).catch(m=>qy(m,y,s))})})}function er(c,l,r,s){return ja(this,void 0,void 0,function*(){return ki(c,"GET",l,r,s)})}function Pn(c,l,r,s,o){return ja(this,void 0,void 0,function*(){return ki(c,"POST",l,s,o,r)})}function Hy(c,l,r,s,o){return ja(this,void 0,void 0,function*(){return ki(c,"PUT",l,s,o,r)})}function Gy(c,l,r,s){return ja(this,void 0,void 0,function*(){return ki(c,"HEAD",l,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function xg(c,l,r,s,o){return ja(this,void 0,void 0,function*(){return ki(c,"DELETE",l,s,o,r)})}var wt=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};const $y={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ag={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Yy{constructor(l,r={},s,o){this.url=l,this.headers=r,this.bucketId=s,this.fetch=jg(o)}uploadOrUpdate(l,r,s,o){return wt(this,void 0,void 0,function*(){try{let f;const d=Object.assign(Object.assign({},ag),o);let y=Object.assign(Object.assign({},this.headers),l==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",d.cacheControl),m&&f.append("metadata",this.encodeMetadata(m)),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",d.cacheControl),m&&f.append("metadata",this.encodeMetadata(m))):(f=s,y["cache-control"]=`max-age=${d.cacheControl}`,y["content-type"]=d.contentType,m&&(y["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),o?.headers&&(y=Object.assign(Object.assign({},y),o.headers));const g=this._removeEmptyFolders(r),_=this._getFinalPath(g),T=yield this.fetch(`${this.url}/object/${_}`,Object.assign({method:l,body:f,headers:y},d?.duplex?{duplex:d.duplex}:{})),x=yield T.json();return T.ok?{data:{path:g,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(f){if(rt(f))return{data:null,error:f};throw f}})}upload(l,r,s){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",l,r,s)})}uploadToSignedUrl(l,r,s,o){return wt(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(l),d=this._getFinalPath(f),y=new URL(this.url+`/object/upload/sign/${d}`);y.searchParams.set("token",r);try{let m;const g=Object.assign({upsert:ag.upsert},o),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(g.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",g.cacheControl)):(m=s,_["cache-control"]=`max-age=${g.cacheControl}`,_["content-type"]=g.contentType);const T=yield this.fetch(y.toString(),{method:"PUT",body:m,headers:_}),x=yield T.json();return T.ok?{data:{path:f,fullPath:x.Key},error:null}:{data:null,error:x}}catch(m){if(rt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(l,r){return wt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(l);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const f=yield Pn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),d=new URL(this.url+f.url),y=d.searchParams.get("token");if(!y)throw new Yo("No token returned by API");return{data:{signedUrl:d.toString(),path:l,token:y},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}update(l,r,s){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",l,r,s)})}move(l,r,s){return wt(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:l,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}copy(l,r,s){return wt(this,void 0,void 0,function*(){try{return{data:{path:(yield Pn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:l,destinationKey:r,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}createSignedUrl(l,r,s){return wt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(l),f=yield Pn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${d}`)},{data:f,error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}createSignedUrls(l,r,s){return wt(this,void 0,void 0,function*(){try{const o=yield Pn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:l},{headers:this.headers}),f=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${f}`):null})),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}download(l,r){return wt(this,void 0,void 0,function*(){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(r?.transform||{}),d=f?`?${f}`:"";try{const y=this._getFinalPath(l);return{data:yield(yield er(this.fetch,`${this.url}/${o}/${y}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(y){if(rt(y))return{data:null,error:y};throw y}})}info(l){return wt(this,void 0,void 0,function*(){const r=this._getFinalPath(l);try{const s=yield er(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:No(s),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}exists(l){return wt(this,void 0,void 0,function*(){const r=this._getFinalPath(l);try{return yield Gy(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(rt(s)&&s instanceof Mo){const o=s.originalError;if([400,404].includes(o?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(l,r){const s=this._getFinalPath(l),o=[],f=r?.download?`download=${r.download===!0?"":r.download}`:"";f!==""&&o.push(f);const y=typeof r?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(r?.transform||{});m!==""&&o.push(m);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${y}/public/${s}${g}`)}}}remove(l){return wt(this,void 0,void 0,function*(){try{return{data:yield xg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:l},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}list(l,r,s){return wt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},$y),r),{prefix:l||""});return{data:yield Pn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(rt(o))return{data:null,error:o};throw o}})}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const r=[];return l.width&&r.push(`width=${l.width}`),l.height&&r.push(`height=${l.height}`),l.resize&&r.push(`resize=${l.resize}`),l.format&&r.push(`format=${l.format}`),l.quality&&r.push(`quality=${l.quality}`),r.join("&")}}const Qy="2.7.1",Xy={"X-Client-Info":`storage-js/${Qy}`};var wl=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};class Vy{constructor(l,r={},s){this.url=l,this.headers=Object.assign(Object.assign({},Xy),r),this.fetch=jg(s)}listBuckets(){return wl(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(l){if(rt(l))return{data:null,error:l};throw l}})}getBucket(l){return wl(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/bucket/${l}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}createBucket(l,r={public:!1}){return wl(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket`,{id:l,name:l,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}updateBucket(l,r){return wl(this,void 0,void 0,function*(){try{return{data:yield Hy(this.fetch,`${this.url}/bucket/${l}`,{id:l,name:l,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}})}emptyBucket(l){return wl(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/bucket/${l}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}deleteBucket(l){return wl(this,void 0,void 0,function*(){try{return{data:yield xg(this.fetch,`${this.url}/bucket/${l}`,{},{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}})}}class Ky extends Vy{constructor(l,r={},s){super(l,r,s)}from(l){return new Yy(this.url,this.headers,l,this.fetch)}}const Zy="2.52.1";let Ui="";typeof Deno<"u"?Ui="deno":typeof document<"u"?Ui="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ui="react-native":Ui="node";const Jy={"X-Client-Info":`supabase-js-${Ui}/${Zy}`},Py={headers:Jy},Fy={schema:"public"},Iy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wy={};var e0=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};const t0=c=>{let l;return c?l=c:typeof fetch>"u"?l=mg:l=fetch,(...r)=>l(...r)},n0=()=>typeof Headers>"u"?vg:Headers,a0=(c,l,r)=>{const s=t0(r),o=n0();return(f,d)=>e0(void 0,void 0,void 0,function*(){var y;const m=(y=yield l())!==null&&y!==void 0?y:c;let g=new o(d?.headers);return g.has("apikey")||g.set("apikey",c),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),s(f,Object.assign(Object.assign({},d),{headers:g}))})};var l0=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};function i0(c){return c.endsWith("/")?c:c+"/"}function s0(c,l){var r,s;const{db:o,auth:f,realtime:d,global:y}=c,{db:m,auth:g,realtime:_,global:T}=l,x={db:Object.assign(Object.assign({},m),o),auth:Object.assign(Object.assign({},g),f),realtime:Object.assign(Object.assign({},_),d),global:Object.assign(Object.assign(Object.assign({},T),y),{headers:Object.assign(Object.assign({},(r=T?.headers)!==null&&r!==void 0?r:{}),(s=y?.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>l0(this,void 0,void 0,function*(){return""})};return c.accessToken?x.accessToken=c.accessToken:delete x.accessToken,x}const Ag="2.71.1",xl=30*1e3,zo=3,To=zo*xl,r0="http://localhost:9999",u0="supabase.auth.token",o0={"X-Client-Info":`gotrue-js/${Ag}`},ko="X-Supabase-Api-Version",Og={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,f0=600*1e3;class Qo extends Error{constructor(l,r,s){super(l),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function he(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class d0 extends Qo{constructor(l,r,s){super(l,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function h0(c){return he(c)&&c.name==="AuthApiError"}class Cg extends Qo{constructor(l,r){super(l),this.name="AuthUnknownError",this.originalError=r}}class Wn extends Qo{constructor(l,r,s,o){super(l,s,o),this.name=r,this.status=s}}class Jn extends Wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function g0(c){return he(c)&&c.name==="AuthSessionMissingError"}class Fs extends Wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Is extends Wn{constructor(l){super(l,"AuthInvalidCredentialsError",400,void 0)}}class Ws extends Wn{constructor(l,r=null){super(l,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function m0(c){return he(c)&&c.name==="AuthImplicitGrantRedirectError"}class lg extends Wn{constructor(l,r=null){super(l,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bo extends Wn{constructor(l,r){super(l,"AuthRetryableFetchError",r,void 0)}}function jo(c){return he(c)&&c.name==="AuthRetryableFetchError"}class ig extends Wn{constructor(l,r,s){super(l,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class qo extends Wn{constructor(l){super(l,"AuthInvalidJwtError",400,"invalid_jwt")}}const tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sg=` 	
\r=`.split(""),v0=(()=>{const c=new Array(128);for(let l=0;l<c.length;l+=1)c[l]=-1;for(let l=0;l<sg.length;l+=1)c[sg[l].charCodeAt(0)]=-2;for(let l=0;l<tr.length;l+=1)c[tr[l].charCodeAt(0)]=l;return c})();function rg(c,l,r){if(c!==null)for(l.queue=l.queue<<8|c,l.queuedBits+=8;l.queuedBits>=6;){const s=l.queue>>l.queuedBits-6&63;r(tr[s]),l.queuedBits-=6}else if(l.queuedBits>0)for(l.queue=l.queue<<6-l.queuedBits,l.queuedBits=6;l.queuedBits>=6;){const s=l.queue>>l.queuedBits-6&63;r(tr[s]),l.queuedBits-=6}}function Rg(c,l,r){const s=v0[c];if(s>-1)for(l.queue=l.queue<<6|s,l.queuedBits+=6;l.queuedBits>=8;)r(l.queue>>l.queuedBits-8&255),l.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function ug(c){const l=[],r=d=>{l.push(String.fromCodePoint(d))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},f=d=>{_0(d,s,r)};for(let d=0;d<c.length;d+=1)Rg(c.charCodeAt(d),o,f);return l.join("")}function y0(c,l){if(c<=127){l(c);return}else if(c<=2047){l(192|c>>6),l(128|c&63);return}else if(c<=65535){l(224|c>>12),l(128|c>>6&63),l(128|c&63);return}else if(c<=1114111){l(240|c>>18),l(128|c>>12&63),l(128|c>>6&63),l(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function p0(c,l){for(let r=0;r<c.length;r+=1){let s=c.charCodeAt(r);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(c.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}y0(s,l)}}function _0(c,l,r){if(l.utf8seq===0){if(c<=127){r(c);return}for(let s=1;s<6;s+=1)if((c>>7-s&1)===0){l.utf8seq=s;break}if(l.utf8seq===2)l.codepoint=c&31;else if(l.utf8seq===3)l.codepoint=c&15;else if(l.utf8seq===4)l.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");l.utf8seq-=1}else if(l.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");l.codepoint=l.codepoint<<6|c&63,l.utf8seq-=1,l.utf8seq===0&&r(l.codepoint)}}function b0(c){const l=[],r={queue:0,queuedBits:0},s=o=>{l.push(o)};for(let o=0;o<c.length;o+=1)Rg(c.charCodeAt(o),r,s);return new Uint8Array(l)}function w0(c){const l=[];return p0(c,r=>l.push(r)),new Uint8Array(l)}function S0(c){const l=[],r={queue:0,queuedBits:0},s=o=>{l.push(o)};return c.forEach(o=>rg(o,r,s)),rg(null,r,s),l.join("")}function E0(c){return Math.round(Date.now()/1e3)+c}function T0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const l=Math.random()*16|0;return(c=="x"?l:l&3|8).toString(16)})}const Vt=()=>typeof window<"u"&&typeof document<"u",ba={tested:!1,writable:!1},Dg=()=>{if(!Vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ba.tested)return ba.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),ba.tested=!0,ba.writable=!0}catch{ba.tested=!0,ba.writable=!1}return ba.writable};function j0(c){const l={},r=new URL(c);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,f)=>{l[f]=o})}catch{}return r.searchParams.forEach((s,o)=>{l[o]=s}),l}const Ug=c=>{let l;return c?l=c:typeof fetch>"u"?l=(...r)=>In(async()=>{const{default:s}=await Promise.resolve().then(()=>Rl);return{default:s}},void 0).then(({default:s})=>s(...r)):l=fetch,(...r)=>l(...r)},x0=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",Al=async(c,l,r)=>{await c.setItem(l,JSON.stringify(r))},wa=async(c,l)=>{const r=await c.getItem(l);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zn=async(c,l)=>{await c.removeItem(l)};class nr{constructor(){this.promise=new nr.promiseConstructor((l,r)=>{this.resolve=l,this.reject=r})}}nr.promiseConstructor=Promise;function xo(c){const l=c.split(".");if(l.length!==3)throw new qo("Invalid JWT structure");for(let s=0;s<l.length;s++)if(!c0.test(l[s]))throw new qo("JWT not in base64url format");return{header:JSON.parse(ug(l[0])),payload:JSON.parse(ug(l[1])),signature:b0(l[2]),raw:{header:l[0],payload:l[1]}}}async function A0(c){return await new Promise(l=>{setTimeout(()=>l(null),c)})}function O0(c,l){return new Promise((s,o)=>{(async()=>{for(let f=0;f<1/0;f++)try{const d=await c(f);if(!l(f,null,d)){s(d);return}}catch(d){if(!l(f,d)){o(d);return}}})()})}function C0(c){return("0"+c.toString(16)).substr(-2)}function R0(){const l=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let o="";for(let f=0;f<56;f++)o+=r.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(l),Array.from(l,C0).join("")}async function D0(c){const r=new TextEncoder().encode(c),s=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(s);return Array.from(o).map(f=>String.fromCharCode(f)).join("")}async function U0(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const r=await D0(c);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sl(c,l,r=!1){const s=R0();let o=s;r&&(o+="/PASSWORD_RECOVERY"),await Al(c,`${l}-code-verifier`,o);const f=await U0(s);return[f,s===f?"plain":"s256"]}const M0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N0(c){const l=c.headers.get(ko);if(!l||!l.match(M0))return null;try{return new Date(`${l}T00:00:00.0Z`)}catch{return null}}function z0(c){if(!c)throw new Error("Missing exp claim");const l=Math.floor(Date.now()/1e3);if(c<=l)throw new Error("JWT has expired")}function k0(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const B0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function El(c){if(!B0.test(c))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ao(){const c={};return new Proxy(c,{get:(l,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(l,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(l,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function og(c){return JSON.parse(JSON.stringify(c))}var q0=function(c,l){var r={};for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&l.indexOf(s)<0&&(r[s]=c[s]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(c);o<s.length;o++)l.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(c,s[o])&&(r[s[o]]=c[s[o]]);return r};const Sa=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),L0=[502,503,504];async function cg(c){var l;if(!x0(c))throw new Bo(Sa(c),0);if(L0.includes(c.status))throw new Bo(Sa(c),c.status);let r;try{r=await c.json()}catch(f){throw new Cg(Sa(f),f)}let s;const o=N0(c);if(o&&o.getTime()>=Og["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new ig(Sa(r),c.status,((l=r.weak_password)===null||l===void 0?void 0:l.reasons)||[]);if(s==="session_not_found")throw new Jn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((f,d)=>f&&typeof d=="string",!0))throw new ig(Sa(r),c.status,r.weak_password.reasons);throw new d0(Sa(r),c.status||500,s)}const H0=(c,l,r,s)=>{const o={method:c,headers:l?.headers||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},l?.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),r))};async function we(c,l,r,s){var o;const f=Object.assign({},s?.headers);f[ko]||(f[ko]=Og["2024-01-01"].name),s?.jwt&&(f.Authorization=`Bearer ${s.jwt}`);const d=(o=s?.query)!==null&&o!==void 0?o:{};s?.redirectTo&&(d.redirect_to=s.redirectTo);const y=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await G0(c,l,r+y,{headers:f,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(m):{data:Object.assign({},m),error:null}}async function G0(c,l,r,s,o,f){const d=H0(l,s,o,f);let y;try{y=await c(r,Object.assign({},d))}catch(m){throw console.error(m),new Bo(Sa(m),0)}if(y.ok||await cg(y),s?.noResolveJson)return y;try{return await y.json()}catch(m){await cg(m)}}function _n(c){var l;let r=null;X0(c)&&(r=Object.assign({},c),c.expires_at||(r.expires_at=E0(c.expires_in)));const s=(l=c.user)!==null&&l!==void 0?l:c;return{data:{session:r,user:s},error:null}}function fg(c){const l=_n(c);return!l.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(l.data.weak_password=c.weak_password),l}function Fn(c){var l;return{data:{user:(l=c.user)!==null&&l!==void 0?l:c},error:null}}function $0(c){return{data:c,error:null}}function Y0(c){const{action_link:l,email_otp:r,hashed_token:s,redirect_to:o,verification_type:f}=c,d=q0(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),y={action_link:l,email_otp:r,hashed_token:s,redirect_to:o,verification_type:f},m=Object.assign({},d);return{data:{properties:y,user:m},error:null}}function Q0(c){return c}function X0(c){return c.access_token&&c.refresh_token&&c.expires_in}const Oo=["global","local","others"];var V0=function(c,l){var r={};for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&l.indexOf(s)<0&&(r[s]=c[s]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(c);o<s.length;o++)l.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(c,s[o])&&(r[s[o]]=c[s[o]]);return r};class K0{constructor({url:l="",headers:r={},fetch:s}){this.url=l,this.headers=r,this.fetch=Ug(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(l,r=Oo[0]){if(Oo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oo.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:l,noResolveJson:!0}),{data:null,error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async inviteUserByEmail(l,r={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:l,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fn})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async generateLink(l){try{const{options:r}=l,s=V0(l,["options"]),o=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(o.new_email=s?.newEmail,delete o.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Y0,redirectTo:r?.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(l){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:l,headers:this.headers,xform:Fn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(l){var r,s,o,f,d,y,m;try{const g={nextPage:null,lastPage:0,total:0},_=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=l?.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(f=(o=l?.perPage)===null||o===void 0?void 0:o.toString())!==null&&f!==void 0?f:""},xform:Q0});if(_.error)throw _.error;const T=await _.json(),x=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,U=(m=(y=_.headers.get("link"))===null||y===void 0?void 0:y.split(","))!==null&&m!==void 0?m:[];return U.length>0&&(U.forEach(H=>{const q=parseInt(H.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(H.split(";")[1].split("=")[1]);g[`${B}Page`]=q}),g.total=parseInt(x)),{data:Object.assign(Object.assign({},T),g),error:null}}catch(g){if(he(g))return{data:{users:[]},error:g};throw g}}async getUserById(l){El(l);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${l}`,{headers:this.headers,xform:Fn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(l,r){El(l);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${l}`,{body:r,headers:this.headers,xform:Fn})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async deleteUser(l,r=!1){El(l);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${l}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fn})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async _listFactors(l){El(l.userId);try{const{data:r,error:s}=await we(this.fetch,"GET",`${this.url}/admin/users/${l.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:s}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(l){El(l.userId),El(l.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${l.userId}/factors/${l.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}function dg(c={}){return{getItem:l=>c[l]||null,setItem:(l,r)=>{c[l]=r},removeItem:l=>{delete c[l]}}}function Z0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tl={debug:!!(globalThis&&Dg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mg extends Error{constructor(l){super(l),this.isAcquireTimeout=!0}}class J0 extends Mg{}async function P0(c,l,r){Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,l);const s=new globalThis.AbortController;return l>0&&setTimeout(()=>{s.abort(),Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},l),await Promise.resolve().then(()=>globalThis.navigator.locks.request(c,l===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,o.name);try{return await r()}finally{Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,o.name)}}else{if(l===0)throw Tl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new J0(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Tl.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Z0();const F0={url:r0,storageKey:u0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hg(c,l,r){return await r()}const jl={};class zi{constructor(l){var r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zi.nextInstanceID,zi.nextInstanceID+=1,this.instanceID>0&&Vt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},F0),l);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new K0({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Ug(o.fetch),this.lock=o.lock||hg,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:Vt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=P0:this.lock=hg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Dg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=dg(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=dg(this.memoryStorage)),Vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}get jwks(){var l,r;return(r=(l=jl[this.storageKey])===null||l===void 0?void 0:l.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(l){jl[this.storageKey]=Object.assign(Object.assign({},jl[this.storageKey]),{jwks:l})}get jwks_cached_at(){var l,r;return(r=(l=jl[this.storageKey])===null||l===void 0?void 0:l.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(l){jl[this.storageKey]=Object.assign(Object.assign({},jl[this.storageKey]),{cachedAt:l})}_debug(...l){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ag}) ${new Date().toISOString()}`,...l),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var l;try{const r=j0(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),Vt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:f}=await this._getSessionFromURL(r,s);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),m0(f)){const m=(l=f.details)===null||l===void 0?void 0:l.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:d,redirectType:y}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",y),await this._saveSession(d),setTimeout(async()=>{y==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?{error:r}:{error:new Cg("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(l){var r,s,o;try{const f=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=l?.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=l?.options)===null||o===void 0?void 0:o.captchaToken}},xform:_n}),{data:d,error:y}=f;if(y||!d)return{data:{user:null,session:null},error:y};const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(f){if(he(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(l){var r,s,o;try{let f;if("email"in l){const{email:_,password:T,options:x}=l;let U=null,H=null;this.flowType==="pkce"&&([U,H]=await Sl(this.storage,this.storageKey)),f=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:_,password:T,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:U,code_challenge_method:H},xform:_n})}else if("phone"in l){const{phone:_,password:T,options:x}=l;f=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:T,data:(s=x?.data)!==null&&s!==void 0?s:{},channel:(o=x?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:_n})}else throw new Is("You must provide either an email or phone number and a password");const{data:d,error:y}=f;if(y||!d)return{data:{user:null,session:null},error:y};const m=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(f){if(he(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(l){try{let r;if("email"in l){const{email:f,password:d,options:y}=l;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:d,gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:fg})}else if("phone"in l){const{phone:f,password:d,options:y}=l;r=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:d,gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:fg})}else throw new Is("You must provide either an email or phone number and a password");const{data:s,error:o}=r;return o?{data:{user:null,session:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Fs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(l){var r,s,o,f;return await this._handleProviderSignIn(l.provider,{redirectTo:(r=l.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=l.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=l.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(f=l.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(l){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(l))}async signInWithWeb3(l){const{chain:r}=l;if(r==="solana")return await this.signInWithSolana(l);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(l){var r,s,o,f,d,y,m,g,_,T,x,U;let H,q;if("message"in l)H=l.message,q=l.signature;else{const{chain:B,wallet:Q,statement:N,options:z}=l;let V;if(Vt())if(typeof Q=="object")V=Q;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))V=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=Q}const $=new URL((r=z?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in V&&V.signIn){const F=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),N?{statement:N}:null));let Y;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")Y=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)Y=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)H=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),q=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");H=[`${$.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(s=z?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((f=z?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((d=z?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((y=z?.signInWithSolana)===null||y===void 0)&&y.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((m=z?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((g=z?.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((T=(_=z?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||T===void 0)&&T.length?["Resources",...z.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const F=await V.signMessage(new TextEncoder().encode(H),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");q=F}}try{const{data:B,error:Q}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:H,signature:S0(q)},!((x=l.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(U=l.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:_n});if(Q)throw Q;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Fs}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:Q})}catch(B){if(he(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(l){const r=await wa(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(r??"").split("/");try{const{data:f,error:d}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:l,code_verifier:s},xform:_n});if(await Zn(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new Fs}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:o??null}),error:d})}catch(f){if(he(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(l){try{const{options:r,provider:s,token:o,access_token:f,nonce:d}=l,y=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:f,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:_n}),{data:m,error:g}=y;return g?{data:{user:null,session:null},error:g}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Fs}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:g})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(l){var r,s,o,f,d;try{if("email"in l){const{email:y,options:m}=l;let g=null,_=null;this.flowType==="pkce"&&([g,_]=await Sl(this.storage,this.storageKey));const{error:T}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:y,data:(r=m?.data)!==null&&r!==void 0?r:{},create_user:(s=m?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:g,code_challenge_method:_},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in l){const{phone:y,options:m}=l,{data:g,error:_}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:y,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(f=m?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:g?.message_id},error:_}}throw new Is("You must provide either an email or phone number.")}catch(y){if(he(y))return{data:{user:null,session:null},error:y};throw y}}async verifyOtp(l){var r,s;try{let o,f;"options"in l&&(o=(r=l.options)===null||r===void 0?void 0:r.redirectTo,f=(s=l.options)===null||s===void 0?void 0:s.captchaToken);const{data:d,error:y}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},l),{gotrue_meta_security:{captcha_token:f}}),redirectTo:o,xform:_n});if(y)throw y;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,g=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(l.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:g,session:m},error:null}}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(l){var r,s,o;try{let f=null,d=null;return this.flowType==="pkce"&&([f,d]=await Sl(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in l?{provider_id:l.providerId}:null),"domain"in l?{domain:l.domain}:null),{redirect_to:(s=(r=l.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=l?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:l.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:d}),headers:this.headers,xform:$0})}catch(f){if(he(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async l=>{const{data:{session:r},error:s}=l;if(s)throw s;if(!r)throw new Jn;const{error:o}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(l){if(he(l))return{data:{user:null,session:null},error:l};throw l}}async resend(l){try{const r=`${this.url}/resend`;if("email"in l){const{email:s,type:o,options:f}=l,{error:d}=await we(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in l){const{phone:s,type:o,options:f}=l,{data:d,error:y}=await we(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:y}}throw new Is("You must provide either an email or phone number and a type")}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(l,r){this._debug("#_acquireLock","begin",l);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,l,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(l){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await l(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let l=null;const r=await wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?l=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!l)return{data:{session:null},error:null};const s=l.expires_at?l.expires_at*1e3-Date.now()<To:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",l.expires_at),!s){if(this.userStorage){const d=await wa(this.userStorage,this.storageKey+"-user");d?.user?l.user=d.user:l.user=Ao()}if(this.storage.isServer&&l.user){let d=this.suppressGetSessionWarning;l=new Proxy(l,{get:(m,g,_)=>(!d&&g==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,g,_))})}return{data:{session:l},error:null}}const{session:o,error:f}=await this._callRefreshToken(l.refresh_token);return f?{data:{session:null},error:f}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(l){return l?await this._getUser(l):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(l){try{return l?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:l,xform:Fn}):await this._useSession(async r=>{var s,o,f;const{data:d,error:y}=r;if(y)throw y;return!(!((s=d.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&f!==void 0?f:void 0,xform:Fn})})}catch(r){if(he(r))return g0(r)&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(l,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(l,r))}async _updateUser(l,r={}){try{return await this._useSession(async s=>{const{data:o,error:f}=s;if(f)throw f;if(!o.session)throw new Jn;const d=o.session;let y=null,m=null;this.flowType==="pkce"&&l.email!=null&&([y,m]=await Sl(this.storage,this.storageKey));const{data:g,error:_}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},l),{code_challenge:y,code_challenge_method:m}),jwt:d.access_token,xform:Fn});if(_)throw _;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async setSession(l){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(l))}async _setSession(l){try{if(!l.access_token||!l.refresh_token)throw new Jn;const r=Date.now()/1e3;let s=r,o=!0,f=null;const{payload:d}=xo(l.access_token);if(d.exp&&(s=d.exp,o=s<=r),o){const{session:y,error:m}=await this._callRefreshToken(l.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!y)return{data:{user:null,session:null},error:null};f=y}else{const{data:y,error:m}=await this._getUser(l.access_token);if(m)throw m;f={access_token:l.access_token,refresh_token:l.refresh_token,user:y.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(r){if(he(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(l){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(l))}async _refreshSession(l){try{return await this._useSession(async r=>{var s;if(!l){const{data:d,error:y}=r;if(y)throw y;l=(s=d.session)!==null&&s!==void 0?s:void 0}if(!l?.refresh_token)throw new Jn;const{session:o,error:f}=await this._callRefreshToken(l.refresh_token);return f?{data:{user:null,session:null},error:f}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(he(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(l,r){try{if(!Vt())throw new Ws("No browser detected.");if(l.error||l.error_description||l.error_code)throw new Ws(l.error_description||"Error in URL with unspecified error_description",{error:l.error||"unspecified_error",code:l.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ws("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!l.code)throw new lg("No code detected.");const{data:N,error:z}=await this._exchangeCodeForSession(l.code);if(z)throw z;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:f,refresh_token:d,expires_in:y,expires_at:m,token_type:g}=l;if(!f||!y||!d||!g)throw new Ws("No session defined in URL");const _=Math.round(Date.now()/1e3),T=parseInt(y);let x=_+T;m&&(x=parseInt(m));const U=x-_;U*1e3<=xl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${U}s, should have been closer to ${T}s`);const H=x-T;_-H>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",H,x,_):_-H<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",H,x,_);const{data:q,error:B}=await this._getUser(f);if(B)throw B;const Q={provider_token:s,provider_refresh_token:o,access_token:f,expires_in:T,expires_at:x,refresh_token:d,token_type:g,user:q.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Q,redirectType:l.type},error:null}}catch(s){if(he(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(l){return!!(l.access_token||l.error_description)}async _isPKCECallback(l){const r=await wa(this.storage,`${this.storageKey}-code-verifier`);return!!(l.code&&r)}async signOut(l={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(l))}async _signOut({scope:l}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:o,error:f}=r;if(f)return{error:f};const d=(s=o.session)===null||s===void 0?void 0:s.access_token;if(d){const{error:y}=await this.admin.signOut(d,l);if(y&&!(h0(y)&&(y.status===404||y.status===401||y.status===403)))return{error:y}}return l!=="others"&&(await this._removeSession(),await Zn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(l){const r=T0(),s={id:r,callback:l,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(l){return await this._useSession(async r=>{var s,o;try{const{data:{session:f},error:d}=r;if(d)throw d;await((s=this.stateChangeEmitters.get(l))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",l,"session",f)}catch(f){await((o=this.stateChangeEmitters.get(l))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",l,"error",f),console.error(f)}})}async resetPasswordForEmail(l,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Sl(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:l,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(f){if(he(f))return{data:null,error:f};throw f}}async getUserIdentities(){var l;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(l=r.user.identities)!==null&&l!==void 0?l:[]},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async linkIdentity(l){var r;try{const{data:s,error:o}=await this._useSession(async f=>{var d,y,m,g,_;const{data:T,error:x}=f;if(x)throw x;const U=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,l.provider,{redirectTo:(d=l.options)===null||d===void 0?void 0:d.redirectTo,scopes:(y=l.options)===null||y===void 0?void 0:y.scopes,queryParams:(m=l.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",U,{headers:this.headers,jwt:(_=(g=T.session)===null||g===void 0?void 0:g.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return Vt()&&!(!((r=l.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:l.provider,url:s?.url},error:null}}catch(s){if(he(s))return{data:{provider:l.provider,url:null},error:s};throw s}}async unlinkIdentity(l){try{return await this._useSession(async r=>{var s,o;const{data:f,error:d}=r;if(d)throw d;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${l.identity_id}`,{headers:this.headers,jwt:(o=(s=f.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _refreshAccessToken(l){const r=`#_refreshAccessToken(${l.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await O0(async o=>(o>0&&await A0(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:l},headers:this.headers,xform:_n})),(o,f)=>{const d=200*Math.pow(2,o);return f&&jo(f)&&Date.now()+d-s<xl})}catch(s){if(this._debug(r,"error",s),he(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(l){return typeof l=="object"&&l!==null&&"access_token"in l&&"refresh_token"in l&&"expires_at"in l}async _handleProviderSignIn(l,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,l,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",l,"options",r,"url",s),Vt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:l,url:s},error:null}}async _recoverAndRefresh(){var l,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await wa(this.storage,this.storageKey);if(o&&this.userStorage){let d=await wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Al(this.userStorage,this.storageKey+"-user",d)),o.user=(l=d?.user)!==null&&l!==void 0?l:Ao()}else if(o&&!o.user&&!o.user){const d=await wa(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await Zn(this.storage,this.storageKey+"-user"),await Al(this.storage,this.storageKey,o)):o.user=Ao()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const f=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<To;if(this._debug(s,`session has${f?"":" not"} expired with margin of ${To}s`),f){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),jo(d)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:y}=await this._getUser(o.access_token);!y&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(s,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(l){var r,s;if(!l)throw new Jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${l.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new nr;const{data:f,error:d}=await this._refreshAccessToken(l);if(d)throw d;if(!f.session)throw new Jn;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const y={session:f.session,error:null};return this.refreshingDeferred.resolve(y),y}catch(f){if(this._debug(o,"error",f),he(f)){const d={session:null,error:f};return jo(f)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(f),f}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(l,r,s=!0){const o=`#_notifyAllSubscribers(${l})`;this._debug(o,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:l,session:r});const f=[],d=Array.from(this.stateChangeEmitters.values()).map(async y=>{try{await y.callback(l,r)}catch(m){f.push(m)}});if(await Promise.all(d),f.length>0){for(let y=0;y<f.length;y+=1)console.error(f[y]);throw f[0]}}finally{this._debug(o,"end")}}async _saveSession(l){this._debug("#_saveSession()",l),this.suppressGetSessionWarning=!0;const r=Object.assign({},l),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Al(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const f=og(o);await Al(this.storage,this.storageKey,f)}else{const o=og(r);await Al(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Zn(this.storage,this.storageKey),await Zn(this.storage,this.storageKey+"-code-verifier"),await Zn(this.storage,this.storageKey+"-user"),this.userStorage&&await Zn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const l=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{l&&Vt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",l)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const l=setInterval(()=>this._autoRefreshTokenTick(),xl);this.autoRefreshTicker=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const l=this.autoRefreshTicker;this.autoRefreshTicker=null,l&&clearInterval(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const l=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-l)/xl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${xl}ms, refresh threshold is ${zo} ticks`),o<=zo&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(l){if(l.isAcquireTimeout||l instanceof Mg)this._debug("auto refresh token tick lock not available");else throw l}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(l){console.error("_handleVisibilityChange",l)}}async _onVisibilityChanged(l){const r=`#_onVisibilityChanged(${l})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),l||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(l,r,s){const o=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[f,d]=await Sl(this.storage,this.storageKey),y=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(y.toString())}if(s?.queryParams){const f=new URLSearchParams(s.queryParams);o.push(f.toString())}return s?.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${l}?${o.join("&")}`}async _unenroll(l){try{return await this._useSession(async r=>{var s;const{data:o,error:f}=r;return f?{data:null,error:f}:await we(this.fetch,"DELETE",`${this.url}/factors/${l.factorId}`,{headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _enroll(l){try{return await this._useSession(async r=>{var s,o;const{data:f,error:d}=r;if(d)return{data:null,error:d};const y=Object.assign({friendly_name:l.friendlyName,factor_type:l.factorType},l.factorType==="phone"?{phone:l.phone}:{issuer:l.issuer}),{data:m,error:g}=await we(this.fetch,"POST",`${this.url}/factors`,{body:y,headers:this.headers,jwt:(s=f?.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(l.factorType==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _verify(l){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:f}=r;if(f)return{data:null,error:f};const{data:d,error:y}=await we(this.fetch,"POST",`${this.url}/factors/${l.factorId}/verify`,{body:{code:l.code,challenge_id:l.challengeId},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return y?{data:null,error:y}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:y})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challenge(l){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:o,error:f}=r;return f?{data:null,error:f}:await we(this.fetch,"POST",`${this.url}/factors/${l.factorId}/challenge`,{body:{channel:l.channel},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(he(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(l){const{data:r,error:s}=await this._challenge({factorId:l.factorId});return s?{data:null,error:s}:await this._verify({factorId:l.factorId,challengeId:r.id,code:l.code})}async _listFactors(){const{data:{user:l},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=l?.factors||[],o=s.filter(d=>d.factor_type==="totp"&&d.status==="verified"),f=s.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:s,totp:o,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async l=>{var r,s;const{data:{session:o},error:f}=l;if(f)return{data:null,error:f};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=xo(o.access_token);let y=null;d.aal&&(y=d.aal);let m=y;((s=(r=o.user.factors)===null||r===void 0?void 0:r.filter(T=>T.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const _=d.amr||[];return{data:{currentLevel:y,nextLevel:m,currentAuthenticationMethods:_},error:null}}))}async fetchJwk(l,r={keys:[]}){let s=r.keys.find(y=>y.kid===l);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(y=>y.kid===l),s&&this.jwks_cached_at+f0>o)return s;const{data:f,error:d}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=o,s=f.keys.find(y=>y.kid===l),!s)?null:s}async getClaims(l,r={}){try{let s=l;if(!s){const{data:U,error:H}=await this.getSession();if(H||!U.session)return{data:null,error:H};s=U.session.access_token}const{header:o,payload:f,signature:d,raw:{header:y,payload:m}}=xo(s);r?.allowExpired||z0(f.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!g){const{error:U}=await this.getUser(s);if(U)throw U;return{data:{claims:f,header:o,signature:d},error:null}}const _=k0(o.alg),T=await crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!await crypto.subtle.verify(_,T,d,w0(`${y}.${m}`)))throw new qo("Invalid JWT signature");return{data:{claims:f,header:o,signature:d},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}}zi.nextInstanceID=0;const I0=zi;class W0 extends I0{constructor(l){super(l)}}var ep=function(c,l,r,s){function o(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function y(_){try{g(s.next(_))}catch(T){d(T)}}function m(_){try{g(s.throw(_))}catch(T){d(T)}}function g(_){_.done?f(_.value):o(_.value).then(y,m)}g((s=s.apply(c,l||[])).next())})};class tp{constructor(l,r,s){var o,f,d;if(this.supabaseUrl=l,this.supabaseKey=r,!l)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const y=i0(l),m=new URL(y);this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,_={db:Fy,realtime:Wy,auth:Object.assign(Object.assign({},Iy),{storageKey:g}),global:Py},T=s0(s??{},_);this.storageKey=(o=T.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(f=T.global.headers)!==null&&f!==void 0?f:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(x,U)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(U)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=T.auth)!==null&&d!==void 0?d:{},this.headers,T.global.fetch),this.fetch=a0(r,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.rest=new _y(new URL("rest/v1",m).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),T.accessToken||this._listenForAuthEvents()}get functions(){return new ry(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ky(this.storageUrl.href,this.headers,this.fetch)}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,r={},s={}){return this.rest.rpc(l,r,s)}channel(l,r={config:{}}){return this.realtime.channel(l,r)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var l,r;return ep(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(l=s.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:r,detectSessionInUrl:s,storage:o,storageKey:f,flowType:d,lock:y,debug:m},g,_){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W0({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),g),storageKey:f,autoRefreshToken:l,persistSession:r,detectSessionInUrl:s,storage:o,flowType:d,lock:y,debug:m,fetch:_,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(l){return new Ny(this.realtimeUrl.href,Object.assign(Object.assign({},l),{params:Object.assign({apikey:this.supabaseKey},l?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s?.access_token)})}_handleTokenChanged(l,r,s){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:l==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const np=(c,l,r)=>new tp(c,l,r);function ap(){if(typeof window<"u"||typeof process>"u"||process.version===void 0||process.version===null)return!1;const c=process.version.match(/^v(\d+)\./);return c?parseInt(c[1],10)<=18:!1}ap()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lp="https://mmlbiteaqwtgxnicwjok.supabase.co",ip="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tbGJpdGVhcXd0Z3huaWN3am9rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODQzOTUsImV4cCI6MjA2ODI2MDM5NX0.TcM_shzT58QHOrRjbogNu_mm97fya3k4iq_MlgaCuy0",Je=np(lp,ip),Ol={async saveBuilding(c,l,r=null,s="",o=0,f=[]){try{if(console.log("Saving building:",{buildingId:c,data:l,geometryPoints:r,aiCommand:s,height:o}),!c)throw new Error("Building ID is required");if(!r||r.length<3)throw new Error("Valid geometry points are required (minimum 3 points)");const d={wkt:l.wkt||"",full_addres_q:l.full_addres_q||"",street_cod:l.street_cod||"",bldg_num:l.bldg_num||"",bldg_type:l.bldg_type||"",num_floors:l.num_floors||"",street_c_1:l.street_c_1||"",bldg_num_2:l.bldg_num_2||"",street_is_tama:l.street_is_tama||"",no_floors:l.no_floors||"",no_apt:l.no_apt||"",st_code:l.st_code||"",street_1:l.street_1||"",color:l.color||"",מיון_2:l.מיון_2||"",masadcolor2:l.masadcolor2||"",color_sofi:l.color_sofi||"",full_addresse:l.full_addresse||"",mi_address:l.mi_address||"",codeapp:l.codeapp||"",weblink:l.weblink||""},y={id:c,...d,geometry_points:r,ai_command:s,height:Number(o)||0,floor_colors:f,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Final building data to save:",y);const{data:m,error:g}=await Je.from("buildings").upsert(y).select().single();if(g)throw g;return console.log("Building saved successfully:",m),{success:!0,data:m}}catch(d){return console.error("Error saving building:",d),{success:!1,error:d.message}}},async getBuilding(c){try{const{data:l,error:r}=await Je.from("buildings").select("*").eq("id",c).single();if(r&&r.code!=="PGRST116")throw r;return{success:!0,data:l}}catch(l){return console.error("Error getting building:",l),{success:!1,error:l.message}}},async getAllBuildings(){try{const{data:c,error:l}=await Je.from("buildings").select("*").order("created_at",{ascending:!1});if(l)throw l;return{success:!0,data:c}}catch(c){return console.error("Error getting buildings:",c),{success:!1,error:c.message}}},async deleteBuilding(c){try{const{error:l}=await Je.from("buildings").delete().eq("id",c);if(l)throw l;return{success:!0}}catch(l){return console.error("Error deleting building:",l),{success:!1,error:l.message}}}},sp=({buildingId:c,onClose:l,onSave:r})=>{const[s,o]=te.useState({wkt:"",full_addres_q:"",street_cod:"",bldg_num:"",bldg_type:"",num_floors:"",street_c_1:"",bldg_num_2:"",street_is_tama:"",no_floors:"",no_apt:"",st_code:"",street_1:"",color:"",מיון_2:"",masadcolor2:"",color_sofi:"",full_addresse:"",mi_address:"",codeapp:"",height:"",ai_command:"",floor_colors:[],geometry_points:[],transparency:.9,הערכת_מחיר_שמאי:"",ערך_משוער_לפי_מאפייני_סביבה:"",מחיר_ממוצע_למטר:"",צרכים_ציבוריים:"",שיוך_לרשות:"",weblink:""}),[f,d]=te.useState(!1);te.useEffect(()=>{c&&y()},[c]);const y=async()=>{d(!0);try{const q=await Ol.getBuilding(c);if(q.success&&q.data){const B={};Object.keys(s).forEach(Q=>{Q==="floor_colors"?B[Q]=Array.isArray(q.data[Q])?q.data[Q]:[]:Q==="geometry_points"?B[Q]=Array.isArray(q.data[Q])?q.data[Q]:[]:Q==="transparency"?B[Q]=.9:B[Q]=q.data[Q]!=null?q.data[Q]:""}),o(B)}}catch(q){console.error("Error loading building data:",q)}finally{d(!1)}},m=q=>{const{name:B,value:Q}=q.target;if(o(N=>({...N,[B]:Q})),B==="transparency"&&r){const N=parseFloat(Q);r(`שקיפות עודכנה ל-${Math.round(N*100)}%`,!1,N,!0)}},g=(q,B)=>{const Q=[...s.floor_colors||[]];Q[q]=B,o(N=>({...N,floor_colors:Q}))},_=()=>{const q=parseInt(s.num_floors)||parseInt(s.no_floors)||0,B=s.floor_colors||[],Q=Math.max(q,B.length,1);if(Q===0){console.log("No floors detected for gradient generation");return}const N=[];for(let z=0;z<Q;z++){const V=z/Math.max(1,Q-1),$=.15-V*.4,F=.7-V*.3,Y=.8+V*.2,W=x($,F,Y),ke=U(W.r,W.g,W.b);N.push(ke)}o(z=>({...z,floor_colors:N}))},T=()=>{const q=parseInt(s.num_floors)||parseInt(s.no_floors)||0,B=s.floor_colors||[],Q=Math.max(q,B.length,1);if(Q===0){console.log("No floors detected for color reset");return}const N=Array(Q).fill("#4CAF50");o(z=>({...z,floor_colors:N}))},x=(q,B,Q)=>{let N,z,V;if(B===0)N=z=V=Q;else{const $=(W,ke,Ve)=>(Ve<0&&(Ve+=1),Ve>1&&(Ve-=1),Ve<.16666666666666666?W+(ke-W)*6*Ve:Ve<.5?ke:Ve<.6666666666666666?W+(ke-W)*(.6666666666666666-Ve)*6:W),F=Q<.5?Q*(1+B):Q+B-Q*B,Y=2*Q-F;N=$(Y,F,q+1/3),z=$(Y,F,q),V=$(Y,F,q-1/3)}return{r:Math.round(N*255),g:Math.round(z*255),b:Math.round(V*255)}},U=(q,B,Q)=>"#"+((1<<24)+(q<<16)+(B<<8)+Q).toString(16).slice(1),H=async()=>{d(!0);try{console.log("🔍 Saving building data:",s),console.log("🔗 Weblink value:",s.weblink);const q=await Ol.saveBuilding(c,s,s.geometry_points,s.ai_command,parseFloat(s.height)||0,s.floor_colors);q.success?(console.log("✅ Building saved successfully:",q.data),r&&r("נתוני הבניין נשמרו בהצלחה!",!0,parseFloat(s.transparency)||.9),l()):(console.error("Error saving building:",q.error),r&&r(`שגיאה בשמירת נתוני הבניין: ${q.error}`))}catch(q){console.error("Error saving building data:",q),r&&r(`שגיאה בשמירת נתוני הבניין: ${q.message}`)}finally{d(!1)}};return p.jsxs("div",{id:"data-form-modal",children:[p.jsx("h3",{children:"פרטי הבניין"}),p.jsx("div",{id:"data-form-container",children:p.jsx("form",{id:"building-data-form",children:p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"full_addres_q",children:"כתובת מלאה"}),p.jsx("input",{type:"text",id:"full_addres_q",name:"full_addres_q",value:s.full_addres_q,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"bldg_num",children:"מספר בניין"}),p.jsx("input",{type:"text",id:"bldg_num",name:"bldg_num",value:s.bldg_num,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"bldg_type",children:"סוג בניין"}),p.jsx("input",{type:"text",id:"bldg_type",name:"bldg_type",value:s.bldg_type,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"num_floors",children:"מספר קומות"}),p.jsx("input",{type:"text",id:"num_floors",name:"num_floors",value:s.num_floors,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"street_1",children:"רחוב"}),p.jsx("input",{type:"text",id:"street_1",name:"street_1",value:s.street_1,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"no_apt",children:"מספר דירות"}),p.jsx("input",{type:"text",id:"no_apt",name:"no_apt",value:s.no_apt,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"height",children:"גובה (מטר)"}),p.jsx("input",{type:"number",id:"height",name:"height",value:s.height,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"ai_command",children:"פקודת AI"}),p.jsx("input",{type:"text",id:"ai_command",name:"ai_command",value:s.ai_command,onChange:m})]}),p.jsxs("div",{children:[p.jsxs("label",{htmlFor:"transparency",children:["שקיפות (",Math.round(s.transparency*100),"%)"]}),p.jsx("input",{type:"range",id:"transparency",name:"transparency",min:"0.1",max:"1.0",step:"0.1",value:s.transparency,onChange:m,style:{width:"100%",marginTop:"5px"}})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"הערכת_מחיר_שמאי",children:"הערכת מחיר שמאי"}),p.jsx("input",{type:"text",id:"הערכת_מחיר_שמאי",name:"הערכת_מחיר_שמאי",value:s.הערכת_מחיר_שמאי,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"ערך_משוער_לפי_מאפייני_סביבה",children:"ערך משוער לפי מאפייני סביבה"}),p.jsx("input",{type:"text",id:"ערך_משוער_לפי_מאפייני_סביבה",name:"ערך_משוער_לפי_מאפייני_סביבה",value:s.ערך_משוער_לפי_מאפייני_סביבה,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"מחיר_ממוצע_למטר",children:"מחיר ממוצע למטר"}),p.jsx("input",{type:"text",id:"מחיר_ממוצע_למטר",name:"מחיר_ממוצע_למטר",value:s.מחיר_ממוצע_למטר,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"צרכים_ציבוריים",children:"צרכים ציבוריים"}),p.jsx("input",{type:"text",id:"צרכים_ציבוריים",name:"צרכים_ציבוריים",value:s.צרכים_ציבוריים,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"שיוך_לרשות",children:"שיוך לרשות"}),p.jsx("input",{type:"text",id:"שיוך_לרשות",name:"שיוך_לרשות",value:s.שיוך_לרשות,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"street_is_tama",children:'רחוב תמ"א'}),p.jsx("input",{type:"text",id:"street_is_tama",name:"street_is_tama",value:s.street_is_tama,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"color",children:"צבע"}),p.jsx("input",{type:"text",id:"color",name:"color",value:s.color,onChange:m})]}),p.jsxs("div",{style:{gridColumn:"1 / -1"},children:[p.jsx("label",{htmlFor:"weblink",children:"קישור אמבדד (iframe)"}),p.jsx("input",{type:"url",id:"weblink",name:"weblink",value:s.weblink,onChange:m,placeholder:"https://example.com/embed...",style:{width:"100%"}})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"מיון_2",children:"מיון 2"}),p.jsx("input",{type:"text",id:"מיון_2",name:"מיון_2",value:s.מיון_2,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"masadcolor2",children:"צבע מסד 2"}),p.jsx("input",{type:"text",id:"masadcolor2",name:"masadcolor2",value:s.masadcolor2,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"color_sofi",children:"צבע סופי"}),p.jsx("input",{type:"text",id:"color_sofi",name:"color_sofi",value:s.color_sofi,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"mi_address",children:"כתובת MI"}),p.jsx("input",{type:"text",id:"mi_address",name:"mi_address",value:s.mi_address,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"codeapp",children:"קוד אפליקציה"}),p.jsx("input",{type:"text",id:"codeapp",name:"codeapp",value:s.codeapp,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"wkt",children:"WKT"}),p.jsx("input",{type:"text",id:"wkt",name:"wkt",value:s.wkt,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"street_cod",children:"קוד רחוב"}),p.jsx("input",{type:"text",id:"street_cod",name:"street_cod",value:s.street_cod,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"street_c_1",children:"רחוב C1"}),p.jsx("input",{type:"text",id:"street_c_1",name:"street_c_1",value:s.street_c_1,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"bldg_num_2",children:"מספר בניין 2"}),p.jsx("input",{type:"text",id:"bldg_num_2",name:"bldg_num_2",value:s.bldg_num_2,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"no_floors",children:"מספר קומות (נוסף)"}),p.jsx("input",{type:"text",id:"no_floors",name:"no_floors",value:s.no_floors,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"st_code",children:"קוד ST"}),p.jsx("input",{type:"text",id:"st_code",name:"st_code",value:s.st_code,onChange:m})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"full_addresse",children:"כתובת מלאה (נוסף)"}),p.jsx("input",{type:"text",id:"full_addresse",name:"full_addresse",value:s.full_addresse,onChange:m})]}),p.jsxs("div",{style:{gridColumn:"1 / -1"},children:[p.jsxs("label",{children:["צבעי קומות (",Math.max(parseInt(s.num_floors)||0,parseInt(s.no_floors)||0,s.floor_colors?.length||0)," קומות)"]}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",justifyContent:"center"},children:[p.jsx("button",{type:"button",onClick:_,style:{padding:"8px 16px",backgroundColor:"#FF6B6B",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"12px"},children:"🌈 צור גרדיאנט"}),p.jsx("button",{type:"button",onClick:T,style:{padding:"8px 16px",backgroundColor:"#4ECDC4",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",fontSize:"12px"},children:"🔄 אפס צבעים"})]}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"10px",maxHeight:"300px",overflowY:"auto",padding:"10px",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:s.floor_colors&&s.floor_colors.map((q,B)=>p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)"},children:[p.jsxs("span",{style:{fontSize:"13px",color:"#bbb",minWidth:"60px"},children:["קומה ",B+1,":"]}),p.jsx("input",{type:"color",value:q,onChange:Q=>g(B,Q.target.value),style:{width:"40px",height:"30px",border:"none",borderRadius:"4px",cursor:"pointer"}}),p.jsx("span",{style:{fontSize:"11px",color:"#888",fontFamily:"monospace",backgroundColor:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:"3px"},children:q})]},B))})]})]})})}),p.jsxs("div",{id:"data-form-buttons",children:[p.jsx("button",{id:"save-data-button",onClick:H,disabled:f,children:f?"שומר...":"שמור נתונים"}),p.jsx("button",{id:"close-form-button",onClick:l,children:"סגור"})]})]})},rp=({building:c,position:l,onEdit:r,onClose:s})=>{const[o,f]=te.useState(!1),[d,y]=te.useState("A");if(console.log("🏢 BuildingPopup - building data:",c),console.log("🔗 BuildingPopup - weblink:",c?.weblink),!c||!l)return null;const m=()=>{r(c),s()};return p.jsxs("div",{className:"building-popup",style:{left:l.x,top:l.y},children:[p.jsxs("div",{className:"popup-header",children:[p.jsx("h4",{children:"פרטי בניין"}),p.jsx("button",{className:"close-button",onClick:s,children:"×"})]}),p.jsx("div",{className:"popup-content",children:p.jsxs("div",{className:"metadata-section",children:[p.jsx("h5",{children:"📊 פרטי בניין"}),p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"כתובת:"}),p.jsx("span",{className:"popup-value",children:c.full_addres_q||c.full_addresse||"לא צוין"})]}),p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"מספר בניין:"}),p.jsx("span",{className:"popup-value",children:c.bldg_num||"לא צוין"})]}),p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"סוג בניין:"}),p.jsx("span",{className:"popup-value",children:c.bldg_type||"לא צוין"})]}),p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"קומות:"}),p.jsx("span",{className:"popup-value",children:c.num_floors||c.no_floors||"לא צוין"})]}),p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"גובה:"}),p.jsx("span",{className:"popup-value",children:c.height?`${c.height} מטר`:"לא צוין"})]}),c.ai_command&&p.jsxs("div",{className:"popup-row",children:[p.jsx("span",{className:"popup-label",children:"פקודת AI:"}),p.jsx("span",{className:"popup-value",children:c.ai_command})]})]})}),p.jsxs("div",{className:"popup-actions",children:[p.jsx("button",{className:"edit-button",onClick:m,children:"✏️ ערוך בניין"}),c.weblink&&p.jsx("button",{className:"view-plans-btn",onClick:()=>f(!0),children:"📋 צפה בתוכנית"})]}),o&&c.weblink&&p.jsx("div",{className:"embed-overlay",onClick:()=>f(!1),children:p.jsxs("div",{className:"embed-container",onClick:g=>g.stopPropagation(),children:[p.jsxs("div",{className:"embed-header",children:[p.jsxs("h3",{children:["תוכניות בניין - ",c.full_addres_q||"לא צוין"]}),p.jsx("button",{className:"embed-close-btn",onClick:()=>f(!1),children:"✕"})]}),p.jsx("iframe",{src:c.weblink,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0,title:"תוכניות בניין"})]})})]})},up=({currentLayer:c,onLayerChange:l,onToggle:r})=>{const[s,o]=te.useState(!1),f=[{id:"osm",name:"מפת רחובות"},{id:"aerial",name:"תצלום אווירי"},{id:"f4",name:"מפת F4"}];return p.jsxs("div",{className:`layer-switcher ${s?"minimized":""}`,children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h4",{children:"🗺️ שכבות מפה"}),p.jsxs("div",{className:"panel-controls",children:[p.jsx("button",{className:"panel-btn minimize-btn",onClick:()=>o(!s),title:s?"הרחב":"הקטן",children:"▼"}),p.jsx("button",{className:"panel-btn",onClick:()=>r&&r(!1),title:"הסתר",children:"✕"})]})]}),p.jsxs("div",{className:"panel-content",children:[f.map(d=>p.jsxs("label",{className:"layer-option",children:[p.jsx("input",{type:"radio",name:"layer",value:d.id,checked:c===d.id,onChange:y=>l(y.target.value)}),p.jsx("span",{children:d.name})]},d.id)),p.jsx("div",{className:"layer-separator"}),p.jsx("h4",{children:"שכבות נוספות"}),p.jsxs("label",{className:"layer-option",children:[p.jsx("input",{type:"checkbox",name:"customBuildings",defaultChecked:!0,onChange:d=>l("customBuildings",d.target.checked)}),p.jsx("span",{children:"מבנים נוספים"})]})]})]})},Ta={async getCategories(){try{const{data:c,error:l}=await Je.from("object_categories").select("*").order("name_he");if(l)throw l;return{success:!0,data:c}}catch(c){return console.error("Error getting categories:",c),{success:!1,error:c.message}}},async createCategory(c){try{const{data:l,error:r}=await Je.from("object_categories").insert(c).select().single();if(r)throw r;return{success:!0,data:l}}catch(l){return console.error("Error creating category:",l),{success:!1,error:l.message}}},async getModelsByCategory(c){try{const{data:l,error:r}=await Je.from("object_models").select(`
          *,
          object_categories (
            name,
            name_he,
            icon
          )
        `).eq("category_id",c).eq("is_active",!0).order("name_he");if(r)throw r;return{success:!0,data:l}}catch(l){return console.error("Error getting models by category:",l),{success:!1,error:l.message}}},async getAllModels(){try{const{data:c,error:l}=await Je.from("object_models").select(`
          *,
          object_categories (
            name,
            name_he,
            icon
          )
        `).eq("is_active",!0).order("name_he");if(l)throw l;return{success:!0,data:c}}catch(c){return console.error("Error getting all models:",c),{success:!1,error:c.message}}},async createModel(c){try{const{data:l,error:r}=await Je.from("object_models").insert(c).select().single();if(r)throw r;return{success:!0,data:l}}catch(l){return console.error("Error creating model:",l),{success:!1,error:l.message}}},async getPlacedObjects(){try{const{data:c,error:l}=await Je.from("placed_objects").select(`
          *,
          object_models (
            *,
            object_categories (
              name,
              name_he,
              icon
            )
          )
        `).eq("is_visible",!0).order("created_at",{ascending:!1});if(l)throw l;return{success:!0,data:c}}catch(c){return console.error("Error getting placed objects:",c),{success:!1,error:c.message}}},async placeObject(c){try{console.log("Placing object:",c);const{data:l,error:r}=await Je.from("placed_objects").insert({model_id:c.model_id,name:c.name||"Unnamed Object",position:c.position,scale:c.scale||{x:1,y:1,z:1},rotation:c.rotation||{x:0,y:0,z:0},properties:c.properties||{},is_visible:!0}).select(`
          *,
          object_models (
            *,
            object_categories (
              name,
              name_he,
              icon
            )
          )
        `).single();if(r)throw r;return console.log("Object placed successfully:",l),{success:!0,data:l}}catch(l){return console.error("Error placing object:",l),{success:!1,error:l.message}}},async updatePlacedObject(c,l){try{const{data:r,error:s}=await Je.from("placed_objects").update(l).eq("id",c).select(`
          *,
          object_models (
            *,
            object_categories (
              name,
              name_he,
              icon
            )
          )
        `).single();if(s)throw s;return{success:!0,data:r}}catch(r){return console.error("Error updating placed object:",r),{success:!1,error:r.message}}},async deletePlacedObject(c){try{const{error:l}=await Je.from("placed_objects").delete().eq("id",c);if(l)throw l;return{success:!0}}catch(l){return console.error("Error deleting placed object:",l),{success:!1,error:l.message}}},async uploadModel(c,l){try{const r=Date.now(),s=l.split(".").pop(),o=l.replace(/\.[^/.]+$/,""),f=encodeURIComponent(`${r}_${o}.${s}`),{data:d,error:y}=await Je.storage.from("3d-models").upload(f,c,{cacheControl:"3600",upsert:!1});if(y)throw y;const{data:m}=Je.storage.from("3d-models").getPublicUrl(f);return{success:!0,data:{...d,publicUrl:m.publicUrl}}}catch(r){return console.error("Error uploading model:",r),{success:!1,error:r.message}}},async uploadThumbnail(c,l){try{const r=Date.now(),s=l.split(".").pop(),o=l.replace(/\.[^/.]+$/,""),f=encodeURIComponent(`${r}_${o}.${s}`),{data:d,error:y}=await Je.storage.from("thumbnails").upload(f,c,{cacheControl:"3600",upsert:!1});if(y)throw y;const{data:m}=Je.storage.from("thumbnails").getPublicUrl(f);return{success:!0,data:{...d,publicUrl:m.publicUrl}}}catch(r){return console.error("Error uploading thumbnail:",r),{success:!1,error:r.message}}},async getStorageStats(){try{const{data:c,error:l}=await Je.rpc("get_storage_stats");if(l)throw l;return{success:!0,data:c}}catch(c){return console.error("Error getting storage stats:",c),{success:!1,error:c.message}}},async cleanupOrphanedFiles(){try{const{data:c,error:l}=await Je.rpc("cleanup_orphaned_model_files");if(l)throw l;return{success:!0,data:{cleanedFiles:c}}}catch(c){return console.error("Error cleaning up orphaned files:",c),{success:!1,error:c.message}}},async deleteModelFile(c){try{const l=c.split("/").pop(),{error:r}=await Je.storage.from("3d-models").remove([l]);if(r)throw r;return{success:!0}}catch(l){return console.error("Error deleting model file:",l),{success:!1,error:l.message}}},async deleteThumbnailFile(c){try{const l=c.split("/").pop(),{error:r}=await Je.storage.from("thumbnails").remove([l]);if(r)throw r;return{success:!0}}catch(l){return console.error("Error deleting thumbnail file:",l),{success:!1,error:l.message}}}},Co=Object.freeze(Object.defineProperty({__proto__:null,objectsService:Ta},Symbol.toStringTag,{value:"Module"})),op=({onClose:c})=>{const[l,r]=te.useState([]),[s,o]=te.useState({name:"",name_he:"",description:"",category_id:"",scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}}),[f,d]=te.useState(null),[y,m]=te.useState(null),[g,_]=te.useState(!1),[T,x]=te.useState("");te.useEffect(()=>{U()},[]);const U=async()=>{const N=await Ta.getCategories();N.success&&r(N.data)},H=N=>{const{name:z,value:V}=N.target;if(z.includes(".")){const[$,F]=z.split(".");o(Y=>({...Y,[$]:{...Y[$],[F]:parseFloat(V)||0}}))}else o($=>({...$,[z]:V}))},q=(N,z)=>{const V=N.target.files[0];z==="model"?d(V):z==="thumbnail"&&m(V)},B=()=>{if(!f)return alert("אנא בחר קובץ דגם 3D"),!1;const N=f.name.toLowerCase().split(".").pop();return["glb","gltf","obj","fbx","3ds","dae"].includes(N)?f.size>50*1024*1024?(alert("קובץ הדגם גדול מדי (מקסימום 50MB)"),!1):y&&y.size>5*1024*1024?(alert("קובץ התמונה גדול מדי (מקסימום 5MB)"),!1):!0:(alert("סוג קובץ לא נתמך. אנא השתמש ב: GLB, GLTF, OBJ, FBX, 3DS, DAE"),!1)},Q=async()=>{if(B()){if(!s.name||!s.name_he||!s.category_id){alert("אנא מלא את כל השדות הנדרשים");return}_(!0),x("מעלה קובץ דגם...");try{const N=`${Date.now()}_${f.name}`,z=await Ta.uploadModel(f,N);if(!z.success)throw new Error(`שגיאה בהעלאת הדגם: ${z.error}`);let V="";if(y){x("מעלה תמונה...");const Y=`${Date.now()}_${y.name}`,W=await Ta.uploadThumbnail(y,Y);W.success?V=W.data.publicUrl:console.warn("Failed to upload thumbnail:",W.error)}x("שומר פרטי דגם...");const $={...s,file_url:z.data.publicUrl,thumbnail_url:V,file_type:f.name.toLowerCase().split(".").pop().toUpperCase(),file_size:f.size,scale:JSON.stringify(s.scale),rotation:JSON.stringify(s.rotation)},F=await Ta.createModel($);if(!F.success)throw new Error(`שגיאה בשמירת פרטי הדגם: ${F.error}`);x("הדגם הועלה בהצלחה! ✅"),o({name:"",name_he:"",description:"",category_id:"",scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}}),d(null),m(null),setTimeout(()=>{c()},2e3)}catch(N){console.error("Upload error:",N),x(`שגיאה: ${N.message}`)}finally{_(!1)}}};return p.jsx("div",{className:"model-uploader-overlay",children:p.jsxs("div",{className:"model-uploader",children:[p.jsxs("div",{className:"uploader-header",children:[p.jsx("h3",{children:"📦 העלאת דגם 3D"}),p.jsx("button",{className:"close-btn",onClick:c,children:"×"})]}),p.jsxs("div",{className:"uploader-content",children:[p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"שם באנגלית *"}),p.jsx("input",{type:"text",name:"name",value:s.name,onChange:H,placeholder:"Playground Slide",required:!0})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"שם בעברית *"}),p.jsx("input",{type:"text",name:"name_he",value:s.name_he,onChange:H,placeholder:"מגלשה",required:!0})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קטגוריה *"}),p.jsxs("select",{name:"category_id",value:s.category_id,onChange:H,required:!0,children:[p.jsx("option",{value:"",children:"בחר קטגוריה..."}),l.map(N=>p.jsxs("option",{value:N.id,children:[N.icon," ",N.name_he]},N.id))]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"תיאור"}),p.jsx("textarea",{name:"description",value:s.description,onChange:H,placeholder:"תיאור הדגם...",rows:"3"})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קנה מידה X"}),p.jsx("input",{type:"number",name:"scale.x",value:s.scale.x,onChange:H,step:"0.1",min:"0.1"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קנה מידה Y"}),p.jsx("input",{type:"number",name:"scale.y",value:s.scale.y,onChange:H,step:"0.1",min:"0.1"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קנה מידה Z"}),p.jsx("input",{type:"number",name:"scale.z",value:s.scale.z,onChange:H,step:"0.1",min:"0.1"})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"סיבוב X (מעלות)"}),p.jsx("input",{type:"number",name:"rotation.x",value:s.rotation.x,onChange:H,step:"1",min:"-360",max:"360"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"סיבוב Y (מעלות)"}),p.jsx("input",{type:"number",name:"rotation.y",value:s.rotation.y,onChange:H,step:"1",min:"-360",max:"360"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"סיבוב Z (מעלות)"}),p.jsx("input",{type:"number",name:"rotation.z",value:s.rotation.z,onChange:H,step:"1",min:"-360",max:"360"})]})]}),p.jsxs("div",{className:"file-uploads",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קובץ דגם 3D * (GLB, GLTF, OBJ, FBX, 3DS, DAE)"}),p.jsx("input",{type:"file",accept:".glb,.gltf,.obj,.fbx,.3ds,.dae",onChange:N=>q(N,"model"),required:!0}),f&&p.jsxs("div",{className:"file-info",children:["📁 ",f.name," (",(f.size/1024/1024).toFixed(2)," MB)"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"תמונה (אופציונלי)"}),p.jsx("input",{type:"file",accept:"image/*",onChange:N=>q(N,"thumbnail")}),y&&p.jsxs("div",{className:"file-info",children:["🖼️ ",y.name," (",(y.size/1024).toFixed(0)," KB)"]})]})]}),T&&p.jsx("div",{className:"upload-progress",children:T}),p.jsxs("div",{className:"uploader-actions",children:[p.jsx("button",{className:"upload-btn",onClick:Q,disabled:g||!f,children:g?"⏳ מעלה...":"📤 העלה דגם"}),p.jsx("button",{className:"cancel-btn",onClick:c,children:"ביטול"})]})]})]})})},cp=({onToggle:c})=>{const[l,r]=te.useState(!1),[s,o]=te.useState(!1);return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`admin-panel ${s?"minimized":""}`,children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h3",{children:"🔧 ניהול מערכת"}),p.jsxs("div",{className:"panel-controls",children:[p.jsx("button",{className:"panel-btn minimize-btn",onClick:()=>o(!s),title:s?"הרחב":"הקטן",children:"▼"}),p.jsx("button",{className:"panel-btn",onClick:()=>c&&c(!1),title:"הסתר",children:"✕"})]})]}),p.jsx("div",{className:"panel-content",children:p.jsx("button",{className:"admin-btn upload-btn",onClick:()=>r(!0),children:"📦 העלה דגם 3D"})})]}),l&&p.jsx(op,{onClose:()=>r(!1)})]})},fp=({isPlacing:c,onStartPlacing:l,onCancelPlacing:r,onObjectPlace:s,selectedPosition:o,onToggle:f})=>{const[d,y]=te.useState([]),[m,g]=te.useState([]),[_,T]=te.useState(""),[x,U]=te.useState(""),[H,q]=te.useState(""),[B,Q]=te.useState(!1),[N,z]=te.useState(!1);te.useEffect(()=>{V()},[]),te.useEffect(()=>{_?$(_):(g([]),U(""))},[_]);const V=async()=>{Q(!0);try{const Y=await Ta.getCategories();Y.success?y(Y.data):console.error("Failed to load categories:",Y.error)}catch(Y){console.error("Error loading categories:",Y)}finally{Q(!1)}},$=async Y=>{Q(!0);try{const W=await Ta.getModelsByCategory(Y);W.success?g(W.data):console.error("Failed to load models:",W.error)}catch(W){console.error("Error loading models:",W)}finally{Q(!1)}},F=()=>{if(!x){alert("אנא בחר דגם לפני תחילת המיקום");return}console.log("🎯 ObjectPlacer: Starting placement for model:",x),l()};return p.jsxs("div",{className:`object-placer ${N?"minimized":""}`,id:"object-placer",children:[p.jsxs("div",{className:"panel-header",children:[p.jsx("h3",{children:"🏗️ מציב אובייקטים"}),p.jsxs("div",{className:"panel-controls",children:[p.jsx("button",{className:"panel-btn minimize-btn",onClick:()=>z(!N),title:N?"הרחב":"הקטן",children:"▼"}),p.jsx("button",{className:"panel-btn",onClick:()=>f&&f(!1),title:"הסתר",children:"✕"})]})]}),p.jsxs("div",{className:"panel-content",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"קטגוריה:"}),p.jsxs("select",{value:_,name:"category_id",onChange:Y=>T(Y.target.value),disabled:B,children:[p.jsx("option",{value:"",children:"בחר קטגוריה..."}),d.map(Y=>p.jsxs("option",{value:Y.id,children:[Y.icon," ",Y.name_he]},Y.id))]})]}),_&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"דגם:"}),p.jsxs("select",{value:x,onChange:Y=>U(Y.target.value),name:"model_id",disabled:B,children:[p.jsx("option",{value:"",children:"בחר דגם..."}),m.map(Y=>p.jsx("option",{value:Y.id,children:Y.name_he},Y.id))]})]}),x&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"שם מותאם אישית (אופציונלי):"}),p.jsx("input",{type:"text",value:H,name:"objectName",onChange:Y=>q(Y.target.value),placeholder:"הכנס שם מותאם אישית..."})]}),p.jsx("div",{className:"button-group",children:c?p.jsx("button",{className:"cancel-placing-btn",onClick:r,children:"❌ בטל מיקום"}):p.jsx("button",{className:"start-placing-btn",onClick:F,disabled:!x||B,children:"🎯 התחל מיקום"})}),c&&p.jsxs("div",{className:"placing-status",children:["🎯 לחץ על המפה כדי למקם את האובייקט",p.jsx("br",{}),"💾 האובייקט יישמר אוטומטית במסד הנתונים"]}),B&&p.jsx("div",{className:"loading",children:"טוען..."})]})]})};function dp(){const[c,l]=te.useState(!1),[r,s]=te.useState([]),[o,f]=te.useState(null),[d,y]=te.useState(null),[m,g]=te.useState("Click 'Start Drawing' to create a building footprint."),[_,T]=te.useState(!1),[x,U]=te.useState(""),[H,q]=te.useState("osm"),[B,Q]=te.useState(!0),[N,z]=te.useState(!1),[V,$]=te.useState(null),[F,Y]=te.useState({x:0,y:0}),W=te.useRef(null),[ke,Ve]=te.useState([]),[Rt,He]=te.useState(!1),[nn,St]=te.useState(null),[ut,R]=te.useState([]),[J,se]=te.useState(!0),[Ae,w]=te.useState(!0),[L,I]=te.useState(!0),[K,ie]=te.useState(!0);te.useEffect(()=>{ea(),Ee()},[]);const Ee=async()=>{try{const{objectsService:G}=await In(async()=>{const{objectsService:Z}=await Promise.resolve().then(()=>Co);return{objectsService:Z}},void 0),P=await G.getPlacedObjects();P.success&&P.data&&(console.log("טוען אובייקטים ממוקמים:",P.data.length),R(P.data),ce(P.data))}catch(G){console.error("שגיאה בטעינת אובייקטים:",G)}},ce=G=>{if(!W.current||!W.current.viewer)return;const P=W.current.viewer;G.forEach(Z=>{if(Z.position&&Z.object_models){let ae=function(){const X=window.Cesium.Cartesian3.fromDegrees(Z.position.longitude,Z.position.latitude,Z.position.height||0);P.entities.add({id:`placed-object-${Z.id}`,position:X,box:{dimensions:new window.Cesium.Cartesian3((Z.scale?.x||1)*5,(Z.scale?.y||1)*5,(Z.scale?.z||1)*5),material:window.Cesium.Color.ORANGE.withAlpha(.7),outline:!0,outlineColor:window.Cesium.Color.BLACK},label:{text:Z.name,font:"12pt sans-serif",fillColor:window.Cesium.Color.WHITE,outlineColor:window.Cesium.Color.BLACK,outlineWidth:2,style:window.Cesium.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new window.Cesium.Cartesian2(0,-50)},isPlacedObject:!0})};if(Z.object_models.file_url&&W.current.add3DModel){const X={file_url:Z.object_models.file_url,longitude:Z.position.longitude,latitude:Z.position.latitude,height:Z.position.height||0,scale:Z.scale||{x:1,y:1,z:1},rotation:Z.rotation||{x:0,y:0,z:0}};try{W.current.add3DModel(X)}catch(ge){console.warn("Failed to load 3D model, using fallback box:",ge),ae()}}else ae()}})},mt=()=>{console.log("🎯 Starting object placement mode"),He(!0),St(null),g("מצב מיקום פעיל - לחץ על המפה למיקום האובייקט")},Be=()=>{console.log("❌ Canceling object placement"),He(!1),St(null),g("מיקום אובייקט בוטל")},Zt=async(G,P)=>{console.log("📍 Placing object:",G);try{const{objectsService:Z}=await In(async()=>{const{objectsService:X}=await Promise.resolve().then(()=>Co);return{objectsService:X}},void 0),ae=await Z.placeObject(G);ae.success?(console.log("✅ Object placed successfully"),g(`אובייקט "${G.name}" הוצב בהצלחה!`),R(X=>[...X,ae.data]),ce([ae.data]),He(!1),St(null)):(console.error("Failed to place object:",ae.error),g(`שגיאה במיקום אובייקט: ${ae.error}`))}catch(Z){console.error("Error placing object:",Z),g(`שגיאה במיקום אובייקט: ${Z.message}`)}},Dl=G=>{console.log("🎯 handleObjectPositionSelect called with:",G),console.log("🔄 Setting selected position and triggering placement"),St(G),g(`מיקום נבחר: ${G.latitude.toFixed(6)}, ${G.longitude.toFixed(6)}`),console.log("🚀 Calling handleDirectObjectPlacement immediately"),xa(G)},xa=async G=>{console.log("🏗️ handleDirectObjectPlacement called with:",G),console.log("🔍 Looking for form elements...");const P=document.querySelector('#object-placer select[name="model_id"]'),Z=document.querySelector('#object-placer select[name="category_id"]'),ae=document.querySelector('#object-placer input[name="objectName"]');console.log("📋 Form elements found:",{modelSelect:!!P,categorySelect:!!Z,nameInput:!!ae});const X=P?.value,ge=Z?.value,de=ae?.value||"";if(console.log("📋 Form values:",{selectedModel:X,selectedCategory:ge,objectName:de}),!X){console.error("❌ No model selected"),g("❌ שגיאה: לא נמצא דגם נבחר"),He(!1);return}if(!ge){console.error("❌ No category selected"),g("❌ שגיאה: לא נמצאה קטגוריה נבחרת"),He(!1);return}g("💾 שומר אובייקט במסד הנתונים..."),console.log("💾 Starting database save process...");try{const{objectsService:ye}=await In(async()=>{const{objectsService:Ce}=await Promise.resolve().then(()=>Co);return{objectsService:Ce}},void 0);console.log("📦 Loading model data for category:",ge);const Se=await ye.getModelsByCategory(ge);if(!Se.success)throw new Error("Failed to get model data");const re=Se.data.find(Ce=>Ce.id===X);if(!re)throw new Error("Model not found");console.log("📦 Selected model data:",re);const Oe={model_id:X,name:de||re.name_he,position:G,scale:typeof re.scale=="string"?JSON.parse(re.scale):re.scale||{x:1,y:1,z:1},rotation:typeof re.rotation=="string"?JSON.parse(re.rotation):re.rotation||{x:0,y:0,z:0},properties:{}};console.log("💾 Saving object to database:",Oe);const ne=await ye.placeObject(Oe);ne.success?(console.log("✅ Object saved successfully:",ne.data),g(`✅ אובייקט "${Oe.name}" נשמר והוצב בהצלחה!`),R(Ce=>[...Ce,ne.data]),ce([ne.data]),He(!1),St(null),ae&&(ae.value="")):(console.error("Failed to place object:",ne.error),g(`❌ שגיאה במיקום אובייקט: ${ne.error}`),He(!1))}catch(ye){console.error("Error placing object:",ye),g(`❌ שגיאה במיקום אובייקט: ${ye.message}`),He(!1)}},ea=async()=>{try{console.log("Loading saved buildings...");const G=await Ol.getAllBuildings();console.log("Load result:",G),G.success&&G.data?(console.log("טוען בניינים שמורים:",G.data.length),Ve(G.data),W.current&&W.current.viewer&&Aa(G.data)):console.error("Failed to load buildings:",G.error)}catch(G){console.error("שגיאה בטעינת בניינים:",G)}},Aa=G=>{if(!W.current||!W.current.viewer)return;const P=W.current.viewer,Z=d;P.entities.values.filter(X=>X.id&&X.id.startsWith("building-")&&X.id!==Z).forEach(X=>{P.entities.remove(X)}),G.forEach(X=>{if(X.geometry_points&&X.geometry_points.length>=3){if(console.log("מציג בניין:",X.id),X.id===Z){const ne=P.entities.getById(X.id);ne&&P.entities.remove(ne),P.entities.values.filter(Ge=>Ge.id&&Ge.id.startsWith(`${X.id}-floor-`)).forEach(Ge=>{P.entities.remove(Ge)})}const ge=X.geometry_points.map(ne=>window.Cesium.Cartesian3.fromDegrees(ne.longitude,ne.latitude,ne.height||0)),de=parseFloat(X.height)||30,ye=parseInt(X.num_floors)||parseInt(X.no_floors)||Math.max(1,Math.floor(de/3.5)),Se=X.floor_colors||[],Oe=Oa(P,X.id,ge,de,ye,Se,.9);Oe&&(Oe.show=B,P.entities.values.filter(Ce=>Ce.id&&Ce.id.startsWith(`${X.id}-floor-`)).forEach(Ce=>{Ce.show=B}))}})},Oa=(G,P,Z,ae,X,ge,de=.9)=>{console.log(`יוצר בניין שמור עם ${X} קומות, גובה כולל: ${ae}מ`);const ye=Li(Z,2),Se=ae/X,re=G.entities.add({id:P,isBuilding:!0});let Oe;ge&&ge.length===X?Oe=ge.map(ne=>{try{return window.Cesium.Color.fromCssColorString(ne).withAlpha(de)}catch{return console.warn("Invalid color string:",ne,"using default"),window.Cesium.Color.GREY.withAlpha(de)}}):Oe=Ra(X,de);for(let ne=0;ne<X;ne++){const Ce=ne*Se,Ge=(ne+1)*Se;G.entities.add({id:`${P}-floor-${ne}`,parent:re,polygon:{hierarchy:new window.Cesium.PolygonHierarchy(ye),height:Ce,extrudedHeight:Ge,material:Oe[ne],outline:!0,outlineColor:window.Cesium.Color.BLACK.withAlpha(.3),outlineWidth:1}})}return re},ar=(G,P,Z,ae,X)=>{console.log("🔄 APP: Drawing state change:",{drawing:G,pointsCount:P.length,message:X,isDrawingNow:G}),l(G),s(P),f(Z),y(ae),g(X)},lr=()=>{console.log("🔘 BUTTON: Start/Finish drawing clicked"),console.log("Current state - isDrawing:",c,"activeShapePoints:",r.length),W.current&&(c?(console.log("🔴 Finishing current drawing..."),W.current.finishDrawing()):(console.log("🟢 Starting new drawing session..."),W.current.startDrawing(),s([]),U("")))},Dt=G=>{console.log("🏢 Building clicked:",G.id),Y({x:window.innerWidth-320,y:280}),ir(G.id)},ir=async G=>{try{console.log("🔄 Loading fresh building data for:",G);const P=await Ol.getBuilding(G);if(P.success&&P.data)console.log("✅ Fresh building data loaded:",P.data),console.log("🔗 Weblink in fresh data:",P.data.weblink),$(P.data),z(!0);else{console.warn("Building data not found for:",G);const Z=ke.find(ae=>ae.id===G);Z?($(Z),z(!0)):($({id:G,full_addres_q:"לא זמין",bldg_num:"לא זמין",bldg_type:"לא זמין",num_floors:"לא זמין",height:"לא זמין"}),z(!0))}}catch(P){console.error("Error loading fresh building data:",P);const Z=ke.find(ae=>ae.id===G);Z&&($(Z),z(!0))}},Bi=async G=>{console.log("🏗️ CREATE BUILDING CLICKED");const P=r.length>0?r:G;if(console.log("✅ Points to use for building:",P.length),r.length<3){console.error("❌ Not enough points for building creation"),alert("אנא צייר תחילה מתאר בניין תקין.");return}if(!x.trim()){console.error("❌ No AI command provided"),alert("אנא הכנס פקודה עבור הבינה המלאכותית.");return}g("הבינה המלאכותית חושבת...");try{console.log("Calling AI with command:",x);const Z=await Ca(x);if(console.log("AI returned building data:",Z),Z!==null&&W.current){const ae=W.current.viewer,{height:X,floors:ge}=Z;o&&ae.entities.remove(o);const de=`building-${new Date().getTime()}`;console.log("Creating building with ID:",de);const ye=sr(ae,de,r,X,ge,.9);console.log("Building entity created:",ye),f(ye),y(de),g(`🏗️ בונה בניין עם ${ge} קומות... (${X}מ)`),console.log("Saving to database...");const Se=r.map(ne=>({longitude:window.Cesium.Math.toDegrees(window.Cesium.Cartographic.fromCartesian(ne).longitude),latitude:window.Cesium.Math.toDegrees(window.Cesium.Cartographic.fromCartesian(ne).latitude),height:window.Cesium.Cartographic.fromCartesian(ne).height})),re=Ra(ge,1).map(ne=>{const Ce=Math.round(ne.red*255).toString(16).padStart(2,"0"),Ge=Math.round(ne.green*255).toString(16).padStart(2,"0"),Jt=Math.round(ne.blue*255).toString(16).padStart(2,"0");return`#${Ce}${Ge}${Jt}`});console.log("Building data to save:",{buildingId:de,height:X,floors:ge,geometryPoints:Se.length,defaultFloorColors:re.length});const Oe=await Ol.saveBuilding(de,{num_floors:ge.toString(),no_floors:ge.toString(),height:X.toString(),ai_command:x,full_addres_q:`Building created at ${new Date().toLocaleString()}`,bldg_type:"Generated Building"},Se,x,X,re);console.log("Save result:",Oe),Oe.success?(console.log("Building saved successfully"),setTimeout(()=>{g(`✅ בניין הושלם ונשמר! גובה: ${X}מ', קומות: ${ge}`)},ge*1e3+500),await ea()):(console.error("Save failed:",Oe.error),g(`בניין נוצר אך השמירה נכשלה: ${Oe.error}`)),s([]),U(""),l(!1),T(!0)}else console.error("Failed to create building - no height or viewer"),g("הבינה המלאכותית לא הצליחה לקבוע פרמטרי בניין או הצופה אינו זמין.")}catch(Z){console.error("Error calling Gemini API:",Z),g("שגיאה בתקשורת עם הבינה המלאכותית.")}},qi=G=>{y(G.id),T(!0),z(!1)},Ca=async G=>{console.log("Calling Gemini API with command:",G);const Z="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyD7he1t-eLRUPOjUvbSfImIBLhKelaoQbw",X={contents:[{parts:[{text:`You are an assistant for a 3D mapping application. The user has provided an instruction to create a building. Your task is to determine both the final height of the building in meters AND the number of floors. Assume a standard floor is 3.5 meters high if the user specifies floors. Respond with ONLY a JSON object in this format: {"height": 35, "floors": 10}. For example, if the user says 'make it 10 stories tall', you should respond with '{"height": 35, "floors": 10}'. If the user says 'extrude to 100 feet', you should respond with '{"height": 30.48, "floors": 9}'. If the user says 'build it 50 meters high', you should respond with '{"height": 50, "floors": 14}'. User instruction: '${G}'`}]}]};try{const ge=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!ge.ok){const ye=await ge.text();return console.error("API Error Response:",ye),null}const de=await ge.json();if(console.log("Gemini API response:",de),de.candidates&&de.candidates[0]?.content?.parts[0]){const ye=de.candidates[0].content.parts[0].text;console.log("Raw AI response:",ye);try{const Se=ye.trim().replace(/^```json\s*/,"").replace(/\s*```$/,""),re=JSON.parse(Se);return console.log("Parsed response:",re),{height:parseFloat(re.height)||0,floors:parseInt(re.floors)||1}}catch(Se){console.error("Failed to parse JSON response:",Se);const re=parseFloat(ye.trim());return isNaN(re)?null:{height:re,floors:Math.max(1,Math.floor(re/3.5))}}}return null}catch(ge){return console.error("Fetch error:",ge),null}},sr=(G,P,Z,ae,X,ge=.9,de=!0)=>{console.log(`Creating building with ${X} floors, total height: ${ae}m`);const ye=Li(Z,2),Se=ae/X,re=G.entities.add({id:P,isBuilding:!0}),Oe=Ra(X,ge);if(de){let ne=0;const Ce=()=>{if(ne<X&&G&&!G.isDestroyed()){const Ge=ne*Se,Jt=(ne+1)*Se,Pt=G.entities.add({id:`${P}-floor-${ne}`,parent:re,polygon:{hierarchy:new window.Cesium.PolygonHierarchy(ye),height:Ge,extrudedHeight:Ge,material:Oe[ne],outline:!0,outlineColor:window.Cesium.Color.BLACK.withAlpha(.3),outlineWidth:1}}),$t=G.clock.currentTime.clone(),Da=.8,wn=()=>{if(!G||G.isDestroyed()||!Pt.polygon)return;const ta=G.clock.currentTime,Sn=window.Cesium.JulianDate.secondsDifference(ta,$t),En=Math.min(Sn/Da,1),na=1-Math.pow(1-En,3),Tn=Ge+(Jt-Ge)*na;Pt.polygon.extrudedHeight=Tn,En<1?requestAnimationFrame(wn):(ne++,ne<X?setTimeout(Ce,200):console.log(`🏗️ Building ${P} construction completed!`))};requestAnimationFrame(wn)}};Ce()}else for(let ne=0;ne<X;ne++){const Ce=ne*Se,Ge=(ne+1)*Se;G.entities.add({id:`${P}-floor-${ne}`,parent:re,polygon:{hierarchy:new window.Cesium.PolygonHierarchy(ye),height:Ce,extrudedHeight:Ge,material:Oe[ne],outline:!0,outlineColor:window.Cesium.Color.BLACK.withAlpha(.3),outlineWidth:1}})}return re},Ra=(G,P=.9)=>{const Z=[];for(let ae=0;ae<G;ae++){const X=ae/Math.max(1,G-1),ge=.15-X*.4,de=.7-X*.3,ye=.8+X*.2,Se=window.Cesium.Color.fromHsl(ge,de,ye,P);Z.push(Se)}return Z},Li=(G,P)=>{if(G.length<3)return G;const Z=[],ae=8;for(let X=0;X<G.length;X++){const ge=G[(X-1+G.length)%G.length],de=G[X],ye=G[(X+1)%G.length],Se=window.Cesium.Cartographic.fromCartesian(ge),re=window.Cesium.Cartographic.fromCartesian(de),Oe=window.Cesium.Cartographic.fromCartesian(ye),ne=Se.longitude-re.longitude,Ce=Se.latitude-re.latitude,Ge=Oe.longitude-re.longitude,Jt=Oe.latitude-re.latitude,Pt=Math.sqrt(ne*ne+Ce*Ce),$t=Math.sqrt(Ge*Ge+Jt*Jt);if(Pt>0&&$t>0){const Da=ne/Pt,wn=Ce/Pt,ta=Ge/$t,Sn=Jt/$t,En=Da*ta+wn*Sn,na=Math.acos(Math.max(-1,Math.min(1,En)));if(na<Math.PI*.9){const Tn=P/6371e3;for(let Ut=0;Ut<ae;Ut++){const tt=Ut/(ae-1),Ie=na*(tt-.5),jn=Tn*Math.cos(Ie)*Da+Tn*Math.sin(Ie)*ta,Ul=Tn*Math.cos(Ie)*wn+Tn*Math.sin(Ie)*Sn,Ml=new window.Cesium.Cartographic(re.longitude+jn,re.latitude+Ul,re.height);Z.push(window.Cesium.Cartesian3.fromRadians(Ml.longitude,Ml.latitude,Ml.height))}}else Z.push(de)}else Z.push(de)}return Z.length>0?Z:G};te.useEffect(()=>{const G=r.length>=3,P=x.trim().length>0,Z=G&&!c&&P;console.log("=== APP STATE UPDATE ==="),console.log("- isDrawing:",c),console.log("- activeShapePoints:",r.length),console.log("- hasPolygon:",G),console.log("- hasCommand:",P),console.log("- canCreate:",Z),console.log("========================")},[c,r,x]),te.useEffect(()=>{W.current&&ke.length>0&&Aa(ke)},[W.current,ke,B]);const rr=async(G,P,Z=!1)=>{if(!W.current||!W.current.viewer)return;const ae=W.current.viewer;let X=G.floor_colors||[];if(!Z)try{const de=await Ol.getBuilding(d);de.success&&de.data&&de.data.floor_colors&&(X=de.data.floor_colors)}catch(de){console.error("Error getting updated building data:",de)}const ge=ae.entities.values.filter(de=>de.id&&de.id.startsWith(`${d}-floor-`));if(ge.forEach((de,ye)=>{if(de.polygon&&de.polygon.material){let Se;if(X&&X[ye])try{Se=window.Cesium.Color.fromCssColorString(X[ye]).withAlpha(P)}catch{console.warn("Invalid color string:",X[ye],"using default"),Se=window.Cesium.Color.GREY.withAlpha(P)}else{const re=ge.length,Oe=ye/Math.max(1,re-1),ne=.15-Oe*.4,Ce=.7-Oe*.3,Ge=.8+Oe*.2;Se=window.Cesium.Color.fromHsl(ne,Ce,Ge,P)}de.polygon.material=Se}}),ge.length===0&&G.geometry_points&&G.geometry_points.length>=3){const de=G.geometry_points.map(re=>window.Cesium.Cartesian3.fromDegrees(re.longitude,re.latitude,re.height||0)),ye=parseFloat(G.height)||30,Se=parseInt(G.num_floors)||parseInt(G.no_floors)||Math.max(1,Math.floor(ye/3.5));Oa(ae,G.id,de,ye,Se,X,P)}};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"app",children:[p.jsx(gg,{ref:W,isDrawing:c,activeShapePoints:r,currentLayer:H,isPlacingObject:Rt,onDrawingStateChange:ar,onBuildingClick:Dt,onObjectPositionSelect:Dl}),p.jsx(ay,{show:J,onToggle:se,isDrawing:c,statusMessage:m,aiCommand:x,onAiCommandChange:U,onStartDrawing:lr,onCreateBuilding:Bi,canCreate:r.length>=3&&!c&&x.trim().length>0}),p.jsx(up,{show:L,onToggle:I,currentLayer:H,onLayerChange:q}),p.jsx(fp,{show:Ae,onToggle:w,isPlacing:Rt,onStartPlacing:mt,onCancelPlacing:Be,onObjectPlace:Zt,selectedPosition:nn}),_&&p.jsx(sp,{buildingId:d,onClose:()=>{T(!1),y(null)},onSave:(G,P,Z,ae=!1)=>{if(g(G),(P||ae)&&Z!==void 0&&W.current){const X=ke.find(ge=>ge.id===d);X&&W.current&&W.current.viewer&&rr(X,Z,ae)}else P&&!ae&&ea()}}),N&&V&&p.jsx(rp,{building:V,position:F,onEdit:qi,onClose:()=>{z(!1),$(null)}}),p.jsx(cp,{show:K,onToggle:ie})]}),p.jsxs("div",{style:{position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)",background:"rgba(38, 38, 38, 0.95)",borderRadius:"8px",padding:"10px",backdropFilter:"blur(8px)",border:"1px solid #444",zIndex:15},children:[p.jsx("div",{style:{color:"#fff",fontSize:"12px",marginBottom:"8px",textAlign:"center"},children:"חלונות"}),!J&&p.jsx("button",{className:"window-menu-btn ai-controls",onClick:()=>se(!0),children:"🏗️ יוצר בניינים"}),!Ae&&p.jsx("button",{className:"window-menu-btn object-placer",onClick:()=>w(!0),children:"🎯 מציב אובייקטים"}),!L&&p.jsx("button",{className:"window-menu-btn layer-switcher",onClick:()=>I(!0),children:"🗺️ שכבות מפה"}),!K&&p.jsx("button",{className:"window-menu-btn admin-panel",onClick:()=>ie(!0),children:"🔧 ניהול מערכת"})]})]})}ey.createRoot(document.getElementById("root")).render(p.jsx(te.StrictMode,{children:p.jsx(dp,{})}));
